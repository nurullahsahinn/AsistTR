{"error":"type \"vector\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      CREATE TABLE IF NOT EXISTS knowledge_base (\n        id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n        site_id UUID REFERENCES sites(id) ON DELETE CASCADE,\n        title VARCHAR(500) NOT NULL,\n        content TEXT NOT NULL,\n        embedding vector(1536),\n        metadata JSONB DEFAULT '{}',\n        is_active BOOLEAN DEFAULT true,\n        created_at TIMESTAMP DEFAULT NOW(),\n        updated_at TIMESTAMP DEFAULT NOW()\n      )\n    ","timestamp":"2025-10-22 14:01:56"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 14:03:43"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:107:7)","timestamp":"2025-10-22 14:03:43"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 14:14:35"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:107:7)","timestamp":"2025-10-22 14:14:35"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 14:28:55"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:107:7)","timestamp":"2025-10-22 14:28:55"}
{"error":"invalid input syntax for type uuid: \"site-id\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT id FROM visitors WHERE site_id = $1 AND session_id = $2","timestamp":"2025-10-22 14:32:32"}
{"code":"22P02","file":"uuid.c","length":139,"level":"error","line":"133","message":"Visitor connect hatası: invalid input syntax for type uuid: \"site-id\"","name":"error","routine":"string_to_uuid","service":"asistr-backend","severity":"ERROR","stack":"error: invalid input syntax for type uuid: \"site-id\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:21:21)","timestamp":"2025-10-22 14:32:32","where":"unnamed portal parameter $1 = '...'"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 14:33:04"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:107:7)","timestamp":"2025-10-22 14:33:04"}
{"level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-10-22 14:35:28"}
{"level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-10-22 15:04:33"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 15:08:15"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-22 15:08:15"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 500","service":"asistr-backend","stack":"Error: Ollama API hatası: 500\n    at generateChatResponse (/app/src/rag/ollama.service.js:133:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-22 15:08:21"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 500","service":"asistr-backend","stack":"Error: Ollama API hatası: 500\n    at generateChatResponse (/app/src/rag/ollama.service.js:133:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-22 15:09:17"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 500","service":"asistr-backend","stack":"Error: Ollama API hatası: 500\n    at generateChatResponse (/app/src/rag/ollama.service.js:133:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-22 15:13:34"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 500","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 500\n    at generateEmbedding (/app/src/rag/ollama.service.js:66:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async addKnowledge (/app/src/rag/knowledge.service.js:16:23)\n    at async createKnowledge (/app/src/controllers/rag.controller.js:23:20)","timestamp":"2025-10-22 15:15:10"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 500","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 500\n    at generateEmbedding (/app/src/rag/ollama.service.js:66:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async updateKnowledge (/app/src/rag/knowledge.service.js:131:25)\n    at async updateKnowledgeItem (/app/src/controllers/rag.controller.js:76:20)","timestamp":"2025-10-22 15:15:25"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 15:16:22"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-22 15:16:22"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 500","service":"asistr-backend","stack":"Error: Ollama API hatası: 500\n    at generateChatResponse (/app/src/rag/ollama.service.js:133:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-22 15:16:28"}
{"error":"syntax error at or near \",\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO knowledge_base (site_id, title, content, type, status) VALUES (, , , , )","timestamp":"2025-10-22 15:18:08"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 15:22:32"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-22 15:22:32"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 500","service":"asistr-backend","stack":"Error: Ollama API hatası: 500\n    at generateChatResponse (/app/src/rag/ollama.service.js:133:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-22 15:22:38"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 15:22:50"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-22 15:22:50"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 15:27:01"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-22 15:27:01"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 500","service":"asistr-backend","stack":"Error: Ollama API hatası: 500\n    at generateChatResponse (/app/src/rag/ollama.service.js:133:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-22 15:29:55"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-24 10:34:21"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-24 10:34:21"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-24 10:36:26"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-24 10:36:26"}
{"cause":{"code":"UND_ERR_HEADERS_TIMEOUT","message":"Headers Timeout Error","name":"HeadersTimeoutError"},"level":"error","message":"Ollama generateChatResponse hatası: fetch failed","service":"asistr-backend","stack":"TypeError: fetch failed\n    at node:internal/deps/undici/undici:12637:11\n    at async generateChatResponse (/app/src/rag/ollama.service.js:115:22)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-24 10:40:21"}
{"cause":{"code":"UND_ERR_HEADERS_TIMEOUT","message":"Headers Timeout Error","name":"HeadersTimeoutError"},"level":"error","message":"Ollama generateChatResponse hatası: fetch failed","service":"asistr-backend","stack":"TypeError: fetch failed\n    at node:internal/deps/undici/undici:12637:11\n    at async generateChatResponse (/app/src/rag/ollama.service.js:115:22)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-24 10:40:51"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-24 10:42:42"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-24 10:42:42"}
{"cause":{"code":"UND_ERR_HEADERS_TIMEOUT","message":"Headers Timeout Error","name":"HeadersTimeoutError"},"level":"error","message":"Ollama generateChatResponse hatası: fetch failed","service":"asistr-backend","stack":"TypeError: fetch failed\n    at node:internal/deps/undici/undici:12637:11\n    at async generateChatResponse (/app/src/rag/ollama.service.js:115:22)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:193:32)","timestamp":"2025-10-24 10:48:24"}
{"cause":{"code":"UND_ERR_HEADERS_TIMEOUT","message":"Headers Timeout Error","name":"HeadersTimeoutError"},"level":"error","message":"Ollama generateChatResponse hatası: fetch failed","service":"asistr-backend","stack":"TypeError: fetch failed\n    at node:internal/deps/undici/undici:12637:11\n    at async generateChatResponse (/app/src/rag/ollama.service.js:115:22)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-24 10:50:56"}
{"cause":{"code":"UND_ERR_HEADERS_TIMEOUT","message":"Headers Timeout Error","name":"HeadersTimeoutError"},"level":"error","message":"Ollama generateChatResponse hatası: fetch failed","service":"asistr-backend","stack":"TypeError: fetch failed\n    at node:internal/deps/undici/undici:12637:11\n    at async generateChatResponse (/app/src/rag/ollama.service.js:115:22)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-24 10:51:23"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-24 10:51:31"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-24 10:51:31"}
{"cause":{"code":"UND_ERR_HEADERS_TIMEOUT","message":"Headers Timeout Error","name":"HeadersTimeoutError"},"level":"error","message":"Ollama generateChatResponse hatası: fetch failed","service":"asistr-backend","stack":"TypeError: fetch failed\n    at node:internal/deps/undici/undici:12637:11\n    at async generateChatResponse (/app/src/rag/ollama.service.js:115:22)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-24 10:56:37"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-24 14:16:37"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-24 14:16:37"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-24 14:21:01"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-24 14:21:01"}
{"level":"error","message":"CloseConversation hatası: Cannot read properties of undefined (reading 'to')","service":"asistr-backend","stack":"TypeError: Cannot read properties of undefined (reading 'to')\n    at closeConversation (/app/src/controllers/chat.controller.js:107:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-10-26 20:17:48"}
{"error":"column \"site_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT id, name, email, role, is_active, created_at FROM users WHERE site_id = $1","timestamp":"2025-10-26 20:25:49"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"listUsers hatası: column \"site_id\" does not exist","name":"error","position":"70","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"site_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async listUsers (/app/src/controllers/user.controller.js:10:20)","timestamp":"2025-10-26 20:25:49"}
{"level":"error","message":"AssignAgent hatası: Cannot read properties of undefined (reading 'to')","service":"asistr-backend","stack":"TypeError: Cannot read properties of undefined (reading 'to')\n    at assignAgent (/app/src/controllers/chat.controller.js:137:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-10-26 20:43:55"}
{"level":"error","message":"AssignAgent hatası: Cannot read properties of undefined (reading 'to')","service":"asistr-backend","stack":"TypeError: Cannot read properties of undefined (reading 'to')\n    at assignAgent (/app/src/controllers/chat.controller.js:137:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-10-26 20:43:57"}
{"level":"error","message":"AssignAgent hatası: Cannot read properties of undefined (reading 'to')","service":"asistr-backend","stack":"TypeError: Cannot read properties of undefined (reading 'to')\n    at assignAgent (/app/src/controllers/chat.controller.js:137:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-10-26 20:43:57"}
{"level":"error","message":"AssignAgent hatası: Cannot read properties of undefined (reading 'to')","service":"asistr-backend","stack":"TypeError: Cannot read properties of undefined (reading 'to')\n    at assignAgent (/app/src/controllers/chat.controller.js:137:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-10-26 20:43:59"}
{"level":"error","message":"AssignAgent hatası: Cannot read properties of undefined (reading 'to')","service":"asistr-backend","stack":"TypeError: Cannot read properties of undefined (reading 'to')\n    at assignAgent (/app/src/controllers/chat.controller.js:137:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-10-26 20:44:25"}
{"0":"t","1":"e","10":"e","11":"y","12":"-","13":"1","14":"2","15":"3","16":"4","17":"5","2":"s","3":"t","4":"-","5":"a","6":"p","7":"i","8":"-","9":"k","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-10-27 13:10:30"}
{"0":"t","1":"e","10":"e","11":"y","12":"-","13":"1","14":"2","15":"3","16":"4","17":"5","2":"s","3":"t","4":"-","5":"a","6":"p","7":"i","8":"-","9":"k","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-10-27 13:15:26"}
{"0":"t","1":"e","10":"e","11":"y","12":"-","13":"1","14":"2","15":"3","16":"4","17":"5","2":"s","3":"t","4":"-","5":"a","6":"p","7":"i","8":"-","9":"k","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-10-27 13:16:31"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 500","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 500\n    at generateEmbedding (/app/src/rag/ollama.service.js:66:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async addKnowledge (/app/src/rag/knowledge.service.js:16:23)\n    at async createKnowledge (/app/src/controllers/rag.controller.js:23:20)","timestamp":"2025-10-27 13:27:28"}
{"error":"extension \"vector\" is not available","level":"error","message":"Query hatası:","service":"asistr-backend","text":"CREATE EXTENSION IF NOT EXISTS vector","timestamp":"2025-11-01 12:04:25"}
{"error":"extension \"vector\" is not available","level":"error","message":"Query hatası:","service":"asistr-backend","text":"CREATE EXTENSION IF NOT EXISTS vector","timestamp":"2025-11-01 12:11:32"}
{"error":"extension \"vector\" is not available","level":"error","message":"Query hatası:","service":"asistr-backend","text":"CREATE EXTENSION IF NOT EXISTS vector","timestamp":"2025-11-01 12:30:09"}
{"error":"column \"embedding\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"CREATE INDEX IF NOT EXISTS idx_knowledge_embedding ON knowledge_base USING ivfflat (embedding vector_cosine_ops) WITH (lists = 100)","timestamp":"2025-11-01 12:30:44"}
{"error":"invalid input syntax for type uuid: \"01a9285e-eb1e-4308-8148-58007bfce0b\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT \n         id, \n         title, \n         content, \n         metadata,\n         1 - (embedding <=> $1::vector) as similarity\n       FROM knowledge_base\n       WHERE site_id = $2 \n       AND is_active = true\n       AND embedding IS NOT NULL\n       ORDER BY embedding <=> $1::vector\n       LIMIT $3","timestamp":"2025-11-01 13:00:01"}
{"code":"22P02","file":"uuid.c","length":167,"level":"error","line":"133","message":"SearchKnowledge hatası: invalid input syntax for type uuid: \"01a9285e-eb1e-4308-8148-58007bfce0b\"","name":"error","routine":"string_to_uuid","service":"asistr-backend","severity":"ERROR","stack":"error: invalid input syntax for type uuid: \"01a9285e-eb1e-4308-8148-58007bfce0b\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:100:20)\n    at async testSearch (/app/test-search.js:18:21)","timestamp":"2025-11-01 13:00:01","where":"unnamed portal parameter $2 = '...'"}
{"error":"invalid input syntax for type uuid: \"01a9285e-eb1e-4308-8148-58007bfce0b\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT id, title, content, metadata,\n        CASE \n          WHEN title ILIKE $3 THEN 10\n          WHEN content ILIKE $3 THEN 5\n          ELSE 1\n        END as relevance_score\n      FROM knowledge_base\n      WHERE site_id = $1 \n        AND is_active = true\n        AND ((title ILIKE $3 OR content ILIKE $3) OR (title ILIKE $4 OR content ILIKE $4) OR (title ILIKE $5 OR content ILIKE $5))\n      ORDER BY relevance_score DESC, created_at DESC\n      LIMIT $2\n    ","timestamp":"2025-11-01 13:00:01"}
