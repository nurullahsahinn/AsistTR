{"error":"type \"vector\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      CREATE TABLE IF NOT EXISTS knowledge_base (\n        id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n        site_id UUID REFERENCES sites(id) ON DELETE CASCADE,\n        title VARCHAR(500) NOT NULL,\n        content TEXT NOT NULL,\n        embedding vector(1536),\n        metadata JSONB DEFAULT '{}',\n        is_active BOOLEAN DEFAULT true,\n        created_at TIMESTAMP DEFAULT NOW(),\n        updated_at TIMESTAMP DEFAULT NOW()\n      )\n    ","timestamp":"2025-10-22 14:01:56"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 14:03:43"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:107:7)","timestamp":"2025-10-22 14:03:43"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 14:14:35"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:107:7)","timestamp":"2025-10-22 14:14:35"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 14:28:55"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:107:7)","timestamp":"2025-10-22 14:28:55"}
{"error":"invalid input syntax for type uuid: \"site-id\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT id FROM visitors WHERE site_id = $1 AND session_id = $2","timestamp":"2025-10-22 14:32:32"}
{"code":"22P02","file":"uuid.c","length":139,"level":"error","line":"133","message":"Visitor connect hatası: invalid input syntax for type uuid: \"site-id\"","name":"error","routine":"string_to_uuid","service":"asistr-backend","severity":"ERROR","stack":"error: invalid input syntax for type uuid: \"site-id\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:21:21)","timestamp":"2025-10-22 14:32:32","where":"unnamed portal parameter $1 = '...'"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 14:33:04"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:107:7)","timestamp":"2025-10-22 14:33:04"}
{"level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-10-22 14:35:28"}
{"level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-10-22 15:04:33"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 15:08:15"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-22 15:08:15"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 500","service":"asistr-backend","stack":"Error: Ollama API hatası: 500\n    at generateChatResponse (/app/src/rag/ollama.service.js:133:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-22 15:08:21"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 500","service":"asistr-backend","stack":"Error: Ollama API hatası: 500\n    at generateChatResponse (/app/src/rag/ollama.service.js:133:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-22 15:09:17"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 500","service":"asistr-backend","stack":"Error: Ollama API hatası: 500\n    at generateChatResponse (/app/src/rag/ollama.service.js:133:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-22 15:13:34"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 500","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 500\n    at generateEmbedding (/app/src/rag/ollama.service.js:66:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async addKnowledge (/app/src/rag/knowledge.service.js:16:23)\n    at async createKnowledge (/app/src/controllers/rag.controller.js:23:20)","timestamp":"2025-10-22 15:15:10"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 500","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 500\n    at generateEmbedding (/app/src/rag/ollama.service.js:66:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async updateKnowledge (/app/src/rag/knowledge.service.js:131:25)\n    at async updateKnowledgeItem (/app/src/controllers/rag.controller.js:76:20)","timestamp":"2025-10-22 15:15:25"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 15:16:22"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-22 15:16:22"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 500","service":"asistr-backend","stack":"Error: Ollama API hatası: 500\n    at generateChatResponse (/app/src/rag/ollama.service.js:133:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-22 15:16:28"}
{"error":"syntax error at or near \",\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO knowledge_base (site_id, title, content, type, status) VALUES (, , , , )","timestamp":"2025-10-22 15:18:08"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 15:22:32"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-22 15:22:32"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 500","service":"asistr-backend","stack":"Error: Ollama API hatası: 500\n    at generateChatResponse (/app/src/rag/ollama.service.js:133:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-22 15:22:38"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 15:22:50"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-22 15:22:50"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-22 15:27:01"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-22 15:27:01"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 500","service":"asistr-backend","stack":"Error: Ollama API hatası: 500\n    at generateChatResponse (/app/src/rag/ollama.service.js:133:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-22 15:29:55"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-24 10:34:21"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-24 10:34:21"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-24 10:36:26"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-24 10:36:26"}
{"cause":{"code":"UND_ERR_HEADERS_TIMEOUT","message":"Headers Timeout Error","name":"HeadersTimeoutError"},"level":"error","message":"Ollama generateChatResponse hatası: fetch failed","service":"asistr-backend","stack":"TypeError: fetch failed\n    at node:internal/deps/undici/undici:12637:11\n    at async generateChatResponse (/app/src/rag/ollama.service.js:115:22)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-24 10:40:21"}
{"cause":{"code":"UND_ERR_HEADERS_TIMEOUT","message":"Headers Timeout Error","name":"HeadersTimeoutError"},"level":"error","message":"Ollama generateChatResponse hatası: fetch failed","service":"asistr-backend","stack":"TypeError: fetch failed\n    at node:internal/deps/undici/undici:12637:11\n    at async generateChatResponse (/app/src/rag/ollama.service.js:115:22)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-24 10:40:51"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-24 10:42:42"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-24 10:42:42"}
{"cause":{"code":"UND_ERR_HEADERS_TIMEOUT","message":"Headers Timeout Error","name":"HeadersTimeoutError"},"level":"error","message":"Ollama generateChatResponse hatası: fetch failed","service":"asistr-backend","stack":"TypeError: fetch failed\n    at node:internal/deps/undici/undici:12637:11\n    at async generateChatResponse (/app/src/rag/ollama.service.js:115:22)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:193:32)","timestamp":"2025-10-24 10:48:24"}
{"cause":{"code":"UND_ERR_HEADERS_TIMEOUT","message":"Headers Timeout Error","name":"HeadersTimeoutError"},"level":"error","message":"Ollama generateChatResponse hatası: fetch failed","service":"asistr-backend","stack":"TypeError: fetch failed\n    at node:internal/deps/undici/undici:12637:11\n    at async generateChatResponse (/app/src/rag/ollama.service.js:115:22)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-24 10:50:56"}
{"cause":{"code":"UND_ERR_HEADERS_TIMEOUT","message":"Headers Timeout Error","name":"HeadersTimeoutError"},"level":"error","message":"Ollama generateChatResponse hatası: fetch failed","service":"asistr-backend","stack":"TypeError: fetch failed\n    at node:internal/deps/undici/undici:12637:11\n    at async generateChatResponse (/app/src/rag/ollama.service.js:115:22)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-24 10:51:23"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-24 10:51:31"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-24 10:51:31"}
{"cause":{"code":"UND_ERR_HEADERS_TIMEOUT","message":"Headers Timeout Error","name":"HeadersTimeoutError"},"level":"error","message":"Ollama generateChatResponse hatası: fetch failed","service":"asistr-backend","stack":"TypeError: fetch failed\n    at node:internal/deps/undici/undici:12637:11\n    at async generateChatResponse (/app/src/rag/ollama.service.js:115:22)\n    at async generateRagResponse (/app/src/rag/rag.service.js:56:24)\n    at async suggestReply (/app/src/rag/rag.service.js:90:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-10-24 10:56:37"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-24 14:16:37"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-24 14:16:37"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-10-24 14:21:01"}
{"code":"42P10","file":"plancat.c","length":148,"level":"error","line":"880","message":"Agent connect hatası: there is no unique or exclusion constraint matching the ON CONFLICT specification","name":"error","routine":"infer_arbiter_indexes","service":"asistr-backend","severity":"ERROR","stack":"error: there is no unique or exclusion constraint matching the ON CONFLICT specification\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:126:7)","timestamp":"2025-10-24 14:21:01"}
{"level":"error","message":"CloseConversation hatası: Cannot read properties of undefined (reading 'to')","service":"asistr-backend","stack":"TypeError: Cannot read properties of undefined (reading 'to')\n    at closeConversation (/app/src/controllers/chat.controller.js:107:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-10-26 20:17:48"}
{"error":"column \"site_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT id, name, email, role, is_active, created_at FROM users WHERE site_id = $1","timestamp":"2025-10-26 20:25:49"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"listUsers hatası: column \"site_id\" does not exist","name":"error","position":"70","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"site_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async listUsers (/app/src/controllers/user.controller.js:10:20)","timestamp":"2025-10-26 20:25:49"}
{"level":"error","message":"AssignAgent hatası: Cannot read properties of undefined (reading 'to')","service":"asistr-backend","stack":"TypeError: Cannot read properties of undefined (reading 'to')\n    at assignAgent (/app/src/controllers/chat.controller.js:137:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-10-26 20:43:55"}
{"level":"error","message":"AssignAgent hatası: Cannot read properties of undefined (reading 'to')","service":"asistr-backend","stack":"TypeError: Cannot read properties of undefined (reading 'to')\n    at assignAgent (/app/src/controllers/chat.controller.js:137:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-10-26 20:43:57"}
{"level":"error","message":"AssignAgent hatası: Cannot read properties of undefined (reading 'to')","service":"asistr-backend","stack":"TypeError: Cannot read properties of undefined (reading 'to')\n    at assignAgent (/app/src/controllers/chat.controller.js:137:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-10-26 20:43:57"}
{"level":"error","message":"AssignAgent hatası: Cannot read properties of undefined (reading 'to')","service":"asistr-backend","stack":"TypeError: Cannot read properties of undefined (reading 'to')\n    at assignAgent (/app/src/controllers/chat.controller.js:137:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-10-26 20:43:59"}
{"level":"error","message":"AssignAgent hatası: Cannot read properties of undefined (reading 'to')","service":"asistr-backend","stack":"TypeError: Cannot read properties of undefined (reading 'to')\n    at assignAgent (/app/src/controllers/chat.controller.js:137:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-10-26 20:44:25"}
{"0":"t","1":"e","10":"e","11":"y","12":"-","13":"1","14":"2","15":"3","16":"4","17":"5","2":"s","3":"t","4":"-","5":"a","6":"p","7":"i","8":"-","9":"k","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-10-27 13:10:30"}
{"0":"t","1":"e","10":"e","11":"y","12":"-","13":"1","14":"2","15":"3","16":"4","17":"5","2":"s","3":"t","4":"-","5":"a","6":"p","7":"i","8":"-","9":"k","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-10-27 13:15:26"}
{"0":"t","1":"e","10":"e","11":"y","12":"-","13":"1","14":"2","15":"3","16":"4","17":"5","2":"s","3":"t","4":"-","5":"a","6":"p","7":"i","8":"-","9":"k","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-10-27 13:16:31"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 500","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 500\n    at generateEmbedding (/app/src/rag/ollama.service.js:66:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async addKnowledge (/app/src/rag/knowledge.service.js:16:23)\n    at async createKnowledge (/app/src/controllers/rag.controller.js:23:20)","timestamp":"2025-10-27 13:27:28"}
{"error":"extension \"vector\" is not available","level":"error","message":"Query hatası:","service":"asistr-backend","text":"CREATE EXTENSION IF NOT EXISTS vector","timestamp":"2025-11-01 12:04:25"}
{"error":"extension \"vector\" is not available","level":"error","message":"Query hatası:","service":"asistr-backend","text":"CREATE EXTENSION IF NOT EXISTS vector","timestamp":"2025-11-01 12:11:32"}
{"error":"extension \"vector\" is not available","level":"error","message":"Query hatası:","service":"asistr-backend","text":"CREATE EXTENSION IF NOT EXISTS vector","timestamp":"2025-11-01 12:30:09"}
{"error":"column \"embedding\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"CREATE INDEX IF NOT EXISTS idx_knowledge_embedding ON knowledge_base USING ivfflat (embedding vector_cosine_ops) WITH (lists = 100)","timestamp":"2025-11-01 12:30:44"}
{"error":"invalid input syntax for type uuid: \"01a9285e-eb1e-4308-8148-58007bfce0b\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT \n         id, \n         title, \n         content, \n         metadata,\n         1 - (embedding <=> $1::vector) as similarity\n       FROM knowledge_base\n       WHERE site_id = $2 \n       AND is_active = true\n       AND embedding IS NOT NULL\n       ORDER BY embedding <=> $1::vector\n       LIMIT $3","timestamp":"2025-11-01 13:00:01"}
{"code":"22P02","file":"uuid.c","length":167,"level":"error","line":"133","message":"SearchKnowledge hatası: invalid input syntax for type uuid: \"01a9285e-eb1e-4308-8148-58007bfce0b\"","name":"error","routine":"string_to_uuid","service":"asistr-backend","severity":"ERROR","stack":"error: invalid input syntax for type uuid: \"01a9285e-eb1e-4308-8148-58007bfce0b\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:100:20)\n    at async testSearch (/app/test-search.js:18:21)","timestamp":"2025-11-01 13:00:01","where":"unnamed portal parameter $2 = '...'"}
{"error":"invalid input syntax for type uuid: \"01a9285e-eb1e-4308-8148-58007bfce0b\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT id, title, content, metadata,\n        CASE \n          WHEN title ILIKE $3 THEN 10\n          WHEN content ILIKE $3 THEN 5\n          ELSE 1\n        END as relevance_score\n      FROM knowledge_base\n      WHERE site_id = $1 \n        AND is_active = true\n        AND ((title ILIKE $3 OR content ILIKE $3) OR (title ILIKE $4 OR content ILIKE $4) OR (title ILIKE $5 OR content ILIKE $5))\n      ORDER BY relevance_score DESC, created_at DESC\n      LIMIT $2\n    ","timestamp":"2025-11-01 13:00:01"}
{"error":"insert or update on table \"messages\" violates foreign key constraint \"messages_conversation_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO messages (conversation_id, sender_type, sender_id, body, attachments, created_at)\n         VALUES ($1, $2, $3, $4, $5, NOW())\n         RETURNING *","timestamp":"2025-11-02 12:58:16"}
{"code":"23503","constraint":"messages_conversation_id_fkey","detail":"Key (conversation_id)=(0715f17c-6c55-4268-95e9-76c7f27e03e5) is not present in table \"conversations\".","file":"ri_triggers.c","length":321,"level":"error","line":"2596","message":"Message send hatası: insert or update on table \"messages\" violates foreign key constraint \"messages_conversation_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"messages\" violates foreign key constraint \"messages_conversation_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:228:22)","table":"messages","timestamp":"2025-11-02 12:58:16"}
{"cause":{"code":"UND_ERR_HEADERS_TIMEOUT","message":"Headers Timeout Error","name":"HeadersTimeoutError"},"level":"error","message":"Ollama generateChatResponse hatası: fetch failed","service":"asistr-backend","stack":"TypeError: fetch failed\n    at node:internal/deps/undici/undici:12637:11\n    at async generateChatResponseSync (/app/src/rag/ollama.service.js:208:22)\n    at async generateRagResponse (/app/src/rag/rag.service.js:101:24)\n    at async suggestReply (/app/src/rag/rag.service.js:135:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-11-02 16:32:10"}
{"address":"172.18.0.4","code":"ECONNREFUSED","errno":-111,"level":"error","message":"Database bağlantı hatası: connect ECONNREFUSED 172.18.0.4:5432","port":5432,"service":"asistr-backend","stack":"Error: connect ECONNREFUSED 172.18.0.4:5432\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async connectDatabase (/app/src/utils/database.js:17:20)\n    at async startServer (/app/app.js:133:5)","syscall":"connect","timestamp":"2025-11-03 12:30:31"}
{"expiredAt":"2025-11-03T09:17:16.000Z","level":"error","message":"jwt expired","name":"TokenExpiredError","service":"asistr-backend","stack":"TokenExpiredError: jwt expired\n    at /app/node_modules/jsonwebtoken/verify.js:190:21\n    at getSecret (/app/node_modules/jsonwebtoken/verify.js:97:14)\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:101:10)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)","timestamp":"2025-11-03 12:55:01"}
{"0":"d","1":"e","10":"q","11":"f","12":"4","13":"t","14":"5","2":"m","3":"o","4":"_","5":"q","6":"x","7":"1","8":"4","9":"b","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-11-03 13:06:15"}
{"error":"column u.avatar does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        ap.*,\n        u.name as agent_name,\n        u.email as agent_email,\n        u.avatar as agent_avatar\n      FROM agents_presence ap\n      JOIN users u ON ap.agent_id = u.id\n      WHERE u.role IN ('admin', 'agent')\n     ORDER BY ap.status, u.name","timestamp":"2025-11-04 08:25:52"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"GetAllAgentsPresence error: column u.avatar does not exist","name":"error","position":"100","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.avatar does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAllAgentsPresence (/app/src/controllers/presence.controller.js:34:20)","timestamp":"2025-11-04 08:25:52"}
{"error":"column u.avatar does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        ap.*,\n        u.name as agent_name,\n        u.email as agent_email,\n        u.avatar as agent_avatar\n      FROM agents_presence ap\n      JOIN users u ON ap.agent_id = u.id\n      WHERE u.role IN ('admin', 'agent')\n     ORDER BY ap.status, u.name","timestamp":"2025-11-04 08:26:04"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"GetAllAgentsPresence error: column u.avatar does not exist","name":"error","position":"100","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.avatar does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAllAgentsPresence (/app/src/controllers/presence.controller.js:34:20)","timestamp":"2025-11-04 08:26:04"}
{"address":"172.18.0.4","code":"ECONNREFUSED","errno":-111,"level":"error","message":"Database bağlantı hatası: connect ECONNREFUSED 172.18.0.4:5432","port":5432,"service":"asistr-backend","stack":"Error: connect ECONNREFUSED 172.18.0.4:5432\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async connectDatabase (/app/src/utils/database.js:17:20)\n    at async startServer (/app/app.js:145:5)","syscall":"connect","timestamp":"2025-11-04 08:37:13"}
{"code":"42P01","file":"namespace.c","length":103,"level":"error","line":"433","message":"❌ Migration failed: relation \"sites\" does not exist","name":"error","routine":"RangeVarGetRelidExtended","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"sites\" does not exist\n    at /app/node_modules/pg/lib/client.js:545:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async migrate (/app/migrate-multi-agent.js:18:5)","timestamp":"2025-11-04 08:38:32"}
{"code":"42P01","file":"namespace.c","length":103,"level":"error","line":"433","message":"❌ Migration failed: relation \"sites\" does not exist","name":"error","routine":"RangeVarGetRelidExtended","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"sites\" does not exist\n    at /app/node_modules/pg/lib/client.js:545:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async migrate (/app/migrate-multi-agent.js:18:5)","timestamp":"2025-11-04 08:39:02"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-04 08:41:40"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-04 08:41:57"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-04 08:43:20"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-04 08:43:34"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 08:44:57"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 08:44:57"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 08:45:02"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 08:45:02"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 08:45:04"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 08:45:04"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 08:45:09"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 08:45:09"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 08:46:18"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 08:46:18"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 08:46:44"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 08:46:44"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 08:46:49"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 08:46:49"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 08:50:30"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 08:50:30"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 08:50:51"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 08:50:51"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 08:50:55"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 08:50:55"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 08:50:58"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 08:50:58"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 08:54:44"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 08:54:44"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 08:54:50"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 08:54:50"}
{"error":"column u.avatar_url does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.avatar_url,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-04 08:54:51"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetAgents error: column u.avatar_url does not exist","name":"error","position":"87","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.avatar_url does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:45:20)","timestamp":"2025-11-04 08:54:51"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 08:55:04"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 08:55:04"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 08:55:06"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 08:55:06"}
{"error":"column u.avatar_url does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.avatar_url,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-04 08:55:07"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetAgents error: column u.avatar_url does not exist","name":"error","position":"87","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.avatar_url does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:45:20)","timestamp":"2025-11-04 08:55:07"}
{"error":"column u.avatar_url does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.avatar_url,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-04 08:55:21"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetAgents error: column u.avatar_url does not exist","name":"error","position":"87","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.avatar_url does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:45:20)","timestamp":"2025-11-04 08:55:21"}
{"error":"column u.avatar_url does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.avatar_url,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-04 08:55:35"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetAgents error: column u.avatar_url does not exist","name":"error","position":"87","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.avatar_url does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:45:20)","timestamp":"2025-11-04 08:55:35"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 08:57:06"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 08:57:06"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 08:57:20"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 08:57:20"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 08:57:24"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 08:57:24"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 08:57:50"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 08:57:50"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 08:58:25"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 08:58:25"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 08:58:48"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 08:58:48"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 08:58:50"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 08:58:50"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 09:01:56"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 09:01:56"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 09:03:13"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 09:03:13"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 09:03:18"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 09:03:18"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 09:04:19"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 09:04:19"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 09:04:50"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 09:04:50"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 09:04:53"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 09:04:53"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:338:28)","timestamp":"2025-11-04 09:05:40"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 09:05:57"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 09:05:57"}
{"error":"column m.is_read does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT \n        m.id,\n        m.sender_type,\n        m.body,\n        m.attachments,\n        m.is_read,\n        m.created_at\n       FROM messages m\n       WHERE m.conversation_id = $1\n       ORDER BY m.created_at ASC\n       LIMIT $2 OFFSET $3","timestamp":"2025-11-04 09:05:57"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"GetMessages hatası: column m.is_read does not exist","name":"error","position":"93","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column m.is_read does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getMessages (/app/src/controllers/chat.controller.js:72:20)","timestamp":"2025-11-04 09:05:57"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 09:08:58"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 09:08:58"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 09:17:20"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 09:17:20"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 09:17:27"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 09:17:27"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 10:32:06"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 10:32:06"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 10:32:19"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 10:32:19"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 10:32:55"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 10:32:55"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 10:33:56"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 10:33:56"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 10:34:43"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 10:34:43"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 10:38:03"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 10:38:03"}
{"address":"172.18.0.3","code":"ECONNREFUSED","errno":-111,"level":"error","message":"Database bağlantı hatası: connect ECONNREFUSED 172.18.0.3:5432","port":5432,"service":"asistr-backend","stack":"Error: connect ECONNREFUSED 172.18.0.3:5432\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async connectDatabase (/app/src/utils/database.js:17:20)\n    at async startServer (/app/app.js:145:5)","syscall":"connect","timestamp":"2025-11-04 10:49:21"}
{"error":"relation \"users\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM users WHERE email = $1 AND is_active = true","timestamp":"2025-11-04 10:50:03"}
{"code":"42P01","file":"parse_relation.c","length":104,"level":"error","line":"1392","message":"Login hatası: relation \"users\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"users\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async login (/app/src/controllers/auth.controller.js:80:20)","timestamp":"2025-11-04 10:50:03"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 10:51:56"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 10:51:56"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 10:52:03"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 10:52:03"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 10:52:05"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 10:52:05"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 10:52:07"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 10:52:07"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 10:52:12"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 10:52:12"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/app/node_modules/express/lib/router/index.js:175:3)\n    at router (/app/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)","timestamp":"2025-11-04 11:03:03"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 11:06:08"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 11:06:08"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 11:06:11"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 11:06:11"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 11:06:51"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 11:06:51"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 11:06:54"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 11:06:54"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 11:07:09"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 11:07:09"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:338:28)","timestamp":"2025-11-04 11:11:13"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:338:28)","timestamp":"2025-11-04 11:11:13"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 11:11:22"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 11:11:22"}
{"error":"column m.is_read does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT \n        m.id,\n        m.sender_type,\n        m.body,\n        m.attachments,\n        m.is_read,\n        m.created_at\n       FROM messages m\n       WHERE m.conversation_id = $1\n       ORDER BY m.created_at ASC\n       LIMIT $2 OFFSET $3","timestamp":"2025-11-04 11:11:22"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"GetMessages hatası: column m.is_read does not exist","name":"error","position":"93","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column m.is_read does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getMessages (/app/src/controllers/chat.controller.js:72:20)","timestamp":"2025-11-04 11:11:22"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 11:11:49"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 11:11:49"}
{"error":"column m.is_read does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT \n        m.id,\n        m.sender_type,\n        m.body,\n        m.attachments,\n        m.is_read,\n        m.created_at\n       FROM messages m\n       WHERE m.conversation_id = $1\n       ORDER BY m.created_at ASC\n       LIMIT $2 OFFSET $3","timestamp":"2025-11-04 11:11:49"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"GetMessages hatası: column m.is_read does not exist","name":"error","position":"93","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column m.is_read does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getMessages (/app/src/controllers/chat.controller.js:72:20)","timestamp":"2025-11-04 11:11:49"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:338:28)","timestamp":"2025-11-04 11:20:37"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 11:22:17"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 11:22:17"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 11:22:20"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 11:22:20"}
{"error":"column m.is_read does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT \n        m.id,\n        m.sender_type,\n        m.body,\n        m.attachments,\n        m.is_read,\n        m.created_at\n       FROM messages m\n       WHERE m.conversation_id = $1\n       ORDER BY m.created_at ASC\n       LIMIT $2 OFFSET $3","timestamp":"2025-11-04 11:22:20"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"GetMessages hatası: column m.is_read does not exist","name":"error","position":"93","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column m.is_read does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getMessages (/app/src/controllers/chat.controller.js:72:20)","timestamp":"2025-11-04 11:22:20"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 11:22:33"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 11:22:33"}
{"error":"column m.is_read does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT \n        m.id,\n        m.sender_type,\n        m.body,\n        m.attachments,\n        m.is_read,\n        m.created_at\n       FROM messages m\n       WHERE m.conversation_id = $1\n       ORDER BY m.created_at ASC\n       LIMIT $2 OFFSET $3","timestamp":"2025-11-04 11:22:33"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"GetMessages hatası: column m.is_read does not exist","name":"error","position":"93","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column m.is_read does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getMessages (/app/src/controllers/chat.controller.js:72:20)","timestamp":"2025-11-04 11:22:33"}
{"error":"column m.is_read does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT \n        m.id,\n        m.sender_type,\n        m.body,\n        m.attachments,\n        m.is_read,\n        m.created_at\n       FROM messages m\n       WHERE m.conversation_id = $1\n       ORDER BY m.created_at ASC\n       LIMIT $2 OFFSET $3","timestamp":"2025-11-04 11:22:36"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"GetMessages hatası: column m.is_read does not exist","name":"error","position":"93","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column m.is_read does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getMessages (/app/src/controllers/chat.controller.js:72:20)","timestamp":"2025-11-04 11:22:36"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 11:22:36"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 11:22:36"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 11:23:14"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 11:23:14"}
{"error":"column m.is_read does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT \n        m.id,\n        m.sender_type,\n        m.body,\n        m.attachments,\n        m.is_read,\n        m.created_at\n       FROM messages m\n       WHERE m.conversation_id = $1\n       ORDER BY m.created_at ASC\n       LIMIT $2 OFFSET $3","timestamp":"2025-11-04 11:23:14"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"GetMessages hatası: column m.is_read does not exist","name":"error","position":"93","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column m.is_read does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getMessages (/app/src/controllers/chat.controller.js:72:20)","timestamp":"2025-11-04 11:23:14"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 11:23:17"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 11:23:17"}
{"error":"column m.is_read does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT \n        m.id,\n        m.sender_type,\n        m.body,\n        m.attachments,\n        m.is_read,\n        m.created_at\n       FROM messages m\n       WHERE m.conversation_id = $1\n       ORDER BY m.created_at ASC\n       LIMIT $2 OFFSET $3","timestamp":"2025-11-04 11:23:17"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"GetMessages hatası: column m.is_read does not exist","name":"error","position":"93","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column m.is_read does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getMessages (/app/src/controllers/chat.controller.js:72:20)","timestamp":"2025-11-04 11:23:17"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 11:24:51"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 11:24:51"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 11:25:55"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 11:25:55"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 11:25:57"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 11:25:57"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 11:26:00"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 11:26:00"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 11:26:02"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 11:26:02"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 11:26:03"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 11:26:03"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 11:26:05"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 11:26:05"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:338:28)","timestamp":"2025-11-04 11:26:38"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 11:26:54"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 11:26:54"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 11:55:39"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 11:55:39"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 11:55:40"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 11:55:40"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 11:55:42"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 11:55:42"}
{"error":"foreign key constraint \"voice_calls_conversation_id_fkey\" cannot be implemented","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      CREATE TABLE IF NOT EXISTS voice_calls (\n        id SERIAL PRIMARY KEY,\n        conversation_id INTEGER REFERENCES conversations(id) ON DELETE CASCADE,\n        visitor_id INTEGER REFERENCES visitors(id) ON DELETE CASCADE,\n        agent_id INTEGER REFERENCES users(id) ON DELETE SET NULL,\n        status VARCHAR(50) DEFAULT 'waiting', -- waiting, connecting, active, ended, failed, missed\n        start_time TIMESTAMP DEFAULT NOW(),\n        end_time TIMESTAMP,\n        duration INTEGER DEFAULT 0, -- saniye cinsinden\n        caller_type VARCHAR(20) DEFAULT 'visitor', -- visitor veya agent\n        disconnect_reason VARCHAR(100), -- user_hangup, agent_hangup, timeout, error\n        created_at TIMESTAMP DEFAULT NOW()\n      )\n    ","timestamp":"2025-11-04 11:57:14"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 11:59:05"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 11:59:05"}
{"error":"foreign key constraint \"voice_calls_conversation_id_fkey\" cannot be implemented","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      CREATE TABLE IF NOT EXISTS voice_calls (\n        id SERIAL PRIMARY KEY,\n        conversation_id INTEGER REFERENCES conversations(id) ON DELETE CASCADE,\n        visitor_id INTEGER REFERENCES visitors(id) ON DELETE CASCADE,\n        agent_id INTEGER REFERENCES users(id) ON DELETE SET NULL,\n        status VARCHAR(50) DEFAULT 'waiting', -- waiting, connecting, active, ended, failed, missed\n        start_time TIMESTAMP DEFAULT NOW(),\n        end_time TIMESTAMP,\n        duration INTEGER DEFAULT 0, -- saniye cinsinden\n        caller_type VARCHAR(20) DEFAULT 'visitor', -- visitor veya agent\n        disconnect_reason VARCHAR(100), -- user_hangup, agent_hangup, timeout, error\n        created_at TIMESTAMP DEFAULT NOW()\n      )\n    ","timestamp":"2025-11-04 12:03:11"}
{"error":"foreign key constraint \"voice_calls_visitor_id_fkey\" cannot be implemented","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      CREATE TABLE IF NOT EXISTS voice_calls (\n        id SERIAL PRIMARY KEY,\n        conversation_id UUID REFERENCES conversations(id) ON DELETE CASCADE,\n        visitor_id INTEGER REFERENCES visitors(id) ON DELETE CASCADE,\n        agent_id INTEGER REFERENCES users(id) ON DELETE SET NULL,\n        status VARCHAR(50) DEFAULT 'waiting', -- waiting, connecting, active, ended, failed, missed\n        start_time TIMESTAMP DEFAULT NOW(),\n        end_time TIMESTAMP,\n        duration INTEGER DEFAULT 0, -- saniye cinsinden\n        caller_type VARCHAR(20) DEFAULT 'visitor', -- visitor veya agent\n        disconnect_reason VARCHAR(100), -- user_hangup, agent_hangup, timeout, error\n        created_at TIMESTAMP DEFAULT NOW()\n      )\n    ","timestamp":"2025-11-04 12:04:11"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/app/node_modules/express/lib/router/index.js:175:3)","timestamp":"2025-11-04 12:07:47"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 12:08:13"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 12:08:13"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 12:08:14"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 12:08:14"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-04 12:10:08"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-04 12:10:08"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 12:10:10"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 12:10:10"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-04 12:10:15"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-04 12:10:15"}
{"level":"error","message":"TransferConversation error: Target agent not found","service":"asistr-backend","stack":"Error: Target agent not found\n    at transferConversation (/app/src/services/routing.service.js:259:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async assignAgent (/app/src/controllers/chat.controller.js:153:7)","timestamp":"2025-11-04 12:10:17"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 12:10:37"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 12:10:37"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 12:10:38"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 12:10:38"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 12:10:39"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 12:10:39"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 12:10:42"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 12:10:42"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 12:10:43"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 12:10:43"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 12:10:44"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 12:10:44"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-04 12:10:46"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(8014d31a-7801-4642-a7e8-b60b9fd78f0c) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-04 12:10:46"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 12:10:47"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 12:10:47"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-04 12:10:49"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-04 12:10:49"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-04 09:30:47"}
{"error":"relation \"users\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM users WHERE email = $1 AND is_active = true","timestamp":"2025-11-04 20:38:41"}
{"code":"42P01","file":"parse_relation.c","length":104,"level":"error","line":"1392","message":"Login hatası: relation \"users\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"users\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async login (/app/src/controllers/auth.controller.js:80:20)","timestamp":"2025-11-04 20:38:41"}
{"error":"relation \"users\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM users WHERE email = $1 AND is_active = true","timestamp":"2025-11-04 20:42:02"}
{"code":"42P01","file":"parse_relation.c","length":104,"level":"error","line":"1392","message":"Login hatası: relation \"users\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"users\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async login (/app/src/controllers/auth.controller.js:80:20)","timestamp":"2025-11-04 20:42:02"}
{"error":"relation \"users\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM users WHERE email = $1 AND is_active = true","timestamp":"2025-11-04 20:42:12"}
{"code":"42P01","file":"parse_relation.c","length":104,"level":"error","line":"1392","message":"Login hatası: relation \"users\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"users\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async login (/app/src/controllers/auth.controller.js:80:20)","timestamp":"2025-11-04 20:42:12"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-04 20:43:23"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-04 20:43:24"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-04 20:43:59"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-04 20:45:41"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-04 20:45:53"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-04 20:45:57"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-04 20:46:08"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-04 20:46:27"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-04 20:49:02"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-04 20:49:02"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-04 20:49:04"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:37:31)","timestamp":"2025-11-04 20:49:04"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-04 20:49:04"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetOnlineVisitors error: relation \"visitor_sessions\" does not exist","name":"error","position":"270","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:117:22)","timestamp":"2025-11-04 20:49:04"}
{"error":"relation \"page_views\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        page_url,\n        page_title,\n        COUNT(*) as views,\n        COUNT(DISTINCT visitor_id) as unique_visitors\n      FROM page_views\n      WHERE viewed_at >= $1 AND site_id = $3\n      GROUP BY page_url, page_title\n      ORDER BY views DESC\n      LIMIT $2\n    ","timestamp":"2025-11-04 20:49:04"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetTopPages error: relation \"page_views\" does not exist","name":"error","position":"146","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"page_views\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTopPages (/app/src/controllers/analytics.controller.js:185:20)","timestamp":"2025-11-04 20:49:04"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-04 20:49:04"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetTrafficSources error: relation \"visitor_sessions\" does not exist","name":"error","position":"409","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:219:20)","timestamp":"2025-11-04 20:49:04"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-04 20:49:04"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:258:26)","timestamp":"2025-11-04 20:49:04"}
{"error":"relation \"notification_preferences\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM notification_preferences WHERE user_id = $1","timestamp":"2025-11-04 20:49:06"}
{"code":"42P01","file":"parse_relation.c","length":123,"level":"error","line":"1392","message":"GetPreferences error: relation \"notification_preferences\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"notification_preferences\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:14:18)","timestamp":"2025-11-04 20:49:06"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-04 20:49:11"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetAgents error: relation \"departments\" does not exist","name":"error","position":"338","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:44:20)","timestamp":"2025-11-04 20:49:11"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-04 20:49:11"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-04 20:49:11"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-04 20:49:13"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-04 20:49:13"}
{"error":"relation \"widget_settings\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM widget_settings WHERE site_id = $1","timestamp":"2025-11-04 20:49:14"}
{"code":"42P01","file":"parse_relation.c","length":114,"level":"error","line":"1392","message":"GetWidgetSettings error: relation \"widget_settings\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"widget_settings\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getWidgetSettings (/app/src/controllers/widgetSettings.controller.js:18:18)","timestamp":"2025-11-04 20:49:14"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-04 20:50:06"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:577:9)","timestamp":"2025-11-04 20:50:06"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-04 20:50:09"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-04 20:50:09"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-04 20:50:11"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:37:31)","timestamp":"2025-11-04 20:50:11"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-04 20:50:11"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetOnlineVisitors error: relation \"visitor_sessions\" does not exist","name":"error","position":"270","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:117:22)","timestamp":"2025-11-04 20:50:11"}
{"error":"relation \"page_views\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        page_url,\n        page_title,\n        COUNT(*) as views,\n        COUNT(DISTINCT visitor_id) as unique_visitors\n      FROM page_views\n      WHERE viewed_at >= $1 AND site_id = $3\n      GROUP BY page_url, page_title\n      ORDER BY views DESC\n      LIMIT $2\n    ","timestamp":"2025-11-04 20:50:11"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetTopPages error: relation \"page_views\" does not exist","name":"error","position":"146","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"page_views\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTopPages (/app/src/controllers/analytics.controller.js:185:20)","timestamp":"2025-11-04 20:50:11"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-04 20:50:11"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetTrafficSources error: relation \"visitor_sessions\" does not exist","name":"error","position":"409","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:219:20)","timestamp":"2025-11-04 20:50:11"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-04 20:50:11"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:258:26)","timestamp":"2025-11-04 20:50:11"}
{"error":"relation \"notification_preferences\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM notification_preferences WHERE user_id = $1","timestamp":"2025-11-04 20:50:12"}
{"code":"42P01","file":"parse_relation.c","length":123,"level":"error","line":"1392","message":"GetPreferences error: relation \"notification_preferences\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"notification_preferences\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:14:18)","timestamp":"2025-11-04 20:50:12"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-04 20:50:14"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-04 20:50:14"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-04 20:50:14"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetAgents error: relation \"departments\" does not exist","name":"error","position":"338","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:44:20)","timestamp":"2025-11-04 20:50:14"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-04 20:50:15"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-04 20:50:15"}
{"error":"relation \"widget_settings\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM widget_settings WHERE site_id = $1","timestamp":"2025-11-04 20:50:17"}
{"code":"42P01","file":"parse_relation.c","length":114,"level":"error","line":"1392","message":"GetWidgetSettings error: relation \"widget_settings\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"widget_settings\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getWidgetSettings (/app/src/controllers/widgetSettings.controller.js:18:18)","timestamp":"2025-11-04 20:50:17"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-04 20:51:30"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:577:9)","timestamp":"2025-11-04 20:51:30"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-04 20:52:03"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-04 20:52:03"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-04 20:52:29"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-04 20:52:29"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-04 20:52:38"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:37:31)","timestamp":"2025-11-04 20:52:38"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-04 20:52:38"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetOnlineVisitors error: relation \"visitor_sessions\" does not exist","name":"error","position":"270","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:117:22)","timestamp":"2025-11-04 20:52:38"}
{"error":"relation \"page_views\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        page_url,\n        page_title,\n        COUNT(*) as views,\n        COUNT(DISTINCT visitor_id) as unique_visitors\n      FROM page_views\n      WHERE viewed_at >= $1 AND site_id = $3\n      GROUP BY page_url, page_title\n      ORDER BY views DESC\n      LIMIT $2\n    ","timestamp":"2025-11-04 20:52:38"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetTopPages error: relation \"page_views\" does not exist","name":"error","position":"146","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"page_views\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTopPages (/app/src/controllers/analytics.controller.js:185:20)","timestamp":"2025-11-04 20:52:38"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-04 20:52:38"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:258:26)","timestamp":"2025-11-04 20:52:38"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-04 20:52:38"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetTrafficSources error: relation \"visitor_sessions\" does not exist","name":"error","position":"409","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:219:20)","timestamp":"2025-11-04 20:52:38"}
{"error":"relation \"notification_preferences\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM notification_preferences WHERE user_id = $1","timestamp":"2025-11-04 20:52:46"}
{"code":"42P01","file":"parse_relation.c","length":123,"level":"error","line":"1392","message":"GetPreferences error: relation \"notification_preferences\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"notification_preferences\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:14:18)","timestamp":"2025-11-04 20:52:46"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-04 20:52:53"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetAgents error: relation \"departments\" does not exist","name":"error","position":"338","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:44:20)","timestamp":"2025-11-04 20:52:53"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-04 20:52:53"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-04 20:52:53"}
{"error":"relation \"widget_settings\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM widget_settings WHERE site_id = $1","timestamp":"2025-11-04 20:53:01"}
{"code":"42P01","file":"parse_relation.c","length":114,"level":"error","line":"1392","message":"GetWidgetSettings error: relation \"widget_settings\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"widget_settings\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getWidgetSettings (/app/src/controllers/widgetSettings.controller.js:18:18)","timestamp":"2025-11-04 20:53:01"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-04 20:53:08"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-04 20:53:08"}
{"error":"relation \"widget_settings\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM widget_settings WHERE site_id = $1","timestamp":"2025-11-04 20:53:15"}
{"code":"42P01","file":"parse_relation.c","length":114,"level":"error","line":"1392","message":"GetWidgetSettings error: relation \"widget_settings\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"widget_settings\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getWidgetSettings (/app/src/controllers/widgetSettings.controller.js:18:18)","timestamp":"2025-11-04 20:53:15"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-04 20:55:53"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:577:9)","timestamp":"2025-11-04 20:55:53"}
{"0":"9","1":"2","10":"5","11":"b","12":"2","13":"e","14":"2","15":"b","16":"5","17":"b","18":"b","19":"4","2":"6","20":"8","21":"1","22":"1","23":"1","24":"b","25":"5","26":"3","27":"d","28":"e","29":"a","3":"3","30":"2","31":"a","32":"4","33":"8","34":"c","35":"e","36":"2","37":"3","38":"b","39":"0","4":"7","40":"9","41":"2","42":"8","43":"c","44":"9","45":"a","46":"7","47":"3","48":"e","49":"3","5":"0","50":"9","51":"7","52":"7","53":"2","54":"b","55":"c","56":"6","57":"2","58":"b","59":"6","6":"6","60":"8","61":"d","62":"f","63":"c","7":"f","8":"4","9":"e","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-11-04 20:59:57"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'visitor_disconnect'\n           WHERE visitor_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-04 21:03:48"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:593:9)","timestamp":"2025-11-04 21:03:48"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/app/app.js:83:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-04 21:04:59"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/app/app.js:83:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-04 21:05:54"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/app/app.js:83:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-04 21:06:06"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'visitor_disconnect'\n           WHERE visitor_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-04 21:06:18"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:593:9)","timestamp":"2025-11-04 21:06:18"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO voice_calls (conversation_id, visitor_id, status, caller_type)\n       VALUES ($1, $2, 'waiting', 'visitor')\n       RETURNING id","timestamp":"2025-11-04 21:09:22"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"InitiateCall hatası: relation \"voice_calls\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async initiateCall (/app/src/controllers/voiceCall.controller.js:34:24)","timestamp":"2025-11-04 21:09:22"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-04 21:13:21"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:577:9)","timestamp":"2025-11-04 21:13:21"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'visitor_disconnect'\n           WHERE visitor_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-04 21:13:59"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:593:9)","timestamp":"2025-11-04 21:13:59"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-04 21:17:02"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:577:9)","timestamp":"2025-11-04 21:17:02"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'visitor_disconnect'\n           WHERE visitor_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-04 21:17:06"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:593:9)","timestamp":"2025-11-04 21:17:06"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO voice_calls (conversation_id, visitor_id, status, caller_type)\n       VALUES ($1, $2, 'waiting', 'visitor')\n       RETURNING id","timestamp":"2025-11-04 21:18:24"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"InitiateCall hatası: relation \"voice_calls\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async initiateCall (/app/src/controllers/voiceCall.controller.js:34:24)","timestamp":"2025-11-04 21:18:24"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-04 21:23:00"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:577:9)","timestamp":"2025-11-04 21:23:00"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'visitor_disconnect'\n           WHERE visitor_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-04 21:23:03"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:593:9)","timestamp":"2025-11-04 21:23:03"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-07 13:06:37"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-07 13:22:19"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-07 13:23:08"}
{"error":"column \"password_hash\" of relation \"users\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO users (name, email, password_hash, role)\n       VALUES ($1, $2, $3, $4)\n       ON CONFLICT (email) DO NOTHING\n       RETURNING id","timestamp":"2025-11-07 13:24:02"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-07 13:24:36"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-07 13:24:39"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-07 13:24:58"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-07 13:25:02"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-07 13:25:21"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 13:26:08"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 13:26:08"}
{"error":"relation \"agents_presence\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-07 13:26:11"}
{"code":"42P01","file":"parse_relation.c","length":114,"level":"error","line":"1392","message":"Agent connect hatası: relation \"agents_presence\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"agents_presence\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","timestamp":"2025-11-07 13:26:11"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-07 13:26:12"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-07 13:26:12"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 13:26:13"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 13:26:13"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $1 \n    ","timestamp":"2025-11-07 13:26:14"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:37:31)","timestamp":"2025-11-07 13:26:14"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 \n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-07 13:26:14"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:258:26)","timestamp":"2025-11-07 13:26:14"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 \n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-07 13:26:14"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetTrafficSources error: relation \"visitor_sessions\" does not exist","name":"error","position":"409","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:219:20)","timestamp":"2025-11-07 13:26:14"}
{"error":"relation \"page_views\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        page_url,\n        page_title,\n        COUNT(*) as views,\n        COUNT(DISTINCT visitor_id) as unique_visitors\n      FROM page_views\n      WHERE viewed_at >= $1 \n      GROUP BY page_url, page_title\n      ORDER BY views DESC\n      LIMIT $2\n    ","timestamp":"2025-11-07 13:26:14"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetTopPages error: relation \"page_views\" does not exist","name":"error","position":"146","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"page_views\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTopPages (/app/src/controllers/analytics.controller.js:185:20)","timestamp":"2025-11-07 13:26:14"}
{"error":"relation \"notification_preferences\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM notification_preferences WHERE user_id = $1","timestamp":"2025-11-07 13:26:15"}
{"code":"42P01","file":"parse_relation.c","length":123,"level":"error","line":"1392","message":"GetPreferences error: relation \"notification_preferences\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"notification_preferences\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:14:18)","timestamp":"2025-11-07 13:26:15"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-07 13:26:16"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetAgents error: relation \"departments\" does not exist","name":"error","position":"338","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:44:20)","timestamp":"2025-11-07 13:26:16"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-07 13:26:16"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-07 13:26:16"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-07 13:26:17"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-07 13:26:17"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 13:26:18"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 13:26:18"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 13:26:24"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 13:26:24"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 13:26:30"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 13:26:30"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 13:26:31"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 13:26:31"}
{"error":"relation \"agents_presence\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE agents_presence \n           SET status = 'offline', last_seen = NOW()\n           WHERE socket_id = $1","timestamp":"2025-11-07 13:27:02"}
{"code":"42P01","file":"parse_relation.c","length":113,"level":"error","line":"1392","message":"Disconnect hatası: relation \"agents_presence\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"agents_presence\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:569:9)","timestamp":"2025-11-07 13:27:02"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 13:27:02"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 13:27:02"}
{"error":"relation \"agents_presence\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-07 13:27:04"}
{"code":"42P01","file":"parse_relation.c","length":114,"level":"error","line":"1392","message":"Agent connect hatası: relation \"agents_presence\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"agents_presence\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","timestamp":"2025-11-07 13:27:04"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-07 13:27:04"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-07 13:27:04"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 13:27:05"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 13:27:05"}
{"error":"relation \"page_views\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        page_url,\n        page_title,\n        COUNT(*) as views,\n        COUNT(DISTINCT visitor_id) as unique_visitors\n      FROM page_views\n      WHERE viewed_at >= $1 \n      GROUP BY page_url, page_title\n      ORDER BY views DESC\n      LIMIT $2\n    ","timestamp":"2025-11-07 13:27:05"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetTopPages error: relation \"page_views\" does not exist","name":"error","position":"146","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"page_views\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTopPages (/app/src/controllers/analytics.controller.js:185:20)","timestamp":"2025-11-07 13:27:05"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 \n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-07 13:27:05"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetTrafficSources error: relation \"visitor_sessions\" does not exist","name":"error","position":"409","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:219:20)","timestamp":"2025-11-07 13:27:05"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $1 \n    ","timestamp":"2025-11-07 13:27:05"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:37:31)","timestamp":"2025-11-07 13:27:05"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 \n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-07 13:27:05"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:258:26)","timestamp":"2025-11-07 13:27:05"}
{"error":"relation \"notification_preferences\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM notification_preferences WHERE user_id = $1","timestamp":"2025-11-07 13:27:06"}
{"code":"42P01","file":"parse_relation.c","length":123,"level":"error","line":"1392","message":"GetPreferences error: relation \"notification_preferences\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"notification_preferences\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:14:18)","timestamp":"2025-11-07 13:27:06"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-07 13:27:06"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-07 13:27:06"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-07 13:27:06"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetAgents error: relation \"departments\" does not exist","name":"error","position":"338","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:44:20)","timestamp":"2025-11-07 13:27:06"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-07 13:27:07"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-07 13:27:07"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 13:27:08"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 13:27:08"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 13:27:09"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 13:27:09"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 13:27:10"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 13:27:10"}
{"error":"relation \"agents_presence\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE agents_presence \n           SET status = 'offline', last_seen = NOW()\n           WHERE socket_id = $1","timestamp":"2025-11-07 13:28:07"}
{"code":"42P01","file":"parse_relation.c","length":113,"level":"error","line":"1392","message":"Disconnect hatası: relation \"agents_presence\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"agents_presence\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:569:9)","timestamp":"2025-11-07 13:28:07"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 13:28:07"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 13:28:07"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 13:29:03"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 13:29:03"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 15:39:56"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 15:39:56"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 15:53:51"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 15:53:51"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-07 15:54:07"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-07 15:54:07"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 15:54:08"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 15:54:08"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-07 15:54:09"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-07 15:54:09"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 15:54:12"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 15:54:12"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 15:54:14"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 15:54:14"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 15:54:15"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 15:54:15"}
{"error":"column \"owner_id\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM sites WHERE owner_id = $1 ORDER BY created_at DESC","timestamp":"2025-11-07 15:54:23"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetSites hatası: column \"owner_id\" does not exist","name":"error","position":"27","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getSites (/app/src/controllers/widget.controller.js:74:20)","timestamp":"2025-11-07 15:54:23"}
{"0":"d","1":"e","10":"8","11":"y","12":"f","13":"p","14":"f","15":"k","2":"m","3":"o","4":"_","5":"a","6":"r","7":"l","8":"b","9":"q","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-11-07 15:55:47"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-07 15:57:34"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-07 15:57:34"}
{"0":"d","1":"e","10":"8","11":"y","12":"f","13":"p","14":"f","15":"k","2":"m","3":"o","4":"_","5":"a","6":"r","7":"l","8":"b","9":"q","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-11-07 15:57:36"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-07 16:00:14"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-07 16:00:14"}
{"0":"d","1":"e","10":"8","11":"y","12":"f","13":"p","14":"f","15":"k","2":"m","3":"o","4":"_","5":"a","6":"r","7":"l","8":"b","9":"q","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-11-07 16:04:17"}
{"0":"d","1":"e","10":"8","11":"y","12":"f","13":"p","14":"f","15":"k","2":"m","3":"o","4":"_","5":"a","6":"r","7":"l","8":"b","9":"q","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-11-07 16:08:04"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-07 16:09:58"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-07 16:09:58"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-07 16:09:59"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-07 16:09:59"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/app/app.js:84:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-07 16:10:06"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/app/app.js:84:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-07 16:10:10"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-07 16:10:19"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-07 16:10:19"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-07 16:10:26"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-07 16:10:26"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/app/app.js:84:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-07 16:10:32"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/app/app.js:84:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-07 16:10:57"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/app/app.js:84:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-07 16:11:01"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/app/app.js:84:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-07 16:11:30"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-07 16:14:57"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-07 16:14:57"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-07 16:14:58"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-07 16:14:58"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-07 16:24:15"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-07 16:24:15"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-07 16:31:27"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-07 16:31:27"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-07 16:31:39"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-07 16:31:39"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-07 16:34:31"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-07 16:34:31"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-07 16:34:31"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-07 16:34:31"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-07 16:34:43"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(7f599b84-f481-496d-8976-48e10bd5f2c3) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatası: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:223:7)","table":"conversations","timestamp":"2025-11-07 16:34:43"}
{"level":"error","message":"invalid signature","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: invalid signature\n    at /home/razer/Desktop/AsistTR/backend/node_modules/jsonwebtoken/verify.js:171:19\n    at getSecret (/home/razer/Desktop/AsistTR/backend/node_modules/jsonwebtoken/verify.js:97:14)\n    at module.exports [as verify] (/home/razer/Desktop/AsistTR/backend/node_modules/jsonwebtoken/verify.js:101:10)\n    at authMiddleware (/home/razer/Desktop/AsistTR/backend/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:346:12)","timestamp":"2025-11-07 19:49:52"}
{"error":"column \"last_activity_at\" of relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE visitor_sessions \n         SET page_views = page_views + 1, last_activity_at = NOW()\n         WHERE id = $1","timestamp":"2025-11-07 20:13:27"}
{"code":"42703","file":"analyze.c","length":147,"level":"error","line":"2515","message":"TrackPageView error: column \"last_activity_at\" of relation \"visitor_sessions\" does not exist","name":"error","position":"68","routine":"transformUpdateTargetList","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_activity_at\" of relation \"visitor_sessions\" does not exist\n    at /home/razer/Desktop/AsistTR/backend/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/home/razer/Desktop/AsistTR/backend/src/utils/database.js:32:20)\n    at async trackPageView (/home/razer/Desktop/AsistTR/backend/src/controllers/analytics.controller.js:78:7)","timestamp":"2025-11-07 20:13:27"}
{"error":"column \"feedback\" of relation \"conversations\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE conversations \n       SET rating = $1, feedback = $2\n       WHERE id = $3\n       RETURNING site_id, agent_id","timestamp":"2025-11-08 16:10:24"}
{"code":"42703","file":"analyze.c","length":136,"level":"error","line":"2515","message":"RateConversation hatası: column \"feedback\" of relation \"conversations\" does not exist","name":"error","position":"47","routine":"transformUpdateTargetList","service":"asistr-backend","severity":"ERROR","stack":"error: column \"feedback\" of relation \"conversations\" does not exist\n    at /home/razer/Desktop/AsistTR/backend/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/home/razer/Desktop/AsistTR/backend/src/utils/database.js:32:20)\n    at async rateConversation (/home/razer/Desktop/AsistTR/backend/src/controllers/chat.controller.js:226:20)","timestamp":"2025-11-08 16:10:24"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/home/razer/Desktop/AsistTR/backend/app.js:84:16)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/razer/Desktop/AsistTR/backend/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-08 16:29:49"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/home/razer/Desktop/AsistTR/backend/app.js:84:16)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/razer/Desktop/AsistTR/backend/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-08 16:35:57"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/home/razer/Desktop/AsistTR/backend/app.js:84:16)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/razer/Desktop/AsistTR/backend/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-08 16:36:59"}
{"error":"column \"password_hash\" of relation \"users\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO users (name, email, password_hash, role)\n       VALUES ($1, $2, $3, $4)\n       ON CONFLICT (email) DO NOTHING\n       RETURNING id","timestamp":"2025-11-08 16:37:05"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/home/razer/Desktop/AsistTR/backend/app.js:84:16)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/razer/Desktop/AsistTR/backend/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-08 16:37:19"}
{"error":"null value in column \"password\" of relation \"users\" violates not-null constraint","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO users (name, email, password_hash, role)\n       VALUES ($1, $2, $3, $4)\n       ON CONFLICT (email) DO NOTHING\n       RETURNING id","timestamp":"2025-11-08 16:37:38"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/home/razer/Desktop/AsistTR/backend/app.js:84:16)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/razer/Desktop/AsistTR/backend/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-08 16:38:18"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/home/razer/Desktop/AsistTR/backend/app.js:84:16)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/razer/Desktop/AsistTR/backend/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-08 16:38:22"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/home/razer/Desktop/AsistTR/backend/app.js:84:16)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/razer/Desktop/AsistTR/backend/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-08 16:39:14"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/home/razer/Desktop/AsistTR/backend/app.js:84:16)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/razer/Desktop/AsistTR/backend/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-08 16:39:17"}
{"level":"error","message":"Login hatası: Illegal arguments: string, object","service":"asistr-backend","stack":"Error: Illegal arguments: string, object\n    at _async (/home/razer/Desktop/AsistTR/backend/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/home/razer/Desktop/AsistTR/backend/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/home/razer/Desktop/AsistTR/backend/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-08 16:39:21"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/home/razer/Desktop/AsistTR/backend/app.js:84:16)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/razer/Desktop/AsistTR/backend/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-08 16:40:43"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/home/razer/Desktop/AsistTR/backend/app.js:84:16)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/razer/Desktop/AsistTR/backend/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-08 16:40:48"}
{"error":"column \"owner_id\" of relation \"sites\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO sites (owner_id, name, domain, settings, api_key)\n       VALUES ($1, $2, $3, $4, $5)\n       RETURNING *","timestamp":"2025-11-08 16:42:02"}
{"code":"42703","file":"parse_target.c","length":126,"level":"error","line":"1075","message":"CreateSite hatası: column \"owner_id\" of relation \"sites\" does not exist","name":"error","position":"20","routine":"checkInsertTargets","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" of relation \"sites\" does not exist\n    at /home/razer/Desktop/AsistTR/backend/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/home/razer/Desktop/AsistTR/backend/src/utils/database.js:32:20)\n    at async createSite (/home/razer/Desktop/AsistTR/backend/src/controllers/widget.controller.js:51:20)","timestamp":"2025-11-08 16:42:02"}
{"error":"column \"owner_id\" of relation \"sites\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO sites (owner_id, name, domain, settings, api_key)\n       VALUES ($1, $2, $3, $4, $5)\n       RETURNING *","timestamp":"2025-11-08 16:42:49"}
{"code":"42703","file":"parse_target.c","length":126,"level":"error","line":"1075","message":"CreateSite hatası: column \"owner_id\" of relation \"sites\" does not exist","name":"error","position":"20","routine":"checkInsertTargets","service":"asistr-backend","severity":"ERROR","stack":"error: column \"owner_id\" of relation \"sites\" does not exist\n    at /home/razer/Desktop/AsistTR/backend/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/home/razer/Desktop/AsistTR/backend/src/utils/database.js:32:20)\n    at async createSite (/home/razer/Desktop/AsistTR/backend/src/controllers/widget.controller.js:51:20)","timestamp":"2025-11-08 16:42:49"}
{"error":"column \"settings\" of relation \"sites\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO sites (owner_id, name, domain, settings, api_key)\n       VALUES ($1, $2, $3, $4, $5)\n       RETURNING *","timestamp":"2025-11-08 16:43:40"}
{"code":"42703","file":"parse_target.c","length":126,"level":"error","line":"1075","message":"CreateSite hatası: column \"settings\" of relation \"sites\" does not exist","name":"error","position":"44","routine":"checkInsertTargets","service":"asistr-backend","severity":"ERROR","stack":"error: column \"settings\" of relation \"sites\" does not exist\n    at /home/razer/Desktop/AsistTR/backend/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/home/razer/Desktop/AsistTR/backend/src/utils/database.js:32:20)\n    at async createSite (/home/razer/Desktop/AsistTR/backend/src/controllers/widget.controller.js:51:20)","timestamp":"2025-11-08 16:43:40"}
{"error":"Client was passed a null or undefined query","level":"error","message":"Query hatası:","service":"asistr-backend","timestamp":"2025-11-08 16:44:13"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/home/razer/Desktop/AsistTR/backend/app.js:84:16)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/razer/Desktop/AsistTR/backend/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-08 16:44:47"}
{"error":"syntax error at or near \"{\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"ALTER TABLE sites ADD COLUMN IF NOT EXISTS settings JSONB DEFAULT {}::jsonb","timestamp":"2025-11-08 16:44:51"}
{"error":"column \"settings\" of relation \"sites\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO sites (owner_id, name, domain, settings, api_key)\n       VALUES ($1, $2, $3, $4, $5)\n       RETURNING *","timestamp":"2025-11-08 16:45:50"}
{"code":"42703","file":"parse_target.c","length":126,"level":"error","line":"1075","message":"CreateSite hatası: column \"settings\" of relation \"sites\" does not exist","name":"error","position":"44","routine":"checkInsertTargets","service":"asistr-backend","severity":"ERROR","stack":"error: column \"settings\" of relation \"sites\" does not exist\n    at /home/razer/Desktop/AsistTR/backend/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/home/razer/Desktop/AsistTR/backend/src/utils/database.js:32:20)\n    at async createSite (/home/razer/Desktop/AsistTR/backend/src/controllers/widget.controller.js:51:20)","timestamp":"2025-11-08 16:45:50"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/home/razer/Desktop/AsistTR/backend/app.js:84:16)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/razer/Desktop/AsistTR/backend/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-08 16:46:46"}
{"error":"column \"sites\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT column_name FROM information_schema.columns WHERE table_name=sites ORDER BY column_name","timestamp":"2025-11-08 16:46:49"}
{"level":"error","message":"Hata: CORS policy tarafından izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafından izin verilmedi\n    at origin (/home/razer/Desktop/AsistTR/backend/app.js:84:16)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/razer/Desktop/AsistTR/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/razer/Desktop/AsistTR/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/razer/Desktop/AsistTR/backend/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-08 16:46:50"}
{"error":"SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string","level":"error","message":"Query hatası:","service":"asistr-backend","text":"CREATE EXTENSION IF NOT EXISTS pgcrypto","timestamp":"2025-11-09 08:37:46"}
{"error":"SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string","level":"error","message":"Query hatası:","service":"asistr-backend","text":"CREATE EXTENSION IF NOT EXISTS pgcrypto","timestamp":"2025-11-09 08:38:09"}
{"error":"SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string","level":"error","message":"Query hatası:","service":"asistr-backend","text":"CREATE EXTENSION IF NOT EXISTS pgcrypto","timestamp":"2025-11-09 08:39:19"}
{"0":"9","1":"2","10":"5","11":"b","12":"2","13":"e","14":"2","15":"b","16":"5","17":"b","18":"b","19":"4","2":"6","20":"8","21":"1","22":"1","23":"1","24":"b","25":"5","26":"3","27":"d","28":"e","29":"a","3":"3","30":"2","31":"a","32":"4","33":"8","34":"c","35":"e","36":"2","37":"3","38":"b","39":"0","4":"7","40":"9","41":"2","42":"8","43":"c","44":"9","45":"a","46":"7","47":"3","48":"e","49":"3","5":"0","50":"9","51":"7","52":"7","53":"2","54":"b","55":"c","56":"6","57":"2","58":"b","59":"6","6":"6","60":"8","61":"d","62":"f","63":"c","7":"f","8":"4","9":"e","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-11-09 08:54:15"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-09 08:55:12"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:577:9)","timestamp":"2025-11-09 08:55:12"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at authMiddleware (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\middleware\\auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at router.process_params (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at router.handle (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\express\\lib\\router\\index.js:175:3)","timestamp":"2025-11-09 08:56:15"}
{"0":"9","1":"2","10":"5","11":"b","12":"2","13":"e","14":"2","15":"b","16":"5","17":"b","18":"b","19":"4","2":"6","20":"8","21":"1","22":"1","23":"1","24":"b","25":"5","26":"3","27":"d","28":"e","29":"a","3":"3","30":"2","31":"a","32":"4","33":"8","34":"c","35":"e","36":"2","37":"3","38":"b","39":"0","4":"7","40":"9","41":"2","42":"8","43":"c","44":"9","45":"a","46":"7","47":"3","48":"e","49":"3","5":"0","50":"9","51":"7","52":"7","53":"2","54":"b","55":"c","56":"6","57":"2","58":"b","59":"6","6":"6","60":"8","61":"d","62":"f","63":"c","7":"f","8":"4","9":"e","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-11-09 08:59:47"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:32:17"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:32:17"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:32:17"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:32:17"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:32:24"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:32:24"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:32:24"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:32:24"}
{"0":"9","1":"2","10":"5","11":"b","12":"2","13":"e","14":"2","15":"b","16":"5","17":"b","18":"b","19":"4","2":"6","20":"8","21":"1","22":"1","23":"1","24":"b","25":"5","26":"3","27":"d","28":"e","29":"a","3":"3","30":"2","31":"a","32":"4","33":"8","34":"c","35":"e","36":"2","37":"3","38":"b","39":"0","4":"7","40":"9","41":"2","42":"8","43":"c","44":"9","45":"a","46":"7","47":"3","48":"e","49":"3","5":"0","50":"9","51":"7","52":"7","53":"2","54":"b","55":"c","56":"6","57":"2","58":"b","59":"6","6":"6","60":"8","61":"d","62":"f","63":"c","7":"f","8":"4","9":"e","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-11-09 12:32:41"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:33:35"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:33:35"}
{"0":"9","1":"2","10":"5","11":"b","12":"2","13":"e","14":"2","15":"b","16":"5","17":"b","18":"b","19":"4","2":"6","20":"8","21":"1","22":"1","23":"1","24":"b","25":"5","26":"3","27":"d","28":"e","29":"a","3":"3","30":"2","31":"a","32":"4","33":"8","34":"c","35":"e","36":"2","37":"3","38":"b","39":"0","4":"7","40":"9","41":"2","42":"8","43":"c","44":"9","45":"a","46":"7","47":"3","48":"e","49":"3","5":"0","50":"9","51":"7","52":"7","53":"2","54":"b","55":"c","56":"6","57":"2","58":"b","59":"6","6":"6","60":"8","61":"d","62":"f","63":"c","7":"f","8":"4","9":"e","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-11-09 12:43:35"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:44:04"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:44:04"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:44:04"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:44:04"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-09 12:44:17"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:577:9)","timestamp":"2025-11-09 12:44:17"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:44:17"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:44:17"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:44:17"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:44:17"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-09 12:50:30"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:577:9)","timestamp":"2025-11-09 12:50:30"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:50:31"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:50:31"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:50:31"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:50:31"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-09 12:50:33"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:577:9)","timestamp":"2025-11-09 12:50:33"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:50:33"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:50:33"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:50:33"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:50:33"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-09 12:50:36"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:577:9)","timestamp":"2025-11-09 12:50:36"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:50:36"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:50:36"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:50:36"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:50:36"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-09 12:53:33"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:577:9)","timestamp":"2025-11-09 12:53:33"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:53:34"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:53:34"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:53:34"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:53:34"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-09 12:53:35"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:577:9)","timestamp":"2025-11-09 12:53:35"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:53:35"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:53:35"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:53:35"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:53:35"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:53:36"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:53:36"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 12:53:36"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\utils\\database.js:32:20)\n    at async Socket.<anonymous> (C:\\Users\\uygul\\Desktop\\AsistTR\\backend\\src\\socket\\socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 12:53:36"}
{"address":"172.19.0.3","code":"ECONNREFUSED","errno":-111,"level":"error","message":"Database bağlantı hatası: connect ECONNREFUSED 172.19.0.3:5432","port":5432,"service":"asistr-backend","stack":"Error: connect ECONNREFUSED 172.19.0.3:5432\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async connectDatabase (/app/src/utils/database.js:17:20)\n    at async startServer (/app/app.js:149:5)","syscall":"connect","timestamp":"2025-11-09 10:00:32"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 10:02:44"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 10:02:44"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 10:02:44"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 10:02:44"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-09 10:03:37"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:577:9)","timestamp":"2025-11-09 10:03:37"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 10:03:37"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 10:03:37"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-09 10:03:37"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(5a0dd790-6479-4494-b3b7-ba067d9552d4) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatası: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:195:7)","table":"agents_presence","timestamp":"2025-11-09 10:03:37"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-09 10:03:42"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:577:9)","timestamp":"2025-11-09 10:03:42"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-09 10:15:36"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-09 10:15:48"}
{"level":"error","message":"Login hatası: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-09 10:16:18"}
{"error":"relation \"agent_call_availability\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-09 10:17:07"}
{"code":"42P01","file":"parse_relation.c","length":122,"level":"error","line":"1392","message":"UpdateCallAvailability hatası: relation \"agent_call_availability\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"agent_call_availability\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:316:5)","timestamp":"2025-11-09 10:17:07"}
{"error":"relation \"agent_call_availability\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-09 10:17:07"}
{"code":"42P01","file":"parse_relation.c","length":122,"level":"error","line":"1392","message":"UpdateCallAvailability hatası: relation \"agent_call_availability\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"agent_call_availability\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:316:5)","timestamp":"2025-11-09 10:17:07"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-09 10:17:15"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-09 10:17:15"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-09 10:17:15"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-09 10:17:15"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:17:16"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:17:16"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:17:16"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetOnlineVisitors error: relation \"visitor_sessions\" does not exist","name":"error","position":"270","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:17:16"}
{"error":"relation \"page_views\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        page_url,\n        page_title,\n        COUNT(*) as views,\n        COUNT(DISTINCT visitor_id) as unique_visitors\n      FROM page_views\n      WHERE viewed_at >= $1 AND site_id = $3\n      GROUP BY page_url, page_title\n      ORDER BY views DESC\n      LIMIT $2\n    ","timestamp":"2025-11-09 10:17:16"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetTopPages error: relation \"page_views\" does not exist","name":"error","position":"146","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"page_views\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTopPages (/app/src/controllers/analytics.controller.js:269:20)","timestamp":"2025-11-09 10:17:16"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:17:17"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:17:17"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:17:17"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:17:17"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:17:17"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetTrafficSources error: relation \"visitor_sessions\" does not exist","name":"error","position":"409","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:17:17"}
{"error":"relation \"page_views\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        page_url,\n        page_title,\n        COUNT(*) as views,\n        COUNT(DISTINCT visitor_id) as unique_visitors\n      FROM page_views\n      WHERE viewed_at >= $1 AND site_id = $3\n      GROUP BY page_url, page_title\n      ORDER BY views DESC\n      LIMIT $2\n    ","timestamp":"2025-11-09 10:17:17"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetTopPages error: relation \"page_views\" does not exist","name":"error","position":"146","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"page_views\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTopPages (/app/src/controllers/analytics.controller.js:269:20)","timestamp":"2025-11-09 10:17:17"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:17:17"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetOnlineVisitors error: relation \"visitor_sessions\" does not exist","name":"error","position":"270","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:17:17"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:17:17"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:17:17"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:17:17"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetTrafficSources error: relation \"visitor_sessions\" does not exist","name":"error","position":"409","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:17:17"}
{"error":"relation \"notification_preferences\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM notification_preferences WHERE user_id = $1","timestamp":"2025-11-09 10:17:17"}
{"code":"42P01","file":"parse_relation.c","length":123,"level":"error","line":"1392","message":"GetPreferences error: relation \"notification_preferences\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"notification_preferences\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:14:18)","timestamp":"2025-11-09 10:17:17"}
{"error":"relation \"notification_preferences\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM notification_preferences WHERE user_id = $1","timestamp":"2025-11-09 10:17:17"}
{"code":"42P01","file":"parse_relation.c","length":123,"level":"error","line":"1392","message":"GetPreferences error: relation \"notification_preferences\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"notification_preferences\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:14:18)","timestamp":"2025-11-09 10:17:17"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-09 10:17:18"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetAgents error: relation \"departments\" does not exist","name":"error","position":"338","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:44:20)","timestamp":"2025-11-09 10:17:18"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:17:18"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:17:18"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-09 10:17:18"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetAgents error: relation \"departments\" does not exist","name":"error","position":"338","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:44:20)","timestamp":"2025-11-09 10:17:18"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:17:18"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:17:18"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:17:19"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:17:19"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:17:19"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:17:19"}
{"error":"relation \"widget_settings\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM widget_settings WHERE site_id = $1","timestamp":"2025-11-09 10:17:20"}
{"code":"42P01","file":"parse_relation.c","length":114,"level":"error","line":"1392","message":"GetWidgetSettings error: relation \"widget_settings\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"widget_settings\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getWidgetSettings (/app/src/controllers/widgetSettings.controller.js:18:18)","timestamp":"2025-11-09 10:17:20"}
{"error":"relation \"widget_settings\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM widget_settings WHERE site_id = $1","timestamp":"2025-11-09 10:17:20"}
{"code":"42P01","file":"parse_relation.c","length":114,"level":"error","line":"1392","message":"GetWidgetSettings error: relation \"widget_settings\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"widget_settings\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getWidgetSettings (/app/src/controllers/widgetSettings.controller.js:18:18)","timestamp":"2025-11-09 10:17:20"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-09 10:17:26"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-09 10:17:26"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-09 10:17:27"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-09 10:17:27"}
{"0":"9","1":"2","10":"5","11":"b","12":"2","13":"e","14":"2","15":"b","16":"5","17":"b","18":"b","19":"4","2":"6","20":"8","21":"1","22":"1","23":"1","24":"b","25":"5","26":"3","27":"d","28":"e","29":"a","3":"3","30":"2","31":"a","32":"4","33":"8","34":"c","35":"e","36":"2","37":"3","38":"b","39":"0","4":"7","40":"9","41":"2","42":"8","43":"c","44":"9","45":"a","46":"7","47":"3","48":"e","49":"3","5":"0","50":"9","51":"7","52":"7","53":"2","54":"b","55":"c","56":"6","57":"2","58":"b","59":"6","6":"6","60":"8","61":"d","62":"f","63":"c","7":"f","8":"4","9":"e","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-11-09 10:17:33"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-09 10:18:42"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:577:9)","timestamp":"2025-11-09 10:18:42"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-09 10:18:42"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-09 10:18:42"}
{"error":"relation \"agent_call_availability\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-09 10:18:42"}
{"code":"42P01","file":"parse_relation.c","length":122,"level":"error","line":"1392","message":"UpdateCallAvailability hatası: relation \"agent_call_availability\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"agent_call_availability\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:316:5)","timestamp":"2025-11-09 10:18:42"}
{"error":"relation \"agent_call_availability\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-09 10:18:42"}
{"code":"42P01","file":"parse_relation.c","length":122,"level":"error","line":"1392","message":"UpdateCallAvailability hatası: relation \"agent_call_availability\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"agent_call_availability\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:316:5)","timestamp":"2025-11-09 10:18:42"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-09 10:18:42"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-09 10:18:42"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-09 10:18:46"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-09 10:18:46"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-09 10:18:46"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-09 10:18:46"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:18:53"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:18:53"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:18:54"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetTrafficSources error: relation \"visitor_sessions\" does not exist","name":"error","position":"409","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:18:54"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:18:54"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetOnlineVisitors error: relation \"visitor_sessions\" does not exist","name":"error","position":"270","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:18:54"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:18:54"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:18:54"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:18:54"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:18:54"}
{"error":"relation \"page_views\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        page_url,\n        page_title,\n        COUNT(*) as views,\n        COUNT(DISTINCT visitor_id) as unique_visitors\n      FROM page_views\n      WHERE viewed_at >= $1 AND site_id = $3\n      GROUP BY page_url, page_title\n      ORDER BY views DESC\n      LIMIT $2\n    ","timestamp":"2025-11-09 10:18:54"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetTopPages error: relation \"page_views\" does not exist","name":"error","position":"146","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"page_views\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTopPages (/app/src/controllers/analytics.controller.js:269:20)","timestamp":"2025-11-09 10:18:54"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:18:54"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetTrafficSources error: relation \"visitor_sessions\" does not exist","name":"error","position":"409","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:18:54"}
{"error":"relation \"visitor_sessions\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:18:54"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetOnlineVisitors error: relation \"visitor_sessions\" does not exist","name":"error","position":"270","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"visitor_sessions\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:18:54"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:18:54"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:18:54"}
{"error":"relation \"page_views\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        page_url,\n        page_title,\n        COUNT(*) as views,\n        COUNT(DISTINCT visitor_id) as unique_visitors\n      FROM page_views\n      WHERE viewed_at >= $1 AND site_id = $3\n      GROUP BY page_url, page_title\n      ORDER BY views DESC\n      LIMIT $2\n    ","timestamp":"2025-11-09 10:18:54"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetTopPages error: relation \"page_views\" does not exist","name":"error","position":"146","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"page_views\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTopPages (/app/src/controllers/analytics.controller.js:269:20)","timestamp":"2025-11-09 10:18:54"}
{"error":"relation \"notification_preferences\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM notification_preferences WHERE user_id = $1","timestamp":"2025-11-09 10:19:02"}
{"code":"42P01","file":"parse_relation.c","length":123,"level":"error","line":"1392","message":"GetPreferences error: relation \"notification_preferences\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"notification_preferences\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:14:18)","timestamp":"2025-11-09 10:19:02"}
{"error":"relation \"notification_preferences\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM notification_preferences WHERE user_id = $1","timestamp":"2025-11-09 10:19:02"}
{"code":"42P01","file":"parse_relation.c","length":123,"level":"error","line":"1392","message":"GetPreferences error: relation \"notification_preferences\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"notification_preferences\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:14:18)","timestamp":"2025-11-09 10:19:02"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:19:09"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:19:09"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-09 10:19:09"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetAgents error: relation \"departments\" does not exist","name":"error","position":"338","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:44:20)","timestamp":"2025-11-09 10:19:09"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:19:09"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:19:09"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-09 10:19:09"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetAgents error: relation \"departments\" does not exist","name":"error","position":"338","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:44:20)","timestamp":"2025-11-09 10:19:09"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:19:15"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:19:15"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:19:15"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:19:15"}
{"error":"relation \"widget_settings\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM widget_settings WHERE site_id = $1","timestamp":"2025-11-09 10:19:20"}
{"code":"42P01","file":"parse_relation.c","length":114,"level":"error","line":"1392","message":"GetWidgetSettings error: relation \"widget_settings\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"widget_settings\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getWidgetSettings (/app/src/controllers/widgetSettings.controller.js:18:18)","timestamp":"2025-11-09 10:19:20"}
{"error":"relation \"widget_settings\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM widget_settings WHERE site_id = $1","timestamp":"2025-11-09 10:19:20"}
{"code":"42P01","file":"parse_relation.c","length":114,"level":"error","line":"1392","message":"GetWidgetSettings error: relation \"widget_settings\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"widget_settings\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getWidgetSettings (/app/src/controllers/widgetSettings.controller.js:18:18)","timestamp":"2025-11-09 10:19:20"}
{"error":"relation \"voice_calls\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"UPDATE voice_calls \n           SET status = 'ended', end_time = NOW(), disconnect_reason = 'agent_disconnect'\n           WHERE agent_id = $1 AND status IN ('connecting', 'active')","timestamp":"2025-11-09 10:19:35"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"Disconnect hatası: relation \"voice_calls\" does not exist","name":"error","position":"8","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"voice_calls\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:577:9)","timestamp":"2025-11-09 10:19:35"}
{"error":"relation \"agent_call_availability\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-09 10:19:36"}
{"code":"42P01","file":"parse_relation.c","length":122,"level":"error","line":"1392","message":"UpdateCallAvailability hatası: relation \"agent_call_availability\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"agent_call_availability\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:316:5)","timestamp":"2025-11-09 10:19:36"}
{"error":"relation \"agent_call_availability\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-09 10:19:36"}
{"code":"42P01","file":"parse_relation.c","length":122,"level":"error","line":"1392","message":"UpdateCallAvailability hatası: relation \"agent_call_availability\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"agent_call_availability\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:316:5)","timestamp":"2025-11-09 10:19:36"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-09 10:19:42"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-09 10:19:42"}
{"error":"relation \"canned_responses\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        cr.*,\n        u.name as created_by_name\n      FROM canned_responses cr\n      LEFT JOIN users u ON cr.created_by = u.id\n      WHERE cr.is_active = true\n     ORDER BY cr.category, cr.title","timestamp":"2025-11-09 10:19:42"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"GetCannedResponses error: relation \"canned_responses\" does not exist","name":"error","position":"75","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"canned_responses\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getCannedResponses (/app/src/controllers/canned.controller.js:40:20)","timestamp":"2025-11-09 10:19:42"}
{"error":"relation \"notification_preferences\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM notification_preferences WHERE user_id = $1","timestamp":"2025-11-09 10:19:43"}
{"code":"42P01","file":"parse_relation.c","length":123,"level":"error","line":"1392","message":"GetPreferences error: relation \"notification_preferences\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"notification_preferences\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:14:18)","timestamp":"2025-11-09 10:19:43"}
{"error":"relation \"notification_preferences\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM notification_preferences WHERE user_id = $1","timestamp":"2025-11-09 10:19:43"}
{"code":"42P01","file":"parse_relation.c","length":123,"level":"error","line":"1392","message":"GetPreferences error: relation \"notification_preferences\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"notification_preferences\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:14:18)","timestamp":"2025-11-09 10:19:43"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:19:44"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:19:44"}
{"error":"relation \"departments\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:19:44"}
{"code":"42P01","file":"parse_relation.c","length":111,"level":"error","line":"1392","message":"GetDepartments error: relation \"departments\" does not exist","name":"error","position":"177","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"departments\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:19:44"}
{"error":"relation \"widget_settings\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM widget_settings WHERE site_id = $1","timestamp":"2025-11-09 10:19:45"}
{"code":"42P01","file":"parse_relation.c","length":114,"level":"error","line":"1392","message":"GetWidgetSettings error: relation \"widget_settings\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"widget_settings\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getWidgetSettings (/app/src/controllers/widgetSettings.controller.js:18:18)","timestamp":"2025-11-09 10:19:45"}
{"error":"relation \"widget_settings\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM widget_settings WHERE site_id = $1","timestamp":"2025-11-09 10:19:45"}
{"code":"42P01","file":"parse_relation.c","length":114,"level":"error","line":"1392","message":"GetWidgetSettings error: relation \"widget_settings\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"widget_settings\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getWidgetSettings (/app/src/controllers/widgetSettings.controller.js:18:18)","timestamp":"2025-11-09 10:19:45"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:22:51"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:22:51"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:22:51"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:22:51"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:22:51"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:22:51"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:22:51"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:22:51"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:22:51"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:22:51"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:22:51"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:22:51"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:22:51"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:22:51"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:22:51"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:22:51"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-09 10:22:53"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetAgents error: column u.department_id does not exist","name":"error","position":"355","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:44:20)","timestamp":"2025-11-09 10:22:53"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:22:53"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetDepartments error: column u.department_id does not exist","name":"error","position":"225","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:22:53"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-09 10:22:53"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetAgents error: column u.department_id does not exist","name":"error","position":"355","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:44:20)","timestamp":"2025-11-09 10:22:53"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:22:53"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetDepartments error: column u.department_id does not exist","name":"error","position":"225","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:22:53"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:22:54"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetDepartments error: column u.department_id does not exist","name":"error","position":"225","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:22:54"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:22:54"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetDepartments error: column u.department_id does not exist","name":"error","position":"225","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:22:54"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:23:29"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:23:29"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:23:29"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:23:29"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:23:29"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:23:29"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:23:29"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:23:29"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:23:29"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:23:29"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:23:29"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:23:29"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:23:29"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:23:29"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:23:29"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:23:29"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-09 10:23:44"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetAgents error: column u.department_id does not exist","name":"error","position":"355","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:44:20)","timestamp":"2025-11-09 10:23:44"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:23:44"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetDepartments error: column u.department_id does not exist","name":"error","position":"225","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:23:44"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-09 10:23:44"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetAgents error: column u.department_id does not exist","name":"error","position":"355","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:44:20)","timestamp":"2025-11-09 10:23:44"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:23:44"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetDepartments error: column u.department_id does not exist","name":"error","position":"225","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:23:44"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:23:53"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetDepartments error: column u.department_id does not exist","name":"error","position":"225","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:23:53"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:23:53"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetDepartments error: column u.department_id does not exist","name":"error","position":"225","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:23:53"}
{"0":"9","1":"2","10":"5","11":"b","12":"2","13":"e","14":"2","15":"b","16":"5","17":"b","18":"b","19":"4","2":"6","20":"8","21":"1","22":"1","23":"1","24":"b","25":"5","26":"3","27":"d","28":"e","29":"a","3":"3","30":"2","31":"a","32":"4","33":"8","34":"c","35":"e","36":"2","37":"3","38":"b","39":"0","4":"7","40":"9","41":"2","42":"8","43":"c","44":"9","45":"a","46":"7","47":"3","48":"e","49":"3","5":"0","50":"9","51":"7","52":"7","53":"2","54":"b","55":"c","56":"6","57":"2","58":"b","59":"6","6":"6","60":"8","61":"d","62":"f","63":"c","7":"f","8":"4","9":"e","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-11-09 10:24:42"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:25:10"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:25:10"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:25:10"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:25:10"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:25:10"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:25:10"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:25:10"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:25:10"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:25:10"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:25:10"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:25:10"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:25:10"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:25:10"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:25:10"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:25:10"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:25:10"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:25:14"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetDepartments error: column u.department_id does not exist","name":"error","position":"225","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:25:14"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:25:14"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetDepartments error: column u.department_id does not exist","name":"error","position":"225","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:25:14"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-09 10:25:14"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetAgents error: column u.department_id does not exist","name":"error","position":"355","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:44:20)","timestamp":"2025-11-09 10:25:14"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        u.id,\n        u.name,\n        u.email,\n        u.role,\n        u.department_id,\n        d.name as department_name,\n        u.max_chats,\n        u.current_chats,\n        u.skills,\n        u.is_active,\n        ap.status as online_status,\n        ap.last_seen,\n        u.created_at\n      FROM users u\n      LEFT JOIN departments d ON u.department_id = d.id\n      LEFT JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY u.created_at DESC","timestamp":"2025-11-09 10:25:14"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetAgents error: column u.department_id does not exist","name":"error","position":"355","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getAgents (/app/src/controllers/agent.controller.js:44:20)","timestamp":"2025-11-09 10:25:14"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:25:14"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetDepartments error: column u.department_id does not exist","name":"error","position":"225","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:25:14"}
{"error":"column u.department_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        d.id,\n        d.site_id,\n        d.name,\n        d.description,\n        d.is_active,\n        d.created_at,\n        COUNT(u.id) as agent_count\n      FROM departments d\n      LEFT JOIN users u ON d.id = u.department_id\n      WHERE 1=1\n     GROUP BY d.id ORDER BY d.created_at DESC","timestamp":"2025-11-09 10:25:14"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetDepartments error: column u.department_id does not exist","name":"error","position":"225","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column u.department_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDepartments (/app/src/controllers/department.controller.js:36:20)","timestamp":"2025-11-09 10:25:14"}
{"0":"9","1":"2","10":"5","11":"b","12":"2","13":"e","14":"2","15":"b","16":"5","17":"b","18":"b","19":"4","2":"6","20":"8","21":"1","22":"1","23":"1","24":"b","25":"5","26":"3","27":"d","28":"e","29":"a","3":"3","30":"2","31":"a","32":"4","33":"8","34":"c","35":"e","36":"2","37":"3","38":"b","39":"0","4":"7","40":"9","41":"2","42":"8","43":"c","44":"9","45":"a","46":"7","47":"3","48":"e","49":"3","5":"0","50":"9","51":"7","52":"7","53":"2","54":"b","55":"c","56":"6","57":"2","58":"b","59":"6","6":"6","60":"8","61":"d","62":"f","63":"c","7":"f","8":"4","9":"e","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-11-09 10:26:42"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:27:22"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:27:22"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:27:22"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:27:22"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:27:22"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:27:22"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:27:22"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:27:22"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:27:22"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:27:22"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:27:22"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:27:22"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:27:22"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:27:22"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:27:22"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:27:22"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:28:05"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:28:05"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:28:05"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:28:05"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:28:05"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:28:05"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:28:05"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:28:05"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:28:05"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:28:05"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:28:05"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:28:05"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:28:05"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:28:05"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:28:05"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:28:05"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:28:21"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:28:21"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:28:21"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:28:21"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:28:21"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:28:21"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:28:21"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:28:21"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:28:21"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:28:21"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:28:21"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:28:21"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:28:21"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:28:21"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:28:21"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:28:21"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:29:00"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:29:00"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:29:00"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:29:00"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:29:00"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:29:00"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:29:00"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:29:00"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:29:00"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:29:00"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:29:00"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:29:00"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:29:00"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:29:00"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:29:00"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:29:00"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:29:33"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:29:33"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:29:33"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:29:33"}
{"error":"column vs.is_active does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:29:34"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetOnlineVisitors error: column vs.is_active does not exist","name":"error","position":"318","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column vs.is_active does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:29:34"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:29:34"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:29:34"}
{"error":"column \"first_seen\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT COUNT(*) as count\n      FROM visitors\n      WHERE first_seen >= $2 AND site_id = $1\n    ","timestamp":"2025-11-09 10:29:34"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"first_seen\" does not exist","name":"error","position":"65","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"first_seen\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:121:31)","timestamp":"2025-11-09 10:29:34"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:29:34"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:29:34"}
{"error":"column \"referrer\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        CASE \n          WHEN referrer IS NULL OR referrer = '' THEN 'Direct'\n          WHEN referrer LIKE '%google.%' THEN 'Google'\n          WHEN referrer LIKE '%facebook.%' THEN 'Facebook'\n          WHEN referrer LIKE '%twitter.%' THEN 'Twitter'\n          WHEN referrer LIKE '%linkedin.%' THEN 'LinkedIn'\n          ELSE 'Other'\n        END as source,\n        COUNT(*) as sessions\n      FROM visitor_sessions\n      WHERE started_at >= $1 AND site_id = $2\n      GROUP BY source\n      ORDER BY sessions DESC\n    ","timestamp":"2025-11-09 10:29:34"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"error","line":"3665","message":"GetTrafficSources error: column \"referrer\" does not exist","name":"error","position":"45","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"referrer\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getTrafficSources (/app/src/controllers/analytics.controller.js:303:20)","timestamp":"2025-11-09 10:29:34"}
{"error":"column \"device_type\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT device_type, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY device_type\n      ORDER BY count DESC\n    ","timestamp":"2025-11-09 10:29:34"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"error","line":"3665","message":"GetDeviceStats error: column \"device_type\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"device_type\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:342:26)","timestamp":"2025-11-09 10:29:34"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:31:55"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:31:55"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:31:55"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:31:55"}
{"error":"column \"duration_seconds\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT AVG(duration_seconds) as avg_duration\n      FROM visitor_sessions\n      WHERE started_at >= $2 AND duration_seconds IS NOT NULL AND site_id = $1\n    ","timestamp":"2025-11-09 10:31:55"}
{"code":"42703","file":"parse_relation.c","length":116,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"duration_seconds\" does not exist","name":"error","position":"19","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"duration_seconds\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:155:31)","timestamp":"2025-11-09 10:31:55"}
{"error":"column \"browser\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT browser, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY browser\n      ORDER BY count DESC\n      LIMIT 5\n    ","timestamp":"2025-11-09 10:31:55"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"GetDeviceStats error: column \"browser\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"browser\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:351:27)","timestamp":"2025-11-09 10:31:55"}
{"error":"column \"duration_seconds\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT AVG(duration_seconds) as avg_duration\n      FROM visitor_sessions\n      WHERE started_at >= $2 AND duration_seconds IS NOT NULL AND site_id = $1\n    ","timestamp":"2025-11-09 10:31:55"}
{"code":"42703","file":"parse_relation.c","length":116,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"duration_seconds\" does not exist","name":"error","position":"19","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"duration_seconds\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:155:31)","timestamp":"2025-11-09 10:31:55"}
{"error":"column \"browser\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT browser, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY browser\n      ORDER BY count DESC\n      LIMIT 5\n    ","timestamp":"2025-11-09 10:31:55"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"GetDeviceStats error: column \"browser\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"browser\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:351:27)","timestamp":"2025-11-09 10:31:55"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:42:03"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:42:03"}
{"error":"column \"duration_seconds\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT AVG(duration_seconds) as avg_duration\n      FROM visitor_sessions\n      WHERE started_at >= $2 AND duration_seconds IS NOT NULL AND site_id = $1\n    ","timestamp":"2025-11-09 10:42:03"}
{"code":"42703","file":"parse_relation.c","length":116,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"duration_seconds\" does not exist","name":"error","position":"19","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"duration_seconds\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:155:31)","timestamp":"2025-11-09 10:42:03"}
{"error":"column \"duration_seconds\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT AVG(duration_seconds) as avg_duration\n      FROM visitor_sessions\n      WHERE started_at >= $2 AND duration_seconds IS NOT NULL AND site_id = $1\n    ","timestamp":"2025-11-09 10:42:03"}
{"code":"42703","file":"parse_relation.c","length":116,"level":"error","line":"3665","message":"GetDashboardAnalytics error: column \"duration_seconds\" does not exist","name":"error","position":"19","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"duration_seconds\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:155:31)","timestamp":"2025-11-09 10:42:03"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:42:03"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:42:03"}
{"error":"column \"browser\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT browser, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY browser\n      ORDER BY count DESC\n      LIMIT 5\n    ","timestamp":"2025-11-09 10:42:03"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"GetDeviceStats error: column \"browser\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"browser\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:351:27)","timestamp":"2025-11-09 10:42:03"}
{"error":"column \"browser\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT browser, COUNT(*) as count\n      FROM visitors\n      WHERE last_seen >= $1 AND site_id = $2\n      GROUP BY browser\n      ORDER BY count DESC\n      LIMIT 5\n    ","timestamp":"2025-11-09 10:42:03"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"error","line":"3665","message":"GetDeviceStats error: column \"browser\" does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"browser\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getDeviceStats (/app/src/controllers/analytics.controller.js:351:27)","timestamp":"2025-11-09 10:42:03"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:46:23"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:46:23"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:46:23"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:46:23"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:46:23"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 10:46:23"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:46:23"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 10:46:23"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:46:26"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:46:26"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:46:26"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 10:46:26"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:46:26"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:46:26"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:46:26"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 10:46:26"}
{"error":"relation \"routing_config\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM routing_config WHERE site_id = $1","timestamp":"2025-11-09 10:47:13"}
{"code":"42P01","file":"parse_relation.c","length":113,"level":"error","line":"1392","message":"GetRoutingConfig error: relation \"routing_config\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"routing_config\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getRoutingConfig (/app/src/services/routing.service.js:64:20)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:182:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:140:31)","timestamp":"2025-11-09 10:47:13"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:338:28)","timestamp":"2025-11-09 10:47:18"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:338:28)","timestamp":"2025-11-09 10:47:18"}
{"error":"relation \"conversation_tags\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT ct.*, t.name, t.color\n      FROM conversation_tags ct\n      JOIN chat_tags t ON ct.tag_id = t.id\n      WHERE ct.conversation_id = $1\n      ORDER BY t.name\n    ","timestamp":"2025-11-09 10:47:41"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetConversationTags error: relation \"conversation_tags\" does not exist","name":"error","position":"48","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"conversation_tags\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversationTags (/app/src/controllers/chatEnhancement.controller.js:115:20)","timestamp":"2025-11-09 10:47:41"}
{"error":"relation \"conversation_notes\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT cn.*, u.name as agent_name\n      FROM conversation_notes cn\n      LEFT JOIN users u ON cn.agent_id = u.id\n      WHERE cn.conversation_id = $1\n      ORDER BY cn.created_at DESC\n    ","timestamp":"2025-11-09 10:47:41"}
{"code":"42P01","file":"parse_relation.c","length":117,"level":"error","line":"1392","message":"GetConversationNotes error: relation \"conversation_notes\" does not exist","name":"error","position":"53","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"conversation_notes\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversationNotes (/app/src/controllers/chatEnhancement.controller.js:138:20)","timestamp":"2025-11-09 10:47:41"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponse (/app/src/rag/rag.service.js:32:31)\n    at async suggestReply (/app/src/rag/rag.service.js:135:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-11-09 10:49:04"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponseSync (/app/src/rag/ollama.service.js:227:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponse (/app/src/rag/rag.service.js:101:24)\n    at async suggestReply (/app/src/rag/rag.service.js:135:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-11-09 10:49:04"}
{"level":"error","message":"TransferConversation error: Target agent is not online","service":"asistr-backend","stack":"Error: Target agent is not online\n    at transferConversation (/app/src/services/routing.service.js:265:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async transferChat (/app/src/controllers/chatEnhancement.controller.js:255:5)","timestamp":"2025-11-09 10:49:16"}
{"level":"error","message":"TransferChat error: Target agent is not online","service":"asistr-backend","stack":"Error: Target agent is not online\n    at transferConversation (/app/src/services/routing.service.js:265:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async transferChat (/app/src/controllers/chatEnhancement.controller.js:255:5)","timestamp":"2025-11-09 10:49:16"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:49:26"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 10:49:26"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:49:26"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:49:26"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:49:26"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 10:49:26"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.*,\n        vs.session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 10:49:26"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"164","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 10:49:26"}
{"error":"column \"email_new_conversation\" of relation \"notification_preferences\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      UPDATE notification_preferences\n      SET email_new_conversation = $1, email_new_message = $2, email_conversation_assigned = $3, email_daily_summary = $4, desktop_enabled = $5, sound_enabled = $6, sound_volume = $7, browser_conversation_assigned = $8, browser_new_message = $9, browser_new_conversation = $10, updated_at = NOW()\n      WHERE user_id = $11\n      RETURNING *\n    ","timestamp":"2025-11-09 10:49:44"}
{"code":"42703","file":"analyze.c","length":161,"level":"error","line":"2515","message":"UpdatePreferences error: column \"email_new_conversation\" of relation \"notification_preferences\" does not exist","name":"error","position":"50","routine":"transformUpdateTargetList","service":"asistr-backend","severity":"ERROR","stack":"error: column \"email_new_conversation\" of relation \"notification_preferences\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async updatePreferences (/app/src/controllers/notification.controller.js:66:20)","timestamp":"2025-11-09 10:49:44"}
{"error":"relation \"conversation_tags\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT ct.*, t.name, t.color\n      FROM conversation_tags ct\n      JOIN chat_tags t ON ct.tag_id = t.id\n      WHERE ct.conversation_id = $1\n      ORDER BY t.name\n    ","timestamp":"2025-11-09 10:50:00"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetConversationTags error: relation \"conversation_tags\" does not exist","name":"error","position":"48","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"conversation_tags\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversationTags (/app/src/controllers/chatEnhancement.controller.js:115:20)","timestamp":"2025-11-09 10:50:00"}
{"error":"relation \"conversation_notes\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT cn.*, u.name as agent_name\n      FROM conversation_notes cn\n      LEFT JOIN users u ON cn.agent_id = u.id\n      WHERE cn.conversation_id = $1\n      ORDER BY cn.created_at DESC\n    ","timestamp":"2025-11-09 10:50:00"}
{"code":"42P01","file":"parse_relation.c","length":117,"level":"error","line":"1392","message":"GetConversationNotes error: relation \"conversation_notes\" does not exist","name":"error","position":"53","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"conversation_notes\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversationNotes (/app/src/controllers/chatEnhancement.controller.js:138:20)","timestamp":"2025-11-09 10:50:00"}
{"error":"relation \"routing_config\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM routing_config WHERE site_id = $1","timestamp":"2025-11-09 10:55:40"}
{"code":"42P01","file":"parse_relation.c","length":113,"level":"error","line":"1392","message":"GetRoutingConfig error: relation \"routing_config\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"routing_config\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getRoutingConfig (/app/src/services/routing.service.js:64:20)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:182:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:140:31)","timestamp":"2025-11-09 10:55:40"}
{"error":"relation \"routing_config\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM routing_config WHERE site_id = $1","timestamp":"2025-11-09 10:55:59"}
{"code":"42P01","file":"parse_relation.c","length":113,"level":"error","line":"1392","message":"GetRoutingConfig error: relation \"routing_config\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"routing_config\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getRoutingConfig (/app/src/services/routing.service.js:64:20)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:182:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:140:31)","timestamp":"2025-11-09 10:55:59"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:338:28)","timestamp":"2025-11-09 10:56:02"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:338:28)","timestamp":"2025-11-09 10:56:02"}
{"error":"relation \"conversation_tags\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT ct.*, t.name, t.color\n      FROM conversation_tags ct\n      JOIN chat_tags t ON ct.tag_id = t.id\n      WHERE ct.conversation_id = $1\n      ORDER BY t.name\n    ","timestamp":"2025-11-09 10:56:20"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetConversationTags error: relation \"conversation_tags\" does not exist","name":"error","position":"48","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"conversation_tags\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversationTags (/app/src/controllers/chatEnhancement.controller.js:115:20)","timestamp":"2025-11-09 10:56:20"}
{"error":"relation \"conversation_notes\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT cn.*, u.name as agent_name\n      FROM conversation_notes cn\n      LEFT JOIN users u ON cn.agent_id = u.id\n      WHERE cn.conversation_id = $1\n      ORDER BY cn.created_at DESC\n    ","timestamp":"2025-11-09 10:56:20"}
{"code":"42P01","file":"parse_relation.c","length":117,"level":"error","line":"1392","message":"GetConversationNotes error: relation \"conversation_notes\" does not exist","name":"error","position":"53","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"conversation_notes\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversationNotes (/app/src/controllers/chatEnhancement.controller.js:138:20)","timestamp":"2025-11-09 10:56:20"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponse (/app/src/rag/rag.service.js:32:31)\n    at async suggestReply (/app/src/rag/rag.service.js:135:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-11-09 10:56:23"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponseSync (/app/src/rag/ollama.service.js:227:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponse (/app/src/rag/rag.service.js:101:24)\n    at async suggestReply (/app/src/rag/rag.service.js:135:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-11-09 10:56:23"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 10:56:50"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 10:56:52"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 10:56:53"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 10:56:55"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 10:56:55"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 10:56:58"}
{"error":"relation \"routing_config\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM routing_config WHERE site_id = $1","timestamp":"2025-11-09 11:03:10"}
{"code":"42P01","file":"parse_relation.c","length":113,"level":"error","line":"1392","message":"GetRoutingConfig error: relation \"routing_config\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"routing_config\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getRoutingConfig (/app/src/services/routing.service.js:64:20)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:182:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:140:31)","timestamp":"2025-11-09 11:03:10"}
{"error":"relation \"conversation_tags\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT ct.*, t.name, t.color\n      FROM conversation_tags ct\n      JOIN chat_tags t ON ct.tag_id = t.id\n      WHERE ct.conversation_id = $1\n      ORDER BY t.name\n    ","timestamp":"2025-11-09 11:03:21"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetConversationTags error: relation \"conversation_tags\" does not exist","name":"error","position":"48","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"conversation_tags\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversationTags (/app/src/controllers/chatEnhancement.controller.js:115:20)","timestamp":"2025-11-09 11:03:21"}
{"error":"relation \"conversation_notes\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT cn.*, u.name as agent_name\n      FROM conversation_notes cn\n      LEFT JOIN users u ON cn.agent_id = u.id\n      WHERE cn.conversation_id = $1\n      ORDER BY cn.created_at DESC\n    ","timestamp":"2025-11-09 11:03:21"}
{"code":"42P01","file":"parse_relation.c","length":117,"level":"error","line":"1392","message":"GetConversationNotes error: relation \"conversation_notes\" does not exist","name":"error","position":"53","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"conversation_notes\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversationNotes (/app/src/controllers/chatEnhancement.controller.js:138:20)","timestamp":"2025-11-09 11:03:21"}
{"error":"relation \"conversation_tags\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT ct.*, t.name, t.color\n      FROM conversation_tags ct\n      JOIN chat_tags t ON ct.tag_id = t.id\n      WHERE ct.conversation_id = $1\n      ORDER BY t.name\n    ","timestamp":"2025-11-09 11:03:25"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetConversationTags error: relation \"conversation_tags\" does not exist","name":"error","position":"48","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"conversation_tags\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversationTags (/app/src/controllers/chatEnhancement.controller.js:115:20)","timestamp":"2025-11-09 11:03:25"}
{"error":"relation \"conversation_notes\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT cn.*, u.name as agent_name\n      FROM conversation_notes cn\n      LEFT JOIN users u ON cn.agent_id = u.id\n      WHERE cn.conversation_id = $1\n      ORDER BY cn.created_at DESC\n    ","timestamp":"2025-11-09 11:03:25"}
{"code":"42P01","file":"parse_relation.c","length":117,"level":"error","line":"1392","message":"GetConversationNotes error: relation \"conversation_notes\" does not exist","name":"error","position":"53","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"conversation_notes\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversationNotes (/app/src/controllers/chatEnhancement.controller.js:138:20)","timestamp":"2025-11-09 11:03:25"}
{"error":"relation \"routing_config\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"SELECT * FROM routing_config WHERE site_id = $1","timestamp":"2025-11-09 11:05:25"}
{"code":"42P01","file":"parse_relation.c","length":113,"level":"error","line":"1392","message":"GetRoutingConfig error: relation \"routing_config\" does not exist","name":"error","position":"15","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"routing_config\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getRoutingConfig (/app/src/services/routing.service.js:64:20)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:182:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:140:31)","timestamp":"2025-11-09 11:05:25"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:338:28)","timestamp":"2025-11-09 11:05:30"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:338:28)","timestamp":"2025-11-09 11:05:30"}
{"error":"relation \"conversation_tags\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT ct.*, t.name, t.color\n      FROM conversation_tags ct\n      JOIN chat_tags t ON ct.tag_id = t.id\n      WHERE ct.conversation_id = $1\n      ORDER BY t.name\n    ","timestamp":"2025-11-09 11:05:35"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetConversationTags error: relation \"conversation_tags\" does not exist","name":"error","position":"48","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"conversation_tags\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversationTags (/app/src/controllers/chatEnhancement.controller.js:115:20)","timestamp":"2025-11-09 11:05:35"}
{"error":"relation \"conversation_notes\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT cn.*, u.name as agent_name\n      FROM conversation_notes cn\n      LEFT JOIN users u ON cn.agent_id = u.id\n      WHERE cn.conversation_id = $1\n      ORDER BY cn.created_at DESC\n    ","timestamp":"2025-11-09 11:05:35"}
{"code":"42P01","file":"parse_relation.c","length":117,"level":"error","line":"1392","message":"GetConversationNotes error: relation \"conversation_notes\" does not exist","name":"error","position":"53","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"conversation_notes\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversationNotes (/app/src/controllers/chatEnhancement.controller.js:138:20)","timestamp":"2025-11-09 11:05:35"}
{"error":"relation \"conversation_tags\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT ct.*, t.name, t.color\n      FROM conversation_tags ct\n      JOIN chat_tags t ON ct.tag_id = t.id\n      WHERE ct.conversation_id = $1\n      ORDER BY t.name\n    ","timestamp":"2025-11-09 11:05:38"}
{"code":"42P01","file":"parse_relation.c","length":116,"level":"error","line":"1392","message":"GetConversationTags error: relation \"conversation_tags\" does not exist","name":"error","position":"48","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"conversation_tags\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversationTags (/app/src/controllers/chatEnhancement.controller.js:115:20)","timestamp":"2025-11-09 11:05:38"}
{"error":"relation \"conversation_notes\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT cn.*, u.name as agent_name\n      FROM conversation_notes cn\n      LEFT JOIN users u ON cn.agent_id = u.id\n      WHERE cn.conversation_id = $1\n      ORDER BY cn.created_at DESC\n    ","timestamp":"2025-11-09 11:05:38"}
{"code":"42P01","file":"parse_relation.c","length":117,"level":"error","line":"1392","message":"GetConversationNotes error: relation \"conversation_notes\" does not exist","name":"error","position":"53","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"conversation_notes\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversationNotes (/app/src/controllers/chatEnhancement.controller.js:138:20)","timestamp":"2025-11-09 11:05:38"}
{"error":"column reference \"agent_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT agent_id \n      FROM conversation_assignments ca\n      JOIN conversations c ON ca.conversation_id = c.id\n      WHERE c.site_id = $1 OR $1 IS NULL\n      ORDER BY ca.assigned_at DESC\n      LIMIT 1\n    ","timestamp":"2025-11-09 11:22:09"}
{"code":"42702","file":"parse_relation.c","length":113,"level":"error","line":"816","message":"RoundRobin routing error: column reference \"agent_id\" is ambiguous","name":"error","position":"15","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"agent_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async roundRobinRouting (/app/src/services/routing.service.js:107:26)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:198:25)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:140:31)","timestamp":"2025-11-09 11:22:09"}
{"error":"column reference \"agent_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT agent_id \n      FROM conversation_assignments ca\n      JOIN conversations c ON ca.conversation_id = c.id\n      WHERE c.site_id = $1 OR $1 IS NULL\n      ORDER BY ca.assigned_at DESC\n      LIMIT 1\n    ","timestamp":"2025-11-09 11:23:10"}
{"code":"42702","file":"parse_relation.c","length":113,"level":"error","line":"816","message":"RoundRobin routing error: column reference \"agent_id\" is ambiguous","name":"error","position":"15","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"agent_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async roundRobinRouting (/app/src/services/routing.service.js:107:26)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:198:25)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:140:31)","timestamp":"2025-11-09 11:23:10"}
{"error":"column reference \"agent_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT agent_id \n      FROM conversation_assignments ca\n      JOIN conversations c ON ca.conversation_id = c.id\n      WHERE c.site_id = $1 OR $1 IS NULL\n      ORDER BY ca.assigned_at DESC\n      LIMIT 1\n    ","timestamp":"2025-11-09 11:35:35"}
{"code":"42702","file":"parse_relation.c","length":113,"level":"error","line":"816","message":"RoundRobin routing error: column reference \"agent_id\" is ambiguous","name":"error","position":"15","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"agent_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async roundRobinRouting (/app/src/services/routing.service.js:107:26)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:198:25)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:140:31)","timestamp":"2025-11-09 11:35:35"}
{"error":"column reference \"agent_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT agent_id \n      FROM conversation_assignments ca\n      JOIN conversations c ON ca.conversation_id = c.id\n      WHERE c.site_id = $1 OR $1 IS NULL\n      ORDER BY ca.assigned_at DESC\n      LIMIT 1\n    ","timestamp":"2025-11-09 11:42:55"}
{"code":"42702","file":"parse_relation.c","length":113,"level":"error","line":"816","message":"RoundRobin routing error: column reference \"agent_id\" is ambiguous","name":"error","position":"15","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"agent_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async roundRobinRouting (/app/src/services/routing.service.js:107:26)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:405:25)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:140:31)","timestamp":"2025-11-09 11:42:55"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:44:32"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"355","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 11:44:32"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:44:32"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"355","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 11:44:32"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:44:32"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"355","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 11:44:32"}
{"error":"column reference \"session_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT page_url FROM page_views WHERE session_id = vs.id ORDER BY viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:44:32"}
{"code":"42702","file":"parse_relation.c","length":116,"level":"error","line":"816","message":"GetOnlineVisitors error: column reference \"session_id\" is ambiguous","name":"error","position":"355","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"session_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 11:44:32"}
{"error":"invalid input syntax for type uuid: \"demo_qsqx6oi6qnq\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT is_open, open_time, close_time\n      FROM business_hours\n      WHERE site_id = $1 AND day_of_week = $2\n    ","timestamp":"2025-11-09 11:52:43"}
{"code":"22P02","file":"uuid.c","length":148,"level":"error","line":"133","message":"IsWithinBusinessHours error: invalid input syntax for type uuid: \"demo_qsqx6oi6qnq\"","name":"error","routine":"string_to_uuid","service":"asistr-backend","severity":"ERROR","stack":"error: invalid input syntax for type uuid: \"demo_qsqx6oi6qnq\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async isWithinBusinessHours (/app/src/controllers/businessHours.controller.js:73:20)","timestamp":"2025-11-09 11:52:43","where":"unnamed portal parameter $1 = '...'"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:53:21"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 11:53:21"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:53:22"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 11:53:22"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:53:22"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 11:53:22"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:53:22"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 11:53:22"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:53:31"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 11:53:31"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:53:31"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 11:53:31"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:53:31"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 11:53:31"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:53:31"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 11:53:31"}
{"error":"invalid input syntax for type uuid: \"demo_qsqx6oi6qnq\"","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT is_open, open_time, close_time\n      FROM business_hours\n      WHERE site_id = $1 AND day_of_week = $2\n    ","timestamp":"2025-11-09 11:53:54"}
{"code":"22P02","file":"uuid.c","length":148,"level":"error","line":"133","message":"IsWithinBusinessHours error: invalid input syntax for type uuid: \"demo_qsqx6oi6qnq\"","name":"error","routine":"string_to_uuid","service":"asistr-backend","severity":"ERROR","stack":"error: invalid input syntax for type uuid: \"demo_qsqx6oi6qnq\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async isWithinBusinessHours (/app/src/controllers/businessHours.controller.js:73:20)","timestamp":"2025-11-09 11:53:54","where":"unnamed portal parameter $1 = '...'"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:56:16"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 11:56:16"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:56:16"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 11:56:16"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:56:16"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 11:56:16"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 11:56:16"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 11:56:16"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 12:02:46"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 12:02:46"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 12:02:47"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 12:02:47"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 12:02:47"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 12:02:47"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 12:02:47"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 12:02:47"}
{"error":"column reference \"agent_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT agent_id \n      FROM conversation_assignments ca\n      JOIN conversations c ON ca.conversation_id = c.id\n      WHERE c.site_id = $1 OR $1 IS NULL\n      ORDER BY ca.assigned_at DESC\n      LIMIT 1\n    ","timestamp":"2025-11-09 12:03:10"}
{"code":"42702","file":"parse_relation.c","length":113,"level":"error","line":"816","message":"RoundRobin routing error: column reference \"agent_id\" is ambiguous","name":"error","position":"15","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"agent_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async roundRobinRouting (/app/src/services/routing.service.js:107:26)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:405:25)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:140:31)","timestamp":"2025-11-09 12:03:10"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 12:04:01"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 12:04:01"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 12:04:01"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 12:04:01"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 12:04:01"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 12:04:01"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 12:04:01"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 12:04:01"}
{"error":"column reference \"agent_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT agent_id \n      FROM conversation_assignments ca\n      JOIN conversations c ON ca.conversation_id = c.id\n      WHERE c.site_id = $1 OR $1 IS NULL\n      ORDER BY ca.assigned_at DESC\n      LIMIT 1\n    ","timestamp":"2025-11-09 12:06:21"}
{"code":"42702","file":"parse_relation.c","length":113,"level":"error","line":"816","message":"RoundRobin routing error: column reference \"agent_id\" is ambiguous","name":"error","position":"15","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"agent_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async roundRobinRouting (/app/src/services/routing.service.js:107:26)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:405:25)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:140:31)","timestamp":"2025-11-09 12:06:21"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:338:28)","timestamp":"2025-11-09 12:15:26"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:338:28)","timestamp":"2025-11-09 12:15:26"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponse (/app/src/rag/rag.service.js:32:31)\n    at async suggestReply (/app/src/rag/rag.service.js:135:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-11-09 12:16:13"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponseSync (/app/src/rag/ollama.service.js:227:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponse (/app/src/rag/rag.service.js:101:24)\n    at async suggestReply (/app/src/rag/rag.service.js:135:20)\n    at async getReplysuggestion (/app/src/controllers/rag.controller.js:142:20)","timestamp":"2025-11-09 12:16:13"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 12:16:30"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 12:16:30"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 12:16:30"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 12:16:30"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 12:16:30"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 12:16:30"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 12:16:30"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 12:16:30"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:358:28)","timestamp":"2025-11-09 12:22:20"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:358:28)","timestamp":"2025-11-09 12:22:20"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:358:28)","timestamp":"2025-11-09 12:47:49"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:358:28)","timestamp":"2025-11-09 12:47:49"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:362:28)","timestamp":"2025-11-09 12:55:31"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:362:28)","timestamp":"2025-11-09 12:55:31"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:362:28)","timestamp":"2025-11-09 12:55:50"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:362:28)","timestamp":"2025-11-09 12:55:50"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 12:57:47"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 12:57:49"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 12:57:55"}
{"error":"column reference \"agent_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT agent_id \n      FROM conversation_assignments ca\n      JOIN conversations c ON ca.conversation_id = c.id\n      WHERE c.site_id = $1 OR $1 IS NULL\n      ORDER BY ca.assigned_at DESC\n      LIMIT 1\n    ","timestamp":"2025-11-09 12:58:59"}
{"code":"42702","file":"parse_relation.c","length":113,"level":"error","line":"816","message":"RoundRobin routing error: column reference \"agent_id\" is ambiguous","name":"error","position":"15","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"agent_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async roundRobinRouting (/app/src/services/routing.service.js:107:26)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:405:25)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:160:31)","timestamp":"2025-11-09 12:58:59"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 12:59:29"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 12:59:44"}
{"error":"column reference \"agent_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT agent_id \n      FROM conversation_assignments ca\n      JOIN conversations c ON ca.conversation_id = c.id\n      WHERE c.site_id = $1 OR $1 IS NULL\n      ORDER BY ca.assigned_at DESC\n      LIMIT 1\n    ","timestamp":"2025-11-09 13:00:14"}
{"code":"42702","file":"parse_relation.c","length":113,"level":"error","line":"816","message":"RoundRobin routing error: column reference \"agent_id\" is ambiguous","name":"error","position":"15","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"agent_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async roundRobinRouting (/app/src/services/routing.service.js:107:26)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:405:25)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:160:31)","timestamp":"2025-11-09 13:00:14"}
{"error":"column reference \"agent_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT agent_id \n      FROM conversation_assignments ca\n      JOIN conversations c ON ca.conversation_id = c.id\n      WHERE c.site_id = $1 OR $1 IS NULL\n      ORDER BY ca.assigned_at DESC\n      LIMIT 1\n    ","timestamp":"2025-11-09 13:01:31"}
{"code":"42702","file":"parse_relation.c","length":113,"level":"error","line":"816","message":"RoundRobin routing error: column reference \"agent_id\" is ambiguous","name":"error","position":"15","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"agent_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async roundRobinRouting (/app/src/services/routing.service.js:107:26)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:405:25)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:160:31)","timestamp":"2025-11-09 13:01:31"}
{"error":"column reference \"agent_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT agent_id \n      FROM conversation_assignments ca\n      JOIN conversations c ON ca.conversation_id = c.id\n      WHERE c.site_id = $1 OR $1 IS NULL\n      ORDER BY ca.assigned_at DESC\n      LIMIT 1\n    ","timestamp":"2025-11-09 13:05:22"}
{"code":"42702","file":"parse_relation.c","length":113,"level":"error","line":"816","message":"RoundRobin routing error: column reference \"agent_id\" is ambiguous","name":"error","position":"15","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"agent_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async roundRobinRouting (/app/src/services/routing.service.js:107:26)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:405:25)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:177:31)","timestamp":"2025-11-09 13:05:22"}
{"error":"column reference \"agent_id\" is ambiguous","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT agent_id \n      FROM conversation_assignments ca\n      JOIN conversations c ON ca.conversation_id = c.id\n      WHERE c.site_id = $1 OR $1 IS NULL\n      ORDER BY ca.assigned_at DESC\n      LIMIT 1\n    ","timestamp":"2025-11-09 13:05:22"}
{"code":"42702","file":"parse_relation.c","length":113,"level":"error","line":"816","message":"RoundRobin routing error: column reference \"agent_id\" is ambiguous","name":"error","position":"15","routine":"scanRTEForColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column reference \"agent_id\" is ambiguous\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async roundRobinRouting (/app/src/services/routing.service.js:107:26)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:405:25)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:177:31)","timestamp":"2025-11-09 13:05:22"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:379:28)","timestamp":"2025-11-09 13:06:31"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:379:28)","timestamp":"2025-11-09 13:06:31"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:379:28)","timestamp":"2025-11-09 13:06:43"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:379:28)","timestamp":"2025-11-09 13:06:43"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:379:28)","timestamp":"2025-11-09 13:07:20"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:379:28)","timestamp":"2025-11-09 13:07:20"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:18:15"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:18:15"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:18:15"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:18:15"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:18:16"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:18:16"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:18:16"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:18:16"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:18:17"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:18:17"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:18:17"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:18:17"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 13:18:20"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 13:18:20"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 13:18:20"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 13:18:20"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 13:18:20"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 13:18:20"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 13:18:20"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 13:18:20"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:18:28"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:18:28"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:18:28"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:18:28"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:18:35"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:18:35"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:18:35"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:18:35"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:18:41"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:18:41"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:18:41"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:18:41"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:18:48"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:18:48"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:18:48"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:18:48"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 13:18:57"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 13:18:57"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 13:18:57"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 13:18:57"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 13:18:57"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getOnlineVisitorsList (/app/src/controllers/analytics.controller.js:201:22)","timestamp":"2025-11-09 13:18:57"}
{"error":"column pv.session_id does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        v.id, v.site_id, v.name, v.email, v.ip_address, v.user_agent, \n        v.meta, v.first_seen, v.last_seen, v.device_type, v.browser, v.os, \n        v.is_online, v.created_at,\n        vs.session_id as visitor_session_id,\n        vs.started_at as session_started,\n        vs.page_views,\n        (SELECT pv.page_url FROM page_views pv WHERE pv.session_id = vs.id ORDER BY pv.viewed_at DESC LIMIT 1) as current_page\n      FROM visitors v\n      LEFT JOIN visitor_sessions vs ON v.id = vs.visitor_id AND vs.is_active = true\n      WHERE v.site_id = $1 AND v.is_online = true\n      ORDER BY v.last_seen DESC\n    ","timestamp":"2025-11-09 13:18:57"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"v.session_id\".","length":171,"level":"error","line":"3665","message":"GetOnlineVisitors error: column pv.session_id does not exist","name":"error","position":"361","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column pv.session_id does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getOnlineVisitors (/app/src/services/visitor.service.js:241:20)\n    at async getDashboardAnalytics (/app/src/controllers/analytics.controller.js:170:37)","timestamp":"2025-11-09 13:18:57"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:19:03"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:19:03"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:19:03"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:19:03"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:19:05"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:19:05"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:19:05"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:19:05"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:19:08"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:19:08"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:19:08"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:19:08"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:19:16"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:19:16"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:19:16"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:19:16"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:19:19"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:19:19"}
{"error":"column \"last_message_time\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"\n      SELECT \n        c.id,\n        c.status,\n        c.created_at,\n        c.agent_id,\n        agent.name as agent_name,\n        v.name as visitor_name,\n        v.email as visitor_email,\n        s.name as site_name,\n        (SELECT body FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message,\n        (SELECT created_at FROM messages WHERE conversation_id = c.id ORDER BY created_at DESC LIMIT 1) as last_message_time\n      FROM conversations c\n      LEFT JOIN visitors v ON c.visitor_id = v.id\n      LEFT JOIN sites s ON c.site_id = s.id\n      LEFT JOIN users agent ON c.agent_id = agent.id\n      WHERE 1=1\n     AND c.status = $1 ORDER BY COALESCE(last_message_time, c.created_at) DESC LIMIT 50","timestamp":"2025-11-09 13:19:19"}
{"code":"42703","file":"parse_relation.c","length":118,"level":"error","line":"3665","message":"GetConversations hatası: column \"last_message_time\" does not exist","name":"error","position":"690","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"last_message_time\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async getConversations (/app/src/controllers/chat.controller.js:57:20)","timestamp":"2025-11-09 13:19:19"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:22:26"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:22:26"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:24:33"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:24:33"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 13:24:44"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 13:24:48"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 13:25:04"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 13:25:06"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 13:25:14"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:25:46"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:25:46"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","service":"asistr-backend","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:70:17)\n    at authMiddleware (/app/src/middleware/auth.middleware.js:21:25)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at param (/app/node_modules/express/lib/router/index.js:365:14)\n    at param (/app/node_modules/express/lib/router/index.js:376:14)\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:421:3)","timestamp":"2025-11-09 13:26:14"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:31:47"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:31:47"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'offer', $4)","timestamp":"2025-11-09 13:31:57"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC offer hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:533:7)","timestamp":"2025-11-09 13:31:57"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:31:57"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:31:57"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:31:57"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:31:57"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:31:57"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:31:57"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:31:57"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:31:57"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:31:58"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:31:58"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'offer', $4)","timestamp":"2025-11-09 13:32:26"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC offer hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:533:7)","timestamp":"2025-11-09 13:32:26"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:32:26"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:32:26"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:32:26"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:32:26"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:32:27"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:32:27"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:32:27"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:32:27"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:32:27"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:32:27"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:38:59"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:38:59"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'offer', $4)","timestamp":"2025-11-09 13:39:18"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC offer hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:533:7)","timestamp":"2025-11-09 13:39:18"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:39:18"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:39:18"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:39:18"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:39:18"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:39:18"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:39:18"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:39:18"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:39:18"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:39:18"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:39:18"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'offer', $4)","timestamp":"2025-11-09 13:39:42"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC offer hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:533:7)","timestamp":"2025-11-09 13:39:42"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:39:42"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:39:42"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:39:42"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:39:42"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:39:42"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:39:42"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:39:42"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:39:42"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:39:42"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:39:42"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:46:52"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:46:52"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'offer', $4)","timestamp":"2025-11-09 13:47:20"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC offer hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:533:7)","timestamp":"2025-11-09 13:47:20"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:47:20"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:47:20"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:47:20"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:47:20"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:47:20"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:47:20"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:47:20"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:47:20"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:47:21"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:47:21"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:50:58"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:50:58"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'offer', $4)","timestamp":"2025-11-09 13:51:25"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC offer hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:533:7)","timestamp":"2025-11-09 13:51:25"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:51:25"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:51:25"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:51:25"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:51:25"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:51:26"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:51:26"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:51:26"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:51:26"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:51:26"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:51:26"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:56:39"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:56:39"}
{"level":"error","message":"Ollama generateEmbedding hatası: Ollama embedding hatası: 404","service":"asistr-backend","stack":"Error: Ollama embedding hatası: 404\n    at generateEmbedding (/app/src/rag/ollama.service.js:67:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async searchKnowledge (/app/src/rag/knowledge.service.js:98:28)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:177:31)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:57:53"}
{"level":"error","message":"Ollama generateChatResponse hatası: Ollama API hatası: 404","service":"asistr-backend","stack":"Error: Ollama API hatası: 404\n    at generateChatResponse (/app/src/rag/ollama.service.js:158:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateRagResponseStream (/app/src/rag/rag.service.js:232:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:422:28)","timestamp":"2025-11-09 13:57:53"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'offer', $4)","timestamp":"2025-11-09 13:58:17"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC offer hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:533:7)","timestamp":"2025-11-09 13:58:17"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:58:17"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:58:17"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:58:17"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:58:17"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:58:18"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:58:18"}
{"error":"relation \"webrtc_signaling\" does not exist","level":"error","message":"Query hatası:","service":"asistr-backend","text":"INSERT INTO webrtc_signaling (voice_call_id, from_type, from_id, signal_type, signal_data)\n         VALUES ($1, $2, $3, 'ice-candidate', $4)","timestamp":"2025-11-09 13:58:18"}
{"code":"42P01","file":"parse_relation.c","length":115,"level":"error","line":"1392","message":"WebRTC ICE candidate hatası: relation \"webrtc_signaling\" does not exist","name":"error","position":"13","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"webrtc_signaling\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:32:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:599:7)","timestamp":"2025-11-09 13:58:18"}
