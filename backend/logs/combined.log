{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:11:33"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:11:33"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:11:33 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:11:33"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:11:37"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:11:37"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:11:37 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:11:37"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 08:16:47"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:16:47"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:16:47"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:16:47"}
{"0":"f","1":"e","10":"e","11":"d","2":"t","3":"c","4":"h","5":" ","6":"f","7":"a","8":"i","9":"l","level":"warn","message":"Ollama eri≈üilemiyor:","service":"asistr-backend","timestamp":"2025-11-12 08:16:52"}
{"level":"warn","message":"‚ö†Ô∏è Ollama servisi eri≈üilemiyor - AI yanƒ±tlar devre dƒ±≈üƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:16:52"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 08:16:52"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 08:16:52"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 08:16:52"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:16:52"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 08:16:52"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:16:54"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:16:54"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:16:54 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:16:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:16:58"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:16:58"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:16:58 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:16:58"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:17:03"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:17:03"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:17:03 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:17:03"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:17:09"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:17:09"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:17:09 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:17:09"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:17:14"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:17:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:17:14 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:17:14"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:17:18"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:17:18"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:17:18 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:17:18"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:17:24"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:17:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:17:24 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:17:24"}
{"level":"info","message":"Starting main database migration...","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úì pgvector extension enabled","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úì Sites table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úì Users table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úì Visitors table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úì Conversations table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úì Messages table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úì Knowledge base table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úì Indexes created","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úì Default site created","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úì Default admin user created (email: admin@asistr.com, password: admin123)","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úÖ Main database migration completed successfully!","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"Sesli g√∂r√º≈üme migration ba≈ülatƒ±lƒ±yor...","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úÖ voice_calls tablosu olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úÖ call_queue tablosu olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úÖ agent_call_availability tablosu olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úÖ webrtc_signaling tablosu olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úÖ call_recordings tablosu olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"‚úÖ ƒ∞ndeksler olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 08:17:25"}
{"level":"info","message":"Starting advanced chat features migration...","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úì Canned responses table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úì Chat tags table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úì Conversation tags table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úì Conversation notes table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úì Feedback fields added to conversations","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úì Chat transfers table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úì Indexes created","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úì Default canned responses created","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úì Default tags created","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úÖ Advanced chat features migration completed successfully!","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"Chat triggers migration ba≈ülatƒ±lƒ±yor...","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úÖ chat_triggers tablosu olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úÖ trigger_statistics tablosu olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úÖ ƒ∞ndeksler olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úÖ √ñrnek trigger'lar eklendi","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"Starting real-time features enhancement migration...","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úì Agents presence table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úì Typing status table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úì Visitor tracking fields added","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úì Indexes created","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úì Default presence created for 1 agents","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úÖ Real-time features enhancement migration completed successfully!","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"Starting multi-agent migration...","service":"asistr-backend","timestamp":"2025-11-12 08:17:26"}
{"level":"info","message":"‚úì Departments table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Users table updated with agent fields","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Agents presence table created/verified","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Routing config table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Conversation assignments table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Agent availability table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Indexes created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Default departments created for existing sites","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Default routing configs created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úÖ Multi-agent migration completed successfully!","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"Starting widget customization migration...","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Widget settings table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Default widget settings created for 1 sites","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Indexes created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úÖ Widget customization migration completed successfully!","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"Starting notification system migration...","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Notification preferences table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Push subscriptions table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Notification logs table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Default notification preferences created for 1 users","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Indexes created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úÖ Notification system migration completed successfully!","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"Starting visitor tracking & analytics migration...","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Visitor tracking fields added","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Visitor sessions table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Page views table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Visitor events table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Analytics summary table created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úì Indexes created","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"level":"info","message":"‚úÖ Visitor tracking & analytics migration completed successfully!","service":"asistr-backend","timestamp":"2025-11-12 08:17:27"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:17:29"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:17:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:17:29 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:17:29"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:17:34"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:17:34"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:17:34 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:17:34"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:17:39"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:17:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:17:39 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:17:39"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:17:43"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:17:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:17:43 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:17:43"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:17:47"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:17:47"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:17:47"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:17:47"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:17:49"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:17:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:17:49 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:17:49"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:17:53"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:17:53"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:17:53 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:17:53"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:17:58"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:17:58"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:17:58 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:17:58"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:18:03"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:18:03"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:03 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:03"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:18:09"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:18:09"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:09 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:09"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:18:14"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:18:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:14 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:14"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: 0zRbs0dgO5oA4mqnAAAB","service":"asistr-backend","timestamp":"2025-11-12 08:18:20"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: WinONXuLk_UwsrwVAAAD","service":"asistr-backend","timestamp":"2025-11-12 08:18:20"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:18:20"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:18:20"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:18:20"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:18:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:21 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:21"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:21 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:21"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 08:18:21"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 08:18:21"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:21 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:21"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 08:18:21"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 08:18:21"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:21 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:21"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:18:21"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:18:21"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:18:21"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:18:21"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:21 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 20 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:21"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:21 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 20 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:21"}
{"0":"f","1":"e","10":"e","11":"d","2":"t","3":"c","4":"h","5":" ","6":"f","7":"a","8":"i","9":"l","level":"warn","message":"Ollama eri≈üilemiyor:","service":"asistr-backend","timestamp":"2025-11-12 08:18:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:26 +0000] \"GET /api/rag/health HTTP/1.1\" 200 101 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:26"}
{"0":"f","1":"e","10":"e","11":"d","2":"t","3":"c","4":"h","5":" ","6":"f","7":"a","8":"i","9":"l","level":"warn","message":"Ollama eri≈üilemiyor:","service":"asistr-backend","timestamp":"2025-11-12 08:18:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:26 +0000] \"GET /api/rag/health HTTP/1.1\" 200 101 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:26"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:18:26"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:18:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:26 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:26"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 08:18:26"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 08:18:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:26 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:26"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:18:26"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:18:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:26 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:26"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 08:18:26"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 08:18:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:26 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:26"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:18:31"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:18:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:31 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:32 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:32"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:32 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 20 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:32"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:34 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:34"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:34 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:34"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:34 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:34"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:34 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 20 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:34"}
{"0":"f","1":"e","10":"e","11":"d","2":"t","3":"c","4":"h","5":" ","6":"f","7":"a","8":"i","9":"l","level":"warn","message":"Ollama eri≈üilemiyor:","service":"asistr-backend","timestamp":"2025-11-12 08:18:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:39 +0000] \"GET /api/rag/health HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:39"}
{"0":"f","1":"e","10":"e","11":"d","2":"t","3":"c","4":"h","5":" ","6":"f","7":"a","8":"i","9":"l","level":"warn","message":"Ollama eri≈üilemiyor:","service":"asistr-backend","timestamp":"2025-11-12 08:18:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:39 +0000] \"GET /api/rag/health HTTP/1.1\" 200 101 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:39"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:18:39"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:18:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:39 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:39"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 08:18:39"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 08:18:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:39 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:39"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:18:39"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:18:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:39 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:39"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 08:18:39"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 08:18:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:39 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:39"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:18:44"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:18:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:44 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:44"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:18:47"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:18:47"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:18:47"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:18:47"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:18:49"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:18:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:49 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:49"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:18:54"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:18:54"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:54 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:18:59"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:18:59"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:18:59 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:18:59"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:19:04"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:19:04"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:19:04 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:19:04"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:19:09"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:19:09"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:19:09 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:19:09"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:19:14"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:19:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:19:14 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:19:14"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:19:19"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:19:19"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:19:19 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:19:19"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:19:24"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:19:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:19:24 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:19:24"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:19:29"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:19:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:19:29 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:19:29"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:19:34"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:19:34"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:19:34 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:19:34"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:19:39"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:19:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:19:39 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:19:39"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:19:44"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:19:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:19:44 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:19:44"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:19:47"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:19:47"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:19:47"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:19:47"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:19:49"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:19:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:19:49 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:19:49"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:19:54"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:19:54"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:19:54 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:19:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:19:59"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:19:59"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:19:59 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:19:59"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:20:04"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:20:04"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:20:04 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:20:04"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:20:09"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:20:09"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:20:09 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:20:09"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:20:14"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:20:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:20:14 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:20:14"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:20:19"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:20:19"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:20:19 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:20:19"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:20:24"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:20:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:20:24 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:20:24"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:20:29"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:20:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:20:29 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:20:29"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:20:34"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:20:34"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:20:34 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:20:34"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:20:39"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:20:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:20:39 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:20:39"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:20:44"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:20:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:20:44 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:20:44"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:20:47"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:20:47"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:20:47"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:20:47"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:20:49"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:20:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:20:49 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:20:49"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:20:54"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:20:54"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:20:54 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:20:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:20:59"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:20:59"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:20:59 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:20:59"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:21:04"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:21:04"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:21:04 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:21:04"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:21:09"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:21:09"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:21:09 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:21:09"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:21:14"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:21:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:21:14 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:21:14"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:21:19"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:21:19"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:21:19 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:21:19"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:21:24"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:21:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:21:24 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:21:24"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:21:29"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:21:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:21:29 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:21:29"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:21:34"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:21:34"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:21:34 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:21:34"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:21:39"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:21:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:21:39 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:21:39"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:21:44"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:21:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:21:44 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:21:44"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:21:47"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:21:47"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:21:47"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:21:47"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:21:49"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:21:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:21:49 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:21:49"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:21:54"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:21:54"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:21:54 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:21:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:21:59"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:21:59"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:21:59 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:21:59"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:22:04"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:22:04"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:22:04 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:22:04"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:22:09"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:22:09"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:22:09 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:22:09"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:22:14"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:22:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:22:14 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:22:14"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:22:19"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:22:19"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:22:19 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:22:19"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:22:24"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:22:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:22:24 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:22:24"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:22:29"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:22:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:22:29 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:22:29"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:22:34"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:22:34"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:22:34 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:22:34"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:22:39"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:22:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:22:39 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:22:39"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:22:44"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:22:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:22:44 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:22:44"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:22:47"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:22:47"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:22:47"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:22:47"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:22:49"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:22:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:22:49 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:22:49"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:22:54"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:22:54"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:22:54 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:22:54"}
{"level":"info","message":"SIGTERM sinyali alƒ±ndƒ±. Sunucu kapatƒ±lƒ±yor...","service":"asistr-backend","timestamp":"2025-11-12 08:22:57"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 08:22:59"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:22:59"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:22:59"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:22:59"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 08:22:59"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 08:22:59"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 08:22:59"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 08:22:59"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:22:59"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 08:22:59"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: QQcrNjA-8xqM0HU3AAAB","service":"asistr-backend","timestamp":"2025-11-12 08:22:59"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:22:59"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:22:59"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:22:59 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:22:59"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: cXDPWPPw6z4icY4dAAAD","service":"asistr-backend","timestamp":"2025-11-12 08:23:00"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:23:00"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:23:00"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:23:00"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:23:00"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:23:00"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:23:00"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:23:00"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:23:00"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:23:04"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:23:04"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:23:04 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:23:04"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:23:09"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:23:09"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:23:09 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:23:09"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:23:14"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:23:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:23:14 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:23:14"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:23:19"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:23:19"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:23:19 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:23:19"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:23:24"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:23:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:23:24 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:23:24"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:23:29"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:23:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:23:29 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:23:29"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:23:34"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:23:34"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:23:34 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:23:34"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:23:39"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:23:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:23:39 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:23:39"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:23:44"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:23:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:23:44 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:23:44"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:23:49"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:23:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:23:49 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:23:49"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:23:54"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:23:54"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:23:54 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:23:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:23:59"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:23:59"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:23:59"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:23:59"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:23:59"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:23:59"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:23:59 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:23:59"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:24:04"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:24:04"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:04 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:04"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:24:09"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:24:09"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:09 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:09"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:24:14"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:24:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:14 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:14"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:24:19"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:24:19"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:19 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:19"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:24:24"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:24:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:24 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:24"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:24:29"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:24:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:29 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:29"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:24:34"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:24:34"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:34 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:34"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:24:39"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:24:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:39 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:39"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:24:44"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:24:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:44 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:44"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:24:49"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:24:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:49 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:49"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: UmP_6IBTuQ4-ZQEiAAAF","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: C5U32r0lNs_uu_JWAAAH","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:53 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 08:24:53"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:53 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 08:24:53"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:53 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:53 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:53 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:53 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 20 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:24:53"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:24:53"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:24:53"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:53 +0000] \"GET /api/rag/health HTTP/1.1\" 200 98 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:53 +0000] \"GET /api/rag/health HTTP/1.1\" 200 98 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:24:53"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:53 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:24:53"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:53 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 08:24:53"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:53 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 08:24:53"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 08:24:53"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:53 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:53"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:24:54"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:24:54"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:54 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:54"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: QQcrNjA-8xqM0HU3AAAB","service":"asistr-backend","timestamp":"2025-11-12 08:24:56"}
{"level":"info","message":"Agent baƒülantƒ±sƒ± kesildi: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df (Sebep: transport close)","service":"asistr-backend","timestamp":"2025-11-12 08:24:56"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: cXDPWPPw6z4icY4dAAAD","service":"asistr-backend","timestamp":"2025-11-12 08:24:56"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:58 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:58"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:24:58 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 20 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:24:58"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:24:59"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:24:59"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:24:59"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:24:59"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: xmwl4m1vr2Zn6dRcAAAB","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:25:27"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: eLxuRVwY6a7XADj0AAAD","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:25:27"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:25:27"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:25:27"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: uR-fl1eIo-faQbyiAAAB","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:25:35"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: NSSjioDDWoNbvRJ7AAAD","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:25:35"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:25:35"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:25:35"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: eOqPNRF64DoFrJYDAAAB","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: bVyFKUFo3fcvR6qbAAAD","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:25:59 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:25:59"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:25:59"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 08:25:59"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:25:59 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:25:59"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:25:59"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:25:59"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: lDEXSv2B_gz3-46hAAAF","service":"asistr-backend","timestamp":"2025-11-12 08:26:00"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:26:00"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:26:00"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: Zl941qAYB43KQV-WAAAH","service":"asistr-backend","timestamp":"2025-11-12 08:26:00"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:26:00"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:26:00"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:26:00"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:26:00"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:26:00"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:26:00"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 08:26:54"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:26:54"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:26:54"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:26:54"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 08:26:54"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 08:26:54"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 08:26:54"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 08:26:54"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:26:54"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 08:26:54"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: 47Uk_fcNSaajMoNTAAAB","service":"asistr-backend","timestamp":"2025-11-12 08:26:54"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: ck1HOCz74a7JnQTgAAAD","service":"asistr-backend","timestamp":"2025-11-12 08:26:55"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: O5CwytGDRgGOsDwvAAAF","service":"asistr-backend","timestamp":"2025-11-12 08:26:55"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:26:55"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:26:55"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:26:55"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:26:55"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:26:55"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:26:55"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: 4U0-CJ-lkbXwEneCAAAH","service":"asistr-backend","timestamp":"2025-11-12 08:26:55"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:26:55"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:26:55"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:26:55"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:26:55"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:26:55"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:26:55"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:26:55"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:26:55"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:26:55"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:26:55"}
{"level":"error","message":"Login hatasƒ±: Illegal arguments: string, undefined","service":"asistr-backend","stack":"Error: Illegal arguments: string, undefined\n    at _async (/app/node_modules/bcryptjs/dist/bcrypt.js:286:46)\n    at /app/node_modules/bcryptjs/dist/bcrypt.js:307:17\n    at new Promise (<anonymous>)\n    at bcrypt.compare (/app/node_modules/bcryptjs/dist/bcrypt.js:306:20)\n    at login (/app/src/controllers/auth.controller.js:92:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-11-12 08:27:13"}
{"level":"info","message":"::1 - - [12/Nov/2025:08:27:13 +0000] \"POST /api/auth/login HTTP/1.1\" 500 47 \"-\" \"axios/1.13.2\"","service":"asistr-backend","timestamp":"2025-11-12 08:27:13"}
{"level":"info","message":"::1 - - [12/Nov/2025:08:27:13 +0000] \"GET /api/auth/me HTTP/1.1\" 401 29 \"-\" \"axios/1.13.2\"","service":"asistr-backend","timestamp":"2025-11-12 08:27:13"}
{"level":"info","message":"::1 - - [12/Nov/2025:08:27:13 +0000] \"GET /api/chat HTTP/1.1\" 401 29 \"-\" \"axios/1.13.2\"","service":"asistr-backend","timestamp":"2025-11-12 08:27:13"}
{"level":"info","message":"::1 - - [12/Nov/2025:08:27:13 +0000] \"GET /api/canned HTTP/1.1\" 401 29 \"-\" \"axios/1.13.2\"","service":"asistr-backend","timestamp":"2025-11-12 08:27:13"}
{"level":"info","message":"::1 - - [12/Nov/2025:08:27:13 +0000] \"GET /api/rag/knowledge HTTP/1.1\" 401 29 \"-\" \"axios/1.13.2\"","service":"asistr-backend","timestamp":"2025-11-12 08:27:13"}
{"level":"info","message":"::1 - - [12/Nov/2025:08:27:13 +0000] \"GET /api/rag/health HTTP/1.1\" 401 29 \"-\" \"axios/1.13.2\"","service":"asistr-backend","timestamp":"2025-11-12 08:27:13"}
{"level":"info","message":"::1 - - [12/Nov/2025:08:27:13 +0000] \"GET /api/agents HTTP/1.1\" 401 29 \"-\" \"axios/1.13.2\"","service":"asistr-backend","timestamp":"2025-11-12 08:27:13"}
{"level":"info","message":"::1 - - [12/Nov/2025:08:27:13 +0000] \"GET /api/departments HTTP/1.1\" 401 29 \"-\" \"axios/1.13.2\"","service":"asistr-backend","timestamp":"2025-11-12 08:27:13"}
{"level":"info","message":"::1 - - [12/Nov/2025:08:27:13 +0000] \"GET /api/analytics/dashboard HTTP/1.1\" 401 29 \"-\" \"axios/1.13.2\"","service":"asistr-backend","timestamp":"2025-11-12 08:27:13"}
{"level":"info","message":"::1 - - [12/Nov/2025:08:27:13 +0000] \"GET /api/queue/status HTTP/1.1\" 401 29 \"-\" \"axios/1.13.2\"","service":"asistr-backend","timestamp":"2025-11-12 08:27:13"}
{"level":"info","message":"::1 - - [12/Nov/2025:08:27:13 +0000] \"GET /api/presence/agents HTTP/1.1\" 401 29 \"-\" \"axios/1.13.2\"","service":"asistr-backend","timestamp":"2025-11-12 08:27:13"}
{"level":"info","message":"::1 - - [12/Nov/2025:08:27:13 +0000] \"GET /api/widget/sites HTTP/1.1\" 401 29 \"-\" \"axios/1.13.2\"","service":"asistr-backend","timestamp":"2025-11-12 08:27:13"}
{"level":"info","message":"::1 - - [12/Nov/2025:08:27:13 +0000] \"GET /api/voice/active HTTP/1.1\" 401 29 \"-\" \"axios/1.13.2\"","service":"asistr-backend","timestamp":"2025-11-12 08:27:13"}
{"level":"info","message":"::1 - - [12/Nov/2025:08:27:13 +0000] \"GET /api/notifications/preferences HTTP/1.1\" 401 29 \"-\" \"axios/1.13.2\"","service":"asistr-backend","timestamp":"2025-11-12 08:27:13"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:27:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:27:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:27:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:27:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:28:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:28:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:28:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:28:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:29:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:29:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:29:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:29:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:30:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:30:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:30:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:30:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:31:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:31:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:31:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:31:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:32:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:32:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:32:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:32:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:33:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:33:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:33:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:33:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:34:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:34:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:34:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:34:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:35:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:35:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:35:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:35:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:36:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:36:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:36:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:36:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:37:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:37:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:37:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:37:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:38:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:38:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:38:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:38:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:39:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:39:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:39:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:39:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:40:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:40:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:40:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:40:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:41:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:41:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:41:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:41:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:42:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:42:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:42:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:42:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:43:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:43:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:43:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:43:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:44:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:44:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:44:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:44:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:45:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:45:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:45:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:45:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:46:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:46:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:46:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:46:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:47:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:47:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:47:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:47:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:48:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:48:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:48:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:48:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:49:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:49:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:49:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:49:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:50:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:50:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:50:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:50:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:51:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:51:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:51:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:51:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:52:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:52:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:52:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:52:54"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:53:54"}
{"code":"42P01","file":"parse_relation.c","length":109,"level":"error","line":"1392","message":"HandleQueueTimeouts error: relation \"chat_queue\" does not exist","name":"error","position":"45","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:53:54"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:53:54"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:53:54"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:54:20 +0000] \"GET /api/rag/health HTTP/1.1\" 401 29 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:54:20"}
{"level":"info","message":"Kullanƒ±cƒ± giri≈üi: admin@asistr.com","service":"asistr-backend","timestamp":"2025-11-12 08:54:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:54:20 +0000] \"POST /api/auth/login HTTP/1.1\" 200 533 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:54:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:54:20 +0000] \"GET /api/auth/me HTTP/1.1\" 200 223 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:54:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:54:20 +0000] \"GET /api/chat HTTP/1.1\" 200 20 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:54:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:54:20 +0000] \"GET /api/rag/knowledge HTTP/1.1\" 200 16 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:54:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:54:20 +0000] \"GET /api/agents HTTP/1.1\" 200 330 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:54:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:54:20 +0000] \"GET /api/departments HTTP/1.1\" 200 277 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:54:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:54:20 +0000] \"GET /api/canned HTTP/1.1\" 200 1872 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:54:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:54:20 +0000] \"GET /api/analytics/dashboard HTTP/1.1\" 200 193 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:54:20"}
{"error":"relation \"chat_queue\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        cq.*,\n        v.name as visitor_name,\n        c.id as conversation_id\n      FROM chat_queue cq\n      LEFT JOIN visitors v ON cq.visitor_id = v.id\n      LEFT JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting'\n     ORDER BY cq.priority DESC, cq.entered_at ASC","timestamp":"2025-11-12 08:54:20"}
{"code":"42P01","file":"parse_relation.c","length":110,"level":"error","line":"1392","message":"GetQueueStatus error: relation \"chat_queue\" does not exist","name":"error","position":"105","routine":"parserOpenTable","service":"asistr-backend","severity":"ERROR","stack":"error: relation \"chat_queue\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getQueueStatus (/app/src/controllers/queue.controller.js:36:24)","timestamp":"2025-11-12 08:54:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:54:20 +0000] \"GET /api/queue/status HTTP/1.1\" 500 40 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:54:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:54:20 +0000] \"GET /api/presence/agents HTTP/1.1\" 200 343 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:54:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:54:20 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:54:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:54:20 +0000] \"GET /api/voice/active HTTP/1.1\" 200 12 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:54:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:54:20 +0000] \"GET /api/notifications/preferences HTTP/1.1\" 200 466 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:54:20"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 08:54:52"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:54:52"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:54:52"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:54:52"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 08:54:52"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 08:54:52"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 08:54:52"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 08:54:52"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:54:52"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 08:54:52"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: B_d7SObG2cY3dYbhAAAB","service":"asistr-backend","timestamp":"2025-11-12 08:54:52"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: FczcLi-w_C0MpmLnAAAD","service":"asistr-backend","timestamp":"2025-11-12 08:54:53"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: otRqiRJM6091NRyxAAAF","service":"asistr-backend","timestamp":"2025-11-12 08:54:53"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: _xcLChl6cud5IGSFAAAH","service":"asistr-backend","timestamp":"2025-11-12 08:54:53"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:54:53"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:54:53"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:54:53"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:54:53"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:54:53"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:54:53"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:54:53"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:54:53"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:54:53"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:54:53"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:54:53"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:54:53"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:54:53"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:54:53"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:54:53"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:54:53"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 08:54:59"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:54:59"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:54:59"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:54:59"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 08:54:59"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 08:54:59"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 08:54:59"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 08:54:59"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:54:59"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 08:54:59"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: 4Gj15OIy1ovrVQ0vAAAB","service":"asistr-backend","timestamp":"2025-11-12 08:55:00"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: IejERdKpqn1czBBBAAAD","service":"asistr-backend","timestamp":"2025-11-12 08:55:01"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:55:01"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:55:01"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:55:01"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:55:01"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:55:01"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:55:01"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: klOwp6yGtGAygtbmAAAF","service":"asistr-backend","timestamp":"2025-11-12 08:55:01"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:55:01"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:55:01"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: Qk2GuU1Z6zNofVt2AAAH","service":"asistr-backend","timestamp":"2025-11-12 08:55:01"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:55:01"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:55:01"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:55:01"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:55:01"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:55:01"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:55:01"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:55:01"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:55:01"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 08:55:19"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:55:19"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:55:19"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:55:19"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 08:55:19"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 08:55:19"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 08:55:19"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 08:55:19"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:55:19"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 08:55:19"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: RKjpx47HWVViU29wAAAB","service":"asistr-backend","timestamp":"2025-11-12 08:55:20"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: s8pSOz9c1ZQ4OEKNAAAD","service":"asistr-backend","timestamp":"2025-11-12 08:55:20"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: bl_e-nRiCMtLYOaGAAAF","service":"asistr-backend","timestamp":"2025-11-12 08:55:20"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: -zOfQTLrD2wqzZxdAAAH","service":"asistr-backend","timestamp":"2025-11-12 08:55:21"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:55:21"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:55:21"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:55:21"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:55:21"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:55:21"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:55:21"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:55:21"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:55:21"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:55:21"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:55:21"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:55:21"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:55:21"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:55:21"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:55:21"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:55:21"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:55:21"}
{"level":"info","message":"SIGTERM sinyali alƒ±ndƒ±. Sunucu kapatƒ±lƒ±yor...","service":"asistr-backend","timestamp":"2025-11-12 08:55:53"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 08:55:55"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:55:55"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:55:55"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:55:55"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 08:55:55"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 08:55:55"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 08:55:55"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 08:55:55"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 08:55:55"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 08:55:55"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: suTSvhqyr74e8qrxAAAB","service":"asistr-backend","timestamp":"2025-11-12 08:55:56"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: K3u6SoSFdNzu82jcAAAD","service":"asistr-backend","timestamp":"2025-11-12 08:55:56"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: pd5ihgG4lSUAoYQwAAAF","service":"asistr-backend","timestamp":"2025-11-12 08:55:56"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: u62S0tDK29tQS9IXAAAH","service":"asistr-backend","timestamp":"2025-11-12 08:55:56"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:55:56"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:55:56"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:55:56"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:55:56"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:55:56"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:55:56"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 08:55:56"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 08:55:56"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:55:56"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:55:56"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:55:56"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:55:56"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:55:56"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:55:56"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 08:55:56"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 08:55:56"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:56:02 +0000] \"GET /api/rag/health HTTP/1.1\" 200 98 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:56:02"}
{"level":"info","message":"Kullanƒ±cƒ± giri≈üi: admin@asistr.com","service":"asistr-backend","timestamp":"2025-11-12 08:56:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:56:02 +0000] \"POST /api/auth/login HTTP/1.1\" 200 533 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:56:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:56:02 +0000] \"GET /api/auth/me HTTP/1.1\" 200 223 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:56:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:56:02 +0000] \"GET /api/chat HTTP/1.1\" 200 20 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:56:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:56:02 +0000] \"GET /api/rag/knowledge HTTP/1.1\" 200 16 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:56:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:56:02 +0000] \"GET /api/agents HTTP/1.1\" 200 330 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:56:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:56:02 +0000] \"GET /api/departments HTTP/1.1\" 200 277 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:56:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:56:02 +0000] \"GET /api/canned HTTP/1.1\" 200 1872 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:56:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:56:02 +0000] \"GET /api/analytics/dashboard HTTP/1.1\" 200 193 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:56:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:56:02 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:56:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:56:02 +0000] \"GET /api/presence/agents HTTP/1.1\" 200 343 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:56:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:56:02 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:56:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:56:02 +0000] \"GET /api/voice/active HTTP/1.1\" 200 12 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:56:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:08:56:02 +0000] \"GET /api/notifications/preferences HTTP/1.1\" 200 466 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 08:56:02"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:56:55"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:56:55"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:56:55"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:56:55"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:57:55"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:57:55"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:57:55"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:57:55"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:58:55"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:58:55"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:58:55"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:58:55"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 08:59:55"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 08:59:55"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 08:59:55"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 08:59:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:00:52 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:00:52"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:00:55"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:00:55"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:00:55"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:00:55"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:01:55"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:01:55"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:01:55"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:01:55"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:02:55"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:02:55"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:02:55"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:02:55"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:03:55"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:03:55"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:03:55"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:03:55"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:04:55"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:04:55"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:04:55"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:04:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:04:57 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:04:57"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:04:57 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:04:57"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:00 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:00"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:00 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:00"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:00 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:00"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:00 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:00"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:09 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:09"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:09 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 200 15 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:09"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:12 +0000] \"GET /api/canned HTTP/1.1\" 200 1872 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:12"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:12 +0000] \"GET /api/canned HTTP/1.1\" 200 1872 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:12"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:14 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:14 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:14 +0000] \"GET /api/analytics/online-visitors?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 15 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:14 +0000] \"GET /api/analytics/dashboard?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 193 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:14 +0000] \"GET /api/analytics/device-stats?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 50 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:14 +0000] \"GET /api/analytics/agent-performance?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 18 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:14 +0000] \"GET /api/analytics/top-pages?period=7d&limit=10&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 12 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:14 +0000] \"GET /api/analytics/traffic-sources?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 14 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:14 +0000] \"GET /api/analytics/agent-performance?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 18 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:14 +0000] \"GET /api/analytics/device-stats?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 50 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:14 +0000] \"GET /api/analytics/traffic-sources?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 14 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:14 +0000] \"GET /api/analytics/top-pages?period=7d&limit=10&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 12 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:14 +0000] \"GET /api/analytics/online-visitors?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 15 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:14"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:14 +0000] \"GET /api/analytics/dashboard?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 193 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:14"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-12 09:05:20"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-12 09:05:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:20 +0000] \"GET /api/notifications/preferences HTTP/1.1\" 500 39 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:20"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-12 09:05:20"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-12 09:05:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:20 +0000] \"GET /api/notifications/preferences HTTP/1.1\" 500 39 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:22 +0000] \"GET /api/departments HTTP/1.1\" 200 277 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:22"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:22 +0000] \"GET /api/agents HTTP/1.1\" 200 330 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:22"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:22 +0000] \"GET /api/agents HTTP/1.1\" 200 330 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:22"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:22 +0000] \"GET /api/departments HTTP/1.1\" 200 277 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:22"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:23 +0000] \"GET /api/departments HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:23"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:23 +0000] \"GET /api/departments HTTP/1.1\" 200 277 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:23"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:26 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:26 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:26 +0000] \"GET /api/widget-settings?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 1265 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:26 +0000] \"GET /api/widget-settings?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 1265 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:28 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:28 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:28 +0000] \"GET /api/rag/knowledge?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 16 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:28 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:28 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:31 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:31 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:31 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:31 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 20 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:31 +0000] \"GET /api/rag/health HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:31 +0000] \"GET /api/rag/health HTTP/1.1\" 200 98 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:31 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:31 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:31"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 09:05:31"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 09:05:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:31 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:31"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 09:05:31"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 09:05:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:31 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:36 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:36"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:41 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:41"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: pd5ihgG4lSUAoYQwAAAF","service":"asistr-backend","timestamp":"2025-11-12 09:05:41"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: suTSvhqyr74e8qrxAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:05:41"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: K3u6SoSFdNzu82jcAAAD","service":"asistr-backend","timestamp":"2025-11-12 09:05:41"}
{"level":"info","message":"Agent baƒülantƒ±sƒ± kesildi: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df (Sebep: transport close)","service":"asistr-backend","timestamp":"2025-11-12 09:05:41"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: u62S0tDK29tQS9IXAAAH","service":"asistr-backend","timestamp":"2025-11-12 09:05:41"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: JkEQfJZKeMbMx3jZAAAJ","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 09:05:43"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:43 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:43 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:43 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: 3D6DFt3J4eezZkylAAAL","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:43 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 09:05:43"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:43 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:43 +0000] \"GET /api/rag/health HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:05:43"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:05:43"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:05:43"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:43 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 20 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:43 +0000] \"GET /api/rag/health HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:43 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:43 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 09:05:43"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:43 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 09:05:43"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:43 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:44 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:44 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 20 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:45 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:45"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:45 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:45"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:45 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:45"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:45 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:45"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:45 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:45"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:45 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:45"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:47 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:47 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 200 15 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/canned HTTP/1.1\" 200 1872 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/canned HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/analytics/dashboard?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/analytics/dashboard?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 193 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/analytics/agent-performance?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/analytics/online-visitors?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 15 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/analytics/top-pages?period=7d&limit=10&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 12 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/analytics/traffic-sources?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 14 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/analytics/device-stats?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 50 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/analytics/agent-performance?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 18 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/analytics/top-pages?period=7d&limit=10&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/analytics/online-visitors?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/analytics/device-stats?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:48 +0000] \"GET /api/analytics/traffic-sources?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:48"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-12 09:05:49"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-12 09:05:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:49 +0000] \"GET /api/notifications/preferences HTTP/1.1\" 500 39 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:49"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-12 09:05:49"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-12 09:05:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:49 +0000] \"GET /api/notifications/preferences HTTP/1.1\" 500 39 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:50 +0000] \"GET /api/agents HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:50"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:50 +0000] \"GET /api/departments HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:50"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:50 +0000] \"GET /api/agents HTTP/1.1\" 200 330 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:50"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:50 +0000] \"GET /api/departments HTTP/1.1\" 200 277 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:50"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:51 +0000] \"GET /api/departments HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:51"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:51 +0000] \"GET /api/departments HTTP/1.1\" 200 277 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:51"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:51 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:51"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:51 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:51"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:51 +0000] \"GET /api/widget-settings?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:51"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:51 +0000] \"GET /api/widget-settings?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 1265 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:51"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:52 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:52"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:52 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:52"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:52 +0000] \"GET /api/rag/knowledge?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:52"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:52 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:52"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:52 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:52"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:54 +0000] \"GET /api/rag/health HTTP/1.1\" 200 98 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:54"}
{"level":"info","message":"Kullanƒ±cƒ± giri≈üi: admin@asistr.com","service":"asistr-backend","timestamp":"2025-11-12 09:05:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:55 +0000] \"POST /api/auth/login HTTP/1.1\" 200 533 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:55 +0000] \"GET /api/auth/me HTTP/1.1\" 200 223 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:55 +0000] \"GET /api/chat HTTP/1.1\" 200 20 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:55 +0000] \"GET /api/rag/knowledge HTTP/1.1\" 200 16 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:55 +0000] \"GET /api/agents HTTP/1.1\" 200 330 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:55 +0000] \"GET /api/departments HTTP/1.1\" 200 277 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:55 +0000] \"GET /api/canned HTTP/1.1\" 200 1872 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:55 +0000] \"GET /api/analytics/dashboard HTTP/1.1\" 200 193 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:55 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:55 +0000] \"GET /api/presence/agents HTTP/1.1\" 200 343 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:55 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:55 +0000] \"GET /api/voice/active HTTP/1.1\" 200 12 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:05:55 +0000] \"GET /api/notifications/preferences HTTP/1.1\" 200 466 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:05:55"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:05:55"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:05:55"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:05:55"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:05:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:06:10 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:06:10"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:06:55"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:06:55"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:06:55"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:06:55"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:07:55"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:07:55"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:07:55"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:07:55"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:08:55"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:08:55"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:08:55"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:08:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:09:44 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:09:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:09:44 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 20 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:09:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:09:45 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:09:45"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:09:45 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:09:45"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:09:46 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:09:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:09:46 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:09:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:09:46 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:09:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:09:46 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:09:46"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:09:55"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:09:55"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:09:55"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:09:55"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:10:16 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:10:16"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:10:16 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:10:16"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 09:10:28"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:10:28"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:10:28"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:10:28"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 09:10:28"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 09:10:28"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 09:10:28"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 09:10:28"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:10:28"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 09:10:28"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: XyOz5UcmL6CxwXWDAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:10:29"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:10:29"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:10:29"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:10:29"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:10:29"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: tr6CzXLnUtmBflhBAAAD","service":"asistr-backend","timestamp":"2025-11-12 09:10:30"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:10:30"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:10:30"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:10:30"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:10:30"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:10:46 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:10:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:10:46 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:10:46"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 09:11:04"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:11:04"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:11:04"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:11:04"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 09:11:04"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 09:11:04"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 09:11:04"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 09:11:04"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:11:04"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 09:11:04"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: ilPZv-NncC0rewU4AAAB","service":"asistr-backend","timestamp":"2025-11-12 09:11:04"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:11:04"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:11:04"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:11:04"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:11:04"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: afD1eF3P6C-7JE2cAAAD","service":"asistr-backend","timestamp":"2025-11-12 09:11:05"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:11:05"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:11:05"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:11:05"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:11:05"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:11:16 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:11:16"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:11:16 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:11:16"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 09:11:45"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:11:45"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:11:45"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:11:45"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 09:11:45"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 09:11:45"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 09:11:45"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 09:11:45"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:11:45"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 09:11:45"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: NECl0feWBNhpOwkZAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:11:46"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:11:46"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:11:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:11:46 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:11:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:11:46 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:11:46"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:11:46"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:11:46"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: H0-SmQrBTZzmM-6NAAAD","service":"asistr-backend","timestamp":"2025-11-12 09:11:46"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:11:46"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:11:46"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:11:46"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:11:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:12:17 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:12:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:12:17 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:12:17"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:12:45"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:12:45"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:12:45"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:12:45"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:12:47 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:12:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:12:47 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:12:47"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 09:13:00"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:13:00"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:13:00"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:13:00"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 09:13:00"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 09:13:00"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 09:13:00"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 09:13:00"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:13:00"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 09:13:00"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: JcWErJe-2ql6pXkNAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:13:01"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: CW02t7zFd_tjp0PtAAAD","service":"asistr-backend","timestamp":"2025-11-12 09:13:01"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:13:01"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:13:01"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:13:01"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:13:01"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:13:01"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:13:01"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:13:02"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:13:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:13:17 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:13:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:13:17 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:13:17"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 09:13:26"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:13:26"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:13:26"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:13:26"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 09:13:26"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 09:13:26"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 09:13:26"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 09:13:26"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:13:26"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 09:13:26"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: d0uReRsalLGD1pJQAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:13:27"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:13:27"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:13:27"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:13:27"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:13:27"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: 8txdHLA-ScFJn1YYAAAD","service":"asistr-backend","timestamp":"2025-11-12 09:13:28"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:13:28"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:13:28"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:13:28"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:13:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:13:47 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:13:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:13:47 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:13:47"}
{"level":"info","message":"Starting main database migration...","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úì pgvector extension enabled","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úì Sites table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úì Users table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úì Visitors table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úì Conversations table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úì Messages table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úì Knowledge base table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úì Widget sites table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úì Departments table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úì Canned responses table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úì Chat queue table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úì Offline messages table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úì Chat metrics table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úì Indexes created","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úÖ Main database migration completed successfully!","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"Sesli g√∂r√º≈üme migration ba≈ülatƒ±lƒ±yor...","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úÖ voice_calls tablosu olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úÖ call_queue tablosu olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úÖ agent_call_availability tablosu olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úÖ webrtc_signaling tablosu olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úÖ call_recordings tablosu olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"‚úÖ ƒ∞ndeksler olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 09:14:10"}
{"level":"info","message":"Starting advanced chat features migration...","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Canned responses table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Chat tags table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Conversation tags table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Conversation notes table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Feedback fields added to conversations","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Chat transfers table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Indexes created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Default canned responses created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Default tags created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úÖ Advanced chat features migration completed successfully!","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"Chat triggers migration ba≈ülatƒ±lƒ±yor...","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úÖ chat_triggers tablosu olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úÖ trigger_statistics tablosu olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úÖ ƒ∞ndeksler olu≈üturuldu","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úÖ √ñrnek trigger'lar eklendi","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"Starting real-time features enhancement migration...","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Agents presence table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Typing status table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Visitor tracking fields added","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Indexes created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Default presence created for 1 agents","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úÖ Real-time features enhancement migration completed successfully!","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"Starting multi-agent migration...","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Departments table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Users table updated with agent fields","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Agents presence table created/verified","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Routing config table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Conversation assignments table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Agent availability table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Agent state table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Indexes created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Default departments created for existing sites","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úì Default routing configs created","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"‚úÖ Multi-agent migration completed successfully!","service":"asistr-backend","timestamp":"2025-11-12 09:14:11"}
{"level":"info","message":"Starting widget customization migration...","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úì Widget settings table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úì Default widget settings created for 1 sites","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úì Indexes created","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úÖ Widget customization migration completed successfully!","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"Starting notification system migration...","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úì Notification preferences table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úì Push subscriptions table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úì Notification logs table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úì Default notification preferences created for 1 users","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úì Indexes created","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úÖ Notification system migration completed successfully!","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"Starting visitor tracking & analytics migration...","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úì Visitor tracking fields added","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úì Visitor sessions table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úì Page views table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úì Visitor events table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úì Analytics summary table created","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úì Indexes created","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"‚úÖ Visitor tracking & analytics migration completed successfully!","service":"asistr-backend","timestamp":"2025-11-12 09:14:12"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:14:17 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:14:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:14:17 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:14:17"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:14:26"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:14:26"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:14:26"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:14:26"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 09:14:28"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:14:28"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:14:28"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:14:28"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 09:14:28"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 09:14:28"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 09:14:28"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 09:14:28"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:14:28"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 09:14:28"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: -ZGzplVriEdum5QNAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:14:29"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: Qk__1CQ7yuWmKgRsAAAD","service":"asistr-backend","timestamp":"2025-11-12 09:14:29"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:14:29"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:14:29"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:14:29"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:14:29"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:14:29"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:14:29"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:14:29"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:14:29"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 09:14:45"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:14:45"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:14:45"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:14:45"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 09:14:45"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 09:14:45"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 09:14:45"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 09:14:45"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:14:45"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 09:14:45"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: OwslbO0dCxW76ulMAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:14:45"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: e3A82j0g5XEzHKDdAAAD","service":"asistr-backend","timestamp":"2025-11-12 09:14:46"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:14:46"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:14:46"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:14:46"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:14:46"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:14:46"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:14:46"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:14:46"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:14:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:14:48 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:14:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:14:48 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:14:48"}
{"level":"info","message":"SIGTERM sinyali alƒ±ndƒ±. Sunucu kapatƒ±lƒ±yor...","service":"asistr-backend","timestamp":"2025-11-12 09:14:55"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 09:14:57"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:14:57"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:14:57"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:14:57"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 09:14:57"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 09:14:57"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 09:14:57"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 09:14:57"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:14:57"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 09:14:57"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: DYKEy6CzlUNpBcDWAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:14:58"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:14:58"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:14:58"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:14:58"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:14:58"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: nGdq2WeucUV2Ra7YAAAD","service":"asistr-backend","timestamp":"2025-11-12 09:14:59"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:14:59"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:14:59"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:14:59"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:14:59"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:01 +0000] \"GET /api/rag/health HTTP/1.1\" 200 98 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:01"}
{"level":"info","message":"Kullanƒ±cƒ± giri≈üi: admin@asistr.com","service":"asistr-backend","timestamp":"2025-11-12 09:15:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:01 +0000] \"POST /api/auth/login HTTP/1.1\" 200 533 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:01 +0000] \"GET /api/auth/me HTTP/1.1\" 200 223 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:01 +0000] \"GET /api/chat HTTP/1.1\" 200 20 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:01 +0000] \"GET /api/rag/knowledge HTTP/1.1\" 200 16 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:01 +0000] \"GET /api/agents HTTP/1.1\" 200 330 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:01 +0000] \"GET /api/departments HTTP/1.1\" 200 537 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:01 +0000] \"GET /api/canned HTTP/1.1\" 200 3723 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:01 +0000] \"GET /api/analytics/dashboard HTTP/1.1\" 200 193 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:01 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:01 +0000] \"GET /api/presence/agents HTTP/1.1\" 200 343 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:01 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:01 +0000] \"GET /api/voice/active HTTP/1.1\" 200 12 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:01 +0000] \"GET /api/notifications/preferences HTTP/1.1\" 200 466 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:18 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:18"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:18 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:18"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:48 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:15:48 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:15:48"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:15:57"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:15:57"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:15:57"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:15:57"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:16:18 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:16:18"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:16:18 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:16:18"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:16:48 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:16:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:16:48 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:16:48"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:16:57"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:16:57"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:16:57"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:16:57"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:18 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:18"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:18 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:18"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:27 +0000] \"GET /api/canned HTTP/1.1\" 200 3723 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:27"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:27 +0000] \"GET /api/canned HTTP/1.1\" 200 3723 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:27"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:28 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:28 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 200 15 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:29 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:29 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:29 +0000] \"GET /api/analytics/online-visitors?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:29 +0000] \"GET /api/analytics/top-pages?period=7d&limit=10&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:29 +0000] \"GET /api/analytics/agent-performance?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:29 +0000] \"GET /api/analytics/dashboard?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:29 +0000] \"GET /api/analytics/top-pages?period=7d&limit=10&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 12 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:29 +0000] \"GET /api/analytics/traffic-sources?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 14 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:29 +0000] \"GET /api/analytics/agent-performance?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 18 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:29 +0000] \"GET /api/analytics/device-stats?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 50 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:29 +0000] \"GET /api/analytics/traffic-sources?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:29 +0000] \"GET /api/analytics/online-visitors?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 15 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:29 +0000] \"GET /api/analytics/device-stats?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:29 +0000] \"GET /api/analytics/dashboard?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 193 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:30 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:30"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:30 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:30"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:30 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:30"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:30 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:30"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:32 +0000] \"PUT /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:32"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:33 +0000] \"PUT /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:33"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:43 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:43 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 200 15 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:44 +0000] \"GET /api/canned HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:44 +0000] \"GET /api/canned HTTP/1.1\" 200 3723 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:46 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:46 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:46 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:46 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 20 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:46 +0000] \"GET /api/rag/health HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:46 +0000] \"GET /api/rag/health HTTP/1.1\" 200 98 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:46 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:46 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:46"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 09:17:46"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 09:17:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:46 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:46"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 09:17:46"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 09:17:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:46 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:51 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:51"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:17:56 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:17:56"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:17:57"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:17:57"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:17:57"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:17:57"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:18:01 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:18:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:18:06 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:18:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:18:11 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:18:11"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:18:16 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:18:16"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:18:21 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:18:21"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:18:26 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:18:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:18:31 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:18:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:18:36 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:18:36"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:18:41 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:18:41"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:18:46 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:18:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:18:51 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:18:51"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:18:56 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:18:56"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:18:57"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:18:57"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:18:57"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:18:57"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:01 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:01"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:06 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:11 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:11"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:16 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:16"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:21 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:21"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:26 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:31 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:31 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:31 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:31 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:31 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:31 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:32 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:32"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:32 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 200 15 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:32"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:33 +0000] \"GET /api/canned HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:33"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:33 +0000] \"GET /api/canned HTTP/1.1\" 200 3723 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:33"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: nGdq2WeucUV2Ra7YAAAD","service":"asistr-backend","timestamp":"2025-11-12 09:19:35"}
{"level":"info","message":"Agent baƒülantƒ±sƒ± kesildi: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df (Sebep: transport close)","service":"asistr-backend","timestamp":"2025-11-12 09:19:35"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: DYKEy6CzlUNpBcDWAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:19:35"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:36 +0000] \"GET /api/canned HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:36"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:36 +0000] \"GET /api/canned HTTP/1.1\" 200 3723 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:36"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 09:19:36"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 09:19:36"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:36 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:36"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 09:19:36"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 09:19:36"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:36 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:36"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: VbGf44pdGGiim7GNAAAG","service":"asistr-backend","timestamp":"2025-11-12 09:19:36"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: qdAK4z9o7jeCl0VUAAAH","service":"asistr-backend","timestamp":"2025-11-12 09:19:36"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:19:36"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:19:36"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:19:36"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:19:36"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:19:36"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:19:36"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:19:36"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:19:36"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:36 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:36"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:36 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:36"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:38 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:38"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:38 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 20 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:38"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:38 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:38"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:38 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:38"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:38 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:38"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:38 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:38"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:40 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:40"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:40 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 200 15 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:40"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:41 +0000] \"GET /api/canned HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:41"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:41 +0000] \"GET /api/canned HTTP/1.1\" 200 3723 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:41"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:43 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:43 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:43 +0000] \"GET /api/analytics/online-visitors?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:43 +0000] \"GET /api/analytics/device-stats?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:43 +0000] \"GET /api/analytics/dashboard?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:43 +0000] \"GET /api/analytics/top-pages?period=7d&limit=10&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 12 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:43 +0000] \"GET /api/analytics/traffic-sources?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 14 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:43 +0000] \"GET /api/analytics/agent-performance?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:43 +0000] \"GET /api/analytics/device-stats?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 50 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:43 +0000] \"GET /api/analytics/agent-performance?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 18 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:43 +0000] \"GET /api/analytics/top-pages?period=7d&limit=10&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:43 +0000] \"GET /api/analytics/traffic-sources?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:43 +0000] \"GET /api/analytics/online-visitors?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 15 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:43 +0000] \"GET /api/analytics/dashboard?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 193 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:44 +0000] \"GET /api/canned HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:19:44 +0000] \"GET /api/canned HTTP/1.1\" 200 3723 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:19:44"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:19:57"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:19:57"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:19:57"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:19:57"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:02 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:02 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:02 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:02 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 20 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:02 +0000] \"GET /api/rag/health HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:02 +0000] \"GET /api/rag/health HTTP/1.1\" 200 98 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:02 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:02"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 09:20:02"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 09:20:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:02 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:02 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:02"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 09:20:02"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 09:20:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:02 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:07 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:07"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:12 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:12"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:17 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: vrkGTrY9xgVgw_aBAAAJ","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: 3oIVt7A5gPtWHvn6AAAL","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:17 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:20:17"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:20:17"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 09:20:17"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:17 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:20:17"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:20:17"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 09:20:17"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:17 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:17 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:17 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:17 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:17 +0000] \"GET /api/rag/health HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:17 +0000] \"GET /api/rag/health HTTP/1.1\" 200 98 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:17 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 09:20:17"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:17 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:17 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 09:20:17"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:17 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:20 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 20 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:20 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:20"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:21 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:21"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:21 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:21"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:22 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:22"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:22 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:22"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:22 +0000] \"GET /api/agent/states/all HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:22"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:22 +0000] \"GET /api/agent/state HTTP/1.1\" 404 32 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:22"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:22 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:22"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:23 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:23"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:23 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 200 15 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:23"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:24 +0000] \"GET /api/canned HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:24 +0000] \"GET /api/canned HTTP/1.1\" 200 3723 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/analytics/online-visitors?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/analytics/top-pages?period=7d&limit=10&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/analytics/traffic-sources?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/analytics/dashboard?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/analytics/agent-performance?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/analytics/traffic-sources?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 14 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/analytics/agent-performance?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 18 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/analytics/device-stats?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 50 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/analytics/top-pages?period=7d&limit=10&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 12 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/analytics/online-visitors?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 15 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/analytics/device-stats?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/analytics/dashboard?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 193 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-12 09:20:25"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/notifications/preferences HTTP/1.1\" 500 39 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-12 09:20:25"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:25 +0000] \"GET /api/notifications/preferences HTTP/1.1\" 500 39 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:25"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:26 +0000] \"GET /api/agents HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:26 +0000] \"GET /api/agents HTTP/1.1\" 200 330 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:26 +0000] \"GET /api/departments HTTP/1.1\" 200 537 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:26 +0000] \"GET /api/departments HTTP/1.1\" 200 537 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:27 +0000] \"GET /api/departments HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:27"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:27 +0000] \"GET /api/departments HTTP/1.1\" 200 537 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:27"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:27 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:27"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:28 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:28 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:28 +0000] \"GET /api/widget-settings?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:28 +0000] \"GET /api/widget-settings?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 1265 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:28 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:28 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:28 +0000] \"GET /api/rag/knowledge?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:29 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:29 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:32 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:32"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:37 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:37"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:42 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:42"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:47 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:52 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:52"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:20:57"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:20:57"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:20:57"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:20:57"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:20:57 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:20:57"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:21:02 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:21:02"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:21:07 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:21:07"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:21:12 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:21:12"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:21:17 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:21:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:21:22 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:21:22"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:21:27 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:21:27"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:21:32 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:21:32"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:21:37 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:21:37"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:21:43 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:21:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:21:48 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:21:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:21:53 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:21:53"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:21:57"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:21:57"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:21:57"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:21:57"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:21:58 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:21:58"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:22:03 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:22:03"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:22:08 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:22:08"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:22:13 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:22:13"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:22:18 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:22:18"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:22:23 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:22:23"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:22:28 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:22:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:22:33 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:22:33"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:22:38 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:22:38"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:22:43 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:22:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:22:48 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:22:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:22:53 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:22:53"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:22:57"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:22:57"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:22:57"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:22:57"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:22:58 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:22:58"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:23:03 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:23:03"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:23:08 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:23:08"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:23:13 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:23:13"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:23:18 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:23:18"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:23:23 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:23:23"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:23:28 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:23:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:23:33 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:23:33"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:23:38 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:23:38"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:23:43 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:23:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:23:48 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:23:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:23:53 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:23:53"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:23:57"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:23:57"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:23:57"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:23:57"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:23:58 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:23:58"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:24:03 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:24:03"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:24:08 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:24:08"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:24:13 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:24:13"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:24:18 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:24:18"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:24:23 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:24:23"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:24:28 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:24:28"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:24:33 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:24:33"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: VbGf44pdGGiim7GNAAAG","service":"asistr-backend","timestamp":"2025-11-12 09:24:35"}
{"level":"info","message":"Agent baƒülantƒ±sƒ± kesildi: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df (Sebep: transport close)","service":"asistr-backend","timestamp":"2025-11-12 09:24:35"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: qdAK4z9o7jeCl0VUAAAH","service":"asistr-backend","timestamp":"2025-11-12 09:24:35"}
{"error":"column cq.timeout_at does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT cq.*, c.visitor_id\n      FROM chat_queue cq\n      JOIN conversations c ON cq.conversation_id = c.id\n      WHERE cq.status = 'waiting' \n        AND cq.timeout_at < NOW()\n    ","timestamp":"2025-11-12 09:24:57"}
{"code":"42703","file":"parse_relation.c","length":112,"level":"error","line":"3665","message":"HandleQueueTimeouts error: column cq.timeout_at does not exist","name":"error","position":"162","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cq.timeout_at does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.handleQueueTimeouts [as _onTimeout] (/app/src/services/queue.service.js:274:22)","timestamp":"2025-11-12 09:24:57"}
{"error":"column \"state\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT agent_id, state\n      FROM agents_presence\n      WHERE state_until IS NOT NULL \n        AND state_until < NOW()\n        AND state IN ('break', 'away')\n    ","timestamp":"2025-11-12 09:24:57"}
{"code":"42703","file":"parse_relation.c","hint":"Perhaps you meant to reference the column \"agents_presence.status\".","length":174,"level":"error","line":"3665","message":"CheckExpiredStates error: column \"state\" does not exist","name":"error","position":"25","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Timeout.checkExpiredStates [as _onTimeout] (/app/src/controllers/agentState.controller.js:206:21)","timestamp":"2025-11-12 09:24:57"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 09:25:55"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:25:55"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:25:55"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:25:55"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 09:25:55"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 09:25:55"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 09:25:55"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 09:25:55"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:25:55"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 09:25:55"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: d6dpDKDo9RJRWe9DAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:25:55"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: CLOh4W_WTgmNBdq4AAAD","service":"asistr-backend","timestamp":"2025-11-12 09:25:56"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:25:56"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:25:56"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:25:56"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:25:56"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:25:56"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:25:56"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:25:56"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:25:56"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 09:26:23"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:26:23"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:26:23"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:26:23"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 09:26:23"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 09:26:23"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 09:26:23"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 09:26:23"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:26:23"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 09:26:23"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: ngbHFBxrdN-N10FFAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:26:23"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: Kw9bsRl6EdSpW4srAAAD","service":"asistr-backend","timestamp":"2025-11-12 09:26:24"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:26:24"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:26:24"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:26:24"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:26:24"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:26:24"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:26:24"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:26:24"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:26:24"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 09:27:15"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:27:15"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:27:16"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:27:16"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 09:27:16"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 09:27:16"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 09:27:16"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 09:27:16"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:27:16"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 09:27:16"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: iz8yWy-4WsgyLuhDAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:27:16"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: H7DIDasddct7pBJ4AAAD","service":"asistr-backend","timestamp":"2025-11-12 09:27:17"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:27:17"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:27:17"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:27:17"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:27:17"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:27:17"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:27:17"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:27:17"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:27:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:27:33 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:27:33"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:28:20 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:28:20"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 09:31:04"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:31:04"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:31:04"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:31:04"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 09:31:05"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 09:31:05"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 09:31:05"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 09:31:05"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:31:05"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 09:31:05"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: qDZhEJ8WIpfLHoucAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:31:05"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:31:05"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:31:05"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:31:05"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:31:05"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: tsXi16Qjn2rOz3OPAAAD","service":"asistr-backend","timestamp":"2025-11-12 09:31:06"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:31:06"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:31:06"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:31:06"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:31:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:24 +0000] \"GET /api/rag/health HTTP/1.1\" 200 98 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:24"}
{"level":"info","message":"Kullanƒ±cƒ± giri≈üi: admin@asistr.com","service":"asistr-backend","timestamp":"2025-11-12 09:31:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:24 +0000] \"POST /api/auth/login HTTP/1.1\" 200 533 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:24 +0000] \"GET /api/auth/me HTTP/1.1\" 200 223 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:24 +0000] \"GET /api/chat HTTP/1.1\" 200 20 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:24 +0000] \"GET /api/rag/knowledge HTTP/1.1\" 200 16 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:24 +0000] \"GET /api/agents HTTP/1.1\" 200 330 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:24 +0000] \"GET /api/departments HTTP/1.1\" 200 537 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:24 +0000] \"GET /api/canned HTTP/1.1\" 200 3723 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:24 +0000] \"GET /api/analytics/dashboard HTTP/1.1\" 200 193 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:24 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:24 +0000] \"GET /api/presence/agents HTTP/1.1\" 200 375 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:24 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:24 +0000] \"GET /api/voice/active HTTP/1.1\" 200 12 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:24 +0000] \"GET /api/notifications/preferences HTTP/1.1\" 200 466 \"-\" \"curl/8.5.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:24"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: tsXi16Qjn2rOz3OPAAAD","service":"asistr-backend","timestamp":"2025-11-12 09:31:43"}
{"level":"info","message":"Agent baƒülantƒ±sƒ± kesildi: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df (Sebep: transport close)","service":"asistr-backend","timestamp":"2025-11-12 09:31:43"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: qDZhEJ8WIpfLHoucAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:31:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:45 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:45"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: watj3TdP3ROlri3bAAAF","service":"asistr-backend","timestamp":"2025-11-12 09:31:45"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 09:31:45"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 09:31:45"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:45 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:45"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: s25XbWJUTvgwWPJrAAAH","service":"asistr-backend","timestamp":"2025-11-12 09:31:45"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:31:45"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:31:45"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:31:45"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:31:45"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:45 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:45"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 09:31:45"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 09:31:45"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:31:45 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:31:45"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:31:45"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:31:45"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:31:45"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:31:45"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: watj3TdP3ROlri3bAAAF","service":"asistr-backend","timestamp":"2025-11-12 09:32:26"}
{"level":"info","message":"Agent baƒülantƒ±sƒ± kesildi: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df (Sebep: transport close)","service":"asistr-backend","timestamp":"2025-11-12 09:32:26"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: s25XbWJUTvgwWPJrAAAH","service":"asistr-backend","timestamp":"2025-11-12 09:32:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:32:26 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:32:26"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 09:32:26"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 09:32:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:32:26 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:32:26"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: 6vhINAuteeXmpn5KAAAK","service":"asistr-backend","timestamp":"2025-11-12 09:32:26"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: GazlJf2lDd4AiyynAAAL","service":"asistr-backend","timestamp":"2025-11-12 09:32:26"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:32:26"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:32:26"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:32:26"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:32:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:32:26 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:32:26"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 09:32:26"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 09:32:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:32:26 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:32:26"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:32:26"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:32:26"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:32:26"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:32:26"}
{"level":"warn","message":"CORS hatasƒ±: ƒ∞zinli olmayan origin: http://localhost:8080","service":"asistr-backend","timestamp":"2025-11-12 09:32:58"}
{"level":"error","message":"Hata: CORS policy tarafƒ±ndan izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafƒ±ndan izin verilmedi\n    at origin (/app/app.js:89:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-12 09:32:58"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: 6vhINAuteeXmpn5KAAAK","service":"asistr-backend","timestamp":"2025-11-12 09:33:02"}
{"level":"info","message":"Agent baƒülantƒ±sƒ± kesildi: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df (Sebep: transport close)","service":"asistr-backend","timestamp":"2025-11-12 09:33:02"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: GazlJf2lDd4AiyynAAAL","service":"asistr-backend","timestamp":"2025-11-12 09:33:02"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: OLN51-s_1Bj-08yNAAAO","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:06 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: dUfvWWVmKhOq6K8LAAAP","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:06 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 09:33:06"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:06 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 09:33:06"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:06 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:33:06"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:33:06"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:33:06"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:06 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:06 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 20 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:06 +0000] \"GET /api/rag/health HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:06 +0000] \"GET /api/rag/health HTTP/1.1\" 200 98 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:06 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 09:33:06"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:06 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 09:33:06"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:06 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:06 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:06"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:11 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:11"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:16 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:16"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:21 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:21"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: 9Gi-Gsze12KWtW6YAAAR","service":"asistr-backend","timestamp":"2025-11-12 09:33:22"}
{"apiKey":"9263706f4e5b2e2b5bb48111b53dea2a48ce23b0928c9a73e39772bc62b68dfc","level":"info","message":"Visitor connect attempt:","resumeConversationId":null,"service":"asistr-backend","sessionId":"session_ki354ggsi","timestamp":"2025-11-12 09:33:22","visitorInfo":{"email":"","name":"abdullah"}}
{"0":"b","1":"2","10":"1","11":"9","12":"e","13":"-","14":"4","15":"9","16":"f","17":"a","18":"-","19":"9","2":"6","20":"3","21":"f","22":"6","23":"-","24":"8","25":"0","26":"c","27":"d","28":"c","29":"d","3":"e","30":"e","31":"6","32":"8","33":"6","34":"0","35":"8","4":"8","5":"0","6":"1","7":"1","8":"-","9":"0","level":"info","message":"Site found:","service":"asistr-backend","timestamp":"2025-11-12 09:33:22"}
{"0":"4","1":"4","10":"1","11":"6","12":"8","13":"-","14":"4","15":"5","16":"c","17":"4","18":"-","19":"b","2":"2","20":"4","21":"5","22":"3","23":"-","24":"e","25":"9","26":"e","27":"4","28":"0","29":"3","3":"9","30":"b","31":"6","32":"a","33":"8","34":"c","35":"2","4":"3","5":"6","6":"3","7":"a","8":"-","9":"e","level":"info","message":"New visitor created:","service":"asistr-backend","timestamp":"2025-11-12 09:33:22"}
{"level":"info","message":"üÜï NEW conversation: 46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:33:22"}
{"level":"info","message":"Visitor room'a katƒ±ldƒ±: conv:46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:33:22"}
{"level":"info","message":"Ziyaret√ßi baƒülandƒ± ve yeni konu≈üma bildirildi - Conversation: 46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:33:22"}
{"error":"column v.is_vip does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT v.is_vip, v.vip_level, v.language\n      FROM conversations c\n      JOIN visitors v ON c.visitor_id = v.id\n      WHERE c.id = $1\n    ","timestamp":"2025-11-12 09:33:22"}
{"code":"42703","file":"parse_relation.c","length":106,"level":"error","line":"3665","message":"AssignAgent error: column v.is_vip does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column v.is_vip does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:366:27)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:220:31)","timestamp":"2025-11-12 09:33:22"}
{"level":"info","message":"Mesaj g√∂nderildi - Room: conv:46286de2-0a9c-4413-b45c-bd588945610b, Sender: visitor","service":"asistr-backend","timestamp":"2025-11-12 09:33:26"}
{"level":"info","message":"Mesaj g√∂nderildi - Conversation: 46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:33:26"}
{"level":"info","message":"Agent yok, AI yanƒ±t √ºretiliyor - Conversation: 46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:33:26"}
{"level":"info","message":"Arama ba≈ülatƒ±lƒ±yor: \"merhaba\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:26"}
{"level":"info","message":"Text search sonu√ß: 0 e≈üle≈üme bulundu","service":"asistr-backend","timestamp":"2025-11-12 09:33:26"}
{"level":"info","message":"Text search: 0 sonu√ß","service":"asistr-backend","timestamp":"2025-11-12 09:33:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:26 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:26"}
{"level":"info","message":"Vector search: 0 sonu√ß","service":"asistr-backend","timestamp":"2025-11-12 09:33:26"}
{"level":"warn","message":"Hi√ßbir sonu√ß bulunamadƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:33:26"}
{"level":"info","message":"Bilgi tabanƒ± sonu√ß: 0 kayƒ±t bulundu","service":"asistr-backend","timestamp":"2025-11-12 09:33:26"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:31 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:31"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:33 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 301 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:33"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:33 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 301 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:33"}
{"level":"info","message":"Agent room'a katƒ±ldƒ±: conv:46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:33:39"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-12 09:33:39"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatasƒ±: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:307:7)","table":"conversations","timestamp":"2025-11-12 09:33:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:39 +0000] \"GET /api/chat/46286de2-0a9c-4413-b45c-bd588945610b/messages HTTP/1.1\" 200 160 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:39 +0000] \"GET /api/chat-enhancement/conversations/46286de2-0a9c-4413-b45c-bd588945610b/tags HTTP/1.1\" 200 11 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:39 +0000] \"GET /api/voice/conversation/46286de2-0a9c-4413-b45c-bd588945610b/history HTTP/1.1\" 200 12 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:39 +0000] \"GET /api/chat-enhancement/tags HTTP/1.1\" 200 865 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:39"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:33:39 +0000] \"GET /api/chat-enhancement/conversations/46286de2-0a9c-4413-b45c-bd588945610b/notes HTTP/1.1\" 200 12 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:33:39"}
{"level":"info","message":"AI yanƒ±tƒ± g√∂nderildi - Conversation: 46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:33:40"}
{"level":"warn","message":"CORS hatasƒ±: ƒ∞zinli olmayan origin: http://localhost:8081","service":"asistr-backend","timestamp":"2025-11-12 09:33:41"}
{"level":"error","message":"Hata: CORS policy tarafƒ±ndan izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafƒ±ndan izin verilmedi\n    at origin (/app/app.js:89:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-12 09:33:41"}
{"level":"warn","message":"CORS hatasƒ±: ƒ∞zinli olmayan origin: http://localhost:8081","service":"asistr-backend","timestamp":"2025-11-12 09:34:04"}
{"level":"error","message":"Hata: CORS policy tarafƒ±ndan izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafƒ±ndan izin verilmedi\n    at origin (/app/app.js:89:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-12 09:34:04"}
{"level":"warn","message":"CORS hatasƒ±: ƒ∞zinli olmayan origin: http://localhost:8080","service":"asistr-backend","timestamp":"2025-11-12 09:34:36"}
{"level":"error","message":"Hata: CORS policy tarafƒ±ndan izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafƒ±ndan izin verilmedi\n    at origin (/app/app.js:89:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-12 09:34:36"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: OLN51-s_1Bj-08yNAAAO","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"Agent baƒülantƒ±sƒ± kesildi: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df (Sebep: transport close)","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: dUfvWWVmKhOq6K8LAAAP","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 09:34:41"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:41 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:41 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 337 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: xaEbynK4jVol8O_cAAAT","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"error":"insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agent_call_availability (agent_id, available_for_calls, max_concurrent_calls)\n       VALUES ($1, $2, $3)\n       ON CONFLICT (agent_id) \n       DO UPDATE SET \n         available_for_calls = $2,\n         max_concurrent_calls = $3,\n         updated_at = NOW()","timestamp":"2025-11-12 09:34:41"}
{"code":"23503","constraint":"agent_call_availability_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":352,"level":"error","line":"2596","message":"UpdateCallAvailability hatasƒ±: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agent_call_availability\" violates foreign key constraint \"agent_call_availability_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async updateCallAvailability (/app/src/controllers/voiceCall.controller.js:339:5)","table":"agent_call_availability","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:41 +0000] \"POST /api/voice/availability HTTP/1.1\" 500 38 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: uqQz_qJ25ZfQ_mvcAAAW","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: Qk1seRGVyBc5eNDNAAAX","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: cn-nJfrnfu9ztn6LAAAZ","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:0b44f0d8-d4bd-49a9-bb8d-2a756f9461df","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"Agent site'a baƒülandƒ±: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df -> site:77ac1fe5-b486-4f80-a2de-2942dbccfcf6:agents","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:41 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 337 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:41"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:34:41"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:34:41"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:34:41"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:34:41"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:34:41"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:34:41"}
{"error":"insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"INSERT INTO agents_presence (agent_id, socket_id, status, last_seen)\n         VALUES ($1, $2, 'online', NOW())\n         ON CONFLICT (agent_id) \n         DO UPDATE SET socket_id = $2, status = 'online', last_seen = NOW()","timestamp":"2025-11-12 09:34:41"}
{"code":"23503","constraint":"agents_presence_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":320,"level":"error","line":"2596","message":"Agent connect hatasƒ±: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"agents_presence\" violates foreign key constraint \"agents_presence_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:279:7)","table":"agents_presence","timestamp":"2025-11-12 09:34:41"}
{"level":"info","message":"Agent room'a katƒ±ldƒ±: conv:46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:34:42"}
{"error":"insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"UPDATE conversations SET agent_id = $1 WHERE id = $2","timestamp":"2025-11-12 09:34:42"}
{"code":"23503","constraint":"conversations_agent_id_fkey","detail":"Key (agent_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":312,"level":"error","line":"2596","message":"Agent join conversation hatasƒ±: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"conversations\" violates foreign key constraint \"conversations_agent_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:307:7)","table":"conversations","timestamp":"2025-11-12 09:34:42"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:42 +0000] \"GET /api/chat/46286de2-0a9c-4413-b45c-bd588945610b/messages HTTP/1.1\" 200 338 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:42"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:42 +0000] \"GET /api/chat-enhancement/conversations/46286de2-0a9c-4413-b45c-bd588945610b/tags HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:42"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:42 +0000] \"GET /api/voice/conversation/46286de2-0a9c-4413-b45c-bd588945610b/history HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:42"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:42 +0000] \"GET /api/chat-enhancement/tags HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:42"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:42 +0000] \"GET /api/chat-enhancement/conversations/46286de2-0a9c-4413-b45c-bd588945610b/notes HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:42"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:43 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:43"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:43 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:43"}
{"error":"column ap.state_message does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        u.id, u.name, u.email, u.role,\n        ap.state, ap.state_message, ap.state_until, ap.break_start,\n        ap.status, ap.last_seen,\n        u.current_chats, u.max_chats\n      FROM users u\n      JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY ap.status DESC, u.name ASC","timestamp":"2025-11-12 09:34:44"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetAllAgentsStates error: column ap.state_message does not exist","name":"error","position":"73","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column ap.state_message does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getAllAgentsStates (/app/src/controllers/agentState.controller.js:183:20)","timestamp":"2025-11-12 09:34:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:44 +0000] \"GET /api/agent-state/states/all HTTP/1.1\" 500 39 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:44"}
{"error":"column \"state_message\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT state, state_message, state_until, break_start, status\n      FROM agents_presence\n      WHERE agent_id = $1\n    ","timestamp":"2025-11-12 09:34:44"}
{"code":"42703","file":"parse_relation.c","length":113,"level":"error","line":"3665","message":"GetAgentState error: column \"state_message\" does not exist","name":"error","position":"22","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state_message\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getAgentState (/app/src/controllers/agentState.controller.js:60:20)","timestamp":"2025-11-12 09:34:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:44 +0000] \"GET /api/agent-state/state HTTP/1.1\" 500 37 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:44"}
{"error":"column \"state_message\" does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT state, state_message, state_until, break_start, status\n      FROM agents_presence\n      WHERE agent_id = $1\n    ","timestamp":"2025-11-12 09:34:44"}
{"code":"42703","file":"parse_relation.c","length":113,"level":"error","line":"3665","message":"GetAgentState error: column \"state_message\" does not exist","name":"error","position":"22","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column \"state_message\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getAgentState (/app/src/controllers/agentState.controller.js:60:20)","timestamp":"2025-11-12 09:34:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:44 +0000] \"GET /api/agent-state/state HTTP/1.1\" 500 37 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:44"}
{"error":"column ap.state_message does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        u.id, u.name, u.email, u.role,\n        ap.state, ap.state_message, ap.state_until, ap.break_start,\n        ap.status, ap.last_seen,\n        u.current_chats, u.max_chats\n      FROM users u\n      JOIN agents_presence ap ON u.id = ap.agent_id\n      WHERE u.role IN ('agent', 'admin')\n     ORDER BY ap.status DESC, u.name ASC","timestamp":"2025-11-12 09:34:44"}
{"code":"42703","file":"parse_relation.c","length":114,"level":"error","line":"3665","message":"GetAllAgentsStates error: column ap.state_message does not exist","name":"error","position":"73","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column ap.state_message does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getAllAgentsStates (/app/src/controllers/agentState.controller.js:183:20)","timestamp":"2025-11-12 09:34:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:44 +0000] \"GET /api/agent-state/states/all HTTP/1.1\" 500 39 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:44"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:46 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:46 +0000] \"GET /api/offline-messages?status=pending HTTP/1.1\" 200 15 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:46 +0000] \"GET /api/canned HTTP/1.1\" 200 3723 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:46 +0000] \"GET /api/canned HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:47 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:47 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:47 +0000] \"GET /api/analytics/dashboard?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 193 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:47 +0000] \"GET /api/analytics/dashboard?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 193 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:47 +0000] \"GET /api/analytics/device-stats?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 133 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:47 +0000] \"GET /api/analytics/agent-performance?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:47 +0000] \"GET /api/analytics/online-visitors?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 15 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:47 +0000] \"GET /api/analytics/top-pages?period=7d&limit=10&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 12 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:47 +0000] \"GET /api/analytics/traffic-sources?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 14 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:47 +0000] \"GET /api/analytics/top-pages?period=7d&limit=10&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:47 +0000] \"GET /api/analytics/online-visitors?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:47 +0000] \"GET /api/analytics/agent-performance?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 18 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:47 +0000] \"GET /api/analytics/device-stats?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 133 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:47"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:47 +0000] \"GET /api/analytics/traffic-sources?period=7d&siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:47"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-12 09:34:48"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-12 09:34:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:48 +0000] \"GET /api/notifications/preferences HTTP/1.1\" 500 39 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:48"}
{"error":"insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n        INSERT INTO notification_preferences (user_id)\n        VALUES ($1)\n        RETURNING *\n      ","timestamp":"2025-11-12 09:34:48"}
{"code":"23503","constraint":"notification_preferences_user_id_fkey","detail":"Key (user_id)=(0b44f0d8-d4bd-49a9-bb8d-2a756f9461df) is not present in table \"users\".","file":"ri_triggers.c","length":353,"level":"error","line":"2596","message":"GetPreferences error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"","name":"error","routine":"ri_ReportViolation","schema":"public","service":"asistr-backend","severity":"ERROR","stack":"error: insert or update on table \"notification_preferences\" violates foreign key constraint \"notification_preferences_user_id_fkey\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async getPreferences (/app/src/controllers/notification.controller.js:21:16)","table":"notification_preferences","timestamp":"2025-11-12 09:34:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:48 +0000] \"GET /api/notifications/preferences HTTP/1.1\" 500 39 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:48 +0000] \"GET /api/agents HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:48 +0000] \"GET /api/departments HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:48 +0000] \"GET /api/departments HTTP/1.1\" 200 537 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:48 +0000] \"GET /api/agents HTTP/1.1\" 200 330 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:48"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:49 +0000] \"GET /api/departments HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:49 +0000] \"GET /api/departments HTTP/1.1\" 200 537 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:49 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:49 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:49 +0000] \"GET /api/widget-settings?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:49 +0000] \"GET /api/widget-settings?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 200 1265 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:49"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:50 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:50"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:50 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:50"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:50 +0000] \"GET /api/rag/knowledge?siteId=b26e8011-019e-49fa-93f6-80cdcde68608 HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:50"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:50 +0000] \"GET /api/widget/sites HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:50"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:34:50 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:34:50"}
{"level":"info","message":"Mesaj g√∂nderildi - Room: conv:46286de2-0a9c-4413-b45c-bd588945610b, Sender: visitor","service":"asistr-backend","timestamp":"2025-11-12 09:35:54"}
{"level":"info","message":"Mesaj g√∂nderildi - Conversation: 46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:35:54"}
{"level":"info","message":"Agent yok, AI yanƒ±t √ºretiliyor - Conversation: 46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:35:55"}
{"level":"info","message":"Arama ba≈ülatƒ±lƒ±yor: \"√∂zkan kimdir\"","service":"asistr-backend","timestamp":"2025-11-12 09:35:55"}
{"level":"info","message":"Text search sonu√ß: 0 e≈üle≈üme bulundu","service":"asistr-backend","timestamp":"2025-11-12 09:35:55"}
{"level":"info","message":"Text search: 0 sonu√ß","service":"asistr-backend","timestamp":"2025-11-12 09:35:55"}
{"level":"info","message":"Vector search: 0 sonu√ß","service":"asistr-backend","timestamp":"2025-11-12 09:35:55"}
{"level":"warn","message":"Hi√ßbir sonu√ß bulunamadƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:35:55"}
{"level":"info","message":"Bilgi tabanƒ± sonu√ß: 0 kayƒ±t bulundu","service":"asistr-backend","timestamp":"2025-11-12 09:35:55"}
{"level":"info","message":"AI yanƒ±tƒ± g√∂nderildi - Conversation: 46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:36:32"}
{"level":"info","message":"Mesaj g√∂nderildi - Room: conv:46286de2-0a9c-4413-b45c-bd588945610b, Sender: visitor","service":"asistr-backend","timestamp":"2025-11-12 09:36:32"}
{"level":"info","message":"Mesaj g√∂nderildi - Conversation: 46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:36:32"}
{"level":"info","message":"Agent yok, AI yanƒ±t √ºretiliyor - Conversation: 46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:36:32"}
{"level":"info","message":"Arama ba≈ülatƒ±lƒ±yor: \"√∂zkan ertun√ß kim\"","service":"asistr-backend","timestamp":"2025-11-12 09:36:32"}
{"level":"info","message":"Text search sonu√ß: 0 e≈üle≈üme bulundu","service":"asistr-backend","timestamp":"2025-11-12 09:36:32"}
{"level":"info","message":"Text search: 0 sonu√ß","service":"asistr-backend","timestamp":"2025-11-12 09:36:32"}
{"level":"info","message":"Vector search: 0 sonu√ß","service":"asistr-backend","timestamp":"2025-11-12 09:36:32"}
{"level":"warn","message":"Hi√ßbir sonu√ß bulunamadƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:36:32"}
{"level":"info","message":"Bilgi tabanƒ± sonu√ß: 0 kayƒ±t bulundu","service":"asistr-backend","timestamp":"2025-11-12 09:36:32"}
{"level":"info","message":"AI yanƒ±tƒ± g√∂nderildi - Conversation: 46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:37:02"}
{"level":"info","message":"Mesaj g√∂nderildi - Room: conv:46286de2-0a9c-4413-b45c-bd588945610b, Sender: visitor","service":"asistr-backend","timestamp":"2025-11-12 09:37:17"}
{"level":"info","message":"Mesaj g√∂nderildi - Conversation: 46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:37:17"}
{"level":"info","message":"Agent yok, AI yanƒ±t √ºretiliyor - Conversation: 46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:37:17"}
{"level":"info","message":"Arama ba≈ülatƒ±lƒ±yor: \"tamam siktirgit\"","service":"asistr-backend","timestamp":"2025-11-12 09:37:17"}
{"level":"info","message":"Text search sonu√ß: 0 e≈üle≈üme bulundu","service":"asistr-backend","timestamp":"2025-11-12 09:37:17"}
{"level":"info","message":"Text search: 0 sonu√ß","service":"asistr-backend","timestamp":"2025-11-12 09:37:17"}
{"level":"info","message":"Vector search: 0 sonu√ß","service":"asistr-backend","timestamp":"2025-11-12 09:37:17"}
{"level":"warn","message":"Hi√ßbir sonu√ß bulunamadƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:37:17"}
{"level":"info","message":"Bilgi tabanƒ± sonu√ß: 0 kayƒ±t bulundu","service":"asistr-backend","timestamp":"2025-11-12 09:37:17"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:37:56 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 309 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:37:56"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:37:56 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 309 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:37:56"}
{"level":"info","message":"AI yanƒ±tƒ± g√∂nderildi - Conversation: 46286de2-0a9c-4413-b45c-bd588945610b","service":"asistr-backend","timestamp":"2025-11-12 09:38:02"}
{"level":"warn","message":"CORS hatasƒ±: ƒ∞zinli olmayan origin: http://localhost:8080","service":"asistr-backend","timestamp":"2025-11-12 09:38:06"}
{"level":"error","message":"Hata: CORS policy tarafƒ±ndan izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafƒ±ndan izin verilmedi\n    at origin (/app/app.js:89:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-12 09:38:06"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: xaEbynK4jVol8O_cAAAT","service":"asistr-backend","timestamp":"2025-11-12 09:38:10"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: uqQz_qJ25ZfQ_mvcAAAW","service":"asistr-backend","timestamp":"2025-11-12 09:38:10"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: Qk1seRGVyBc5eNDNAAAX","service":"asistr-backend","timestamp":"2025-11-12 09:38:10"}
{"level":"info","message":"Agent baƒülantƒ±sƒ± kesildi: 0b44f0d8-d4bd-49a9-bb8d-2a756f9461df (Sebep: transport close)","service":"asistr-backend","timestamp":"2025-11-12 09:38:10"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: cn-nJfrnfu9ztn6LAAAZ","service":"asistr-backend","timestamp":"2025-11-12 09:38:10"}
{"level":"info","message":"Visitor baƒülantƒ±sƒ± kesildi: 4429363a-e168-45c4-b453-e9e403b6a8c2 (Sebep: transport close)","service":"asistr-backend","timestamp":"2025-11-12 09:38:11"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: 9Gi-Gsze12KWtW6YAAAR","service":"asistr-backend","timestamp":"2025-11-12 09:38:11"}
{"level":"info","message":"Kullanƒ±cƒ± giri≈üi: admin@asistr.com","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:24 +0000] \"POST /api/auth/login HTTP/1.1\" 200 533 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:24 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: BaKayrvCz_NNuuoDAAAc","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: JicFEEs3IXe51gcCAAAd","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:24 +0000] \"GET /api/widget/sites HTTP/1.1\" 200 274 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"Agent m√ºsaitlik g√ºncellendi - Agent: a61641de-391b-4e70-951c-0ded3dc70300, Available: true","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:24 +0000] \"POST /api/voice/availability HTTP/1.1\" 200 44 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"Agent m√ºsaitlik g√ºncellendi - Agent: a61641de-391b-4e70-951c-0ded3dc70300, Available: true","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:24 +0000] \"POST /api/voice/availability HTTP/1.1\" 200 44 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:a61641de-391b-4e70-951c-0ded3dc70300","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"Agent site'a baƒülandƒ±: a61641de-391b-4e70-951c-0ded3dc70300 -> site:b26e8011-019e-49fa-93f6-80cdcde68608:agents","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:a61641de-391b-4e70-951c-0ded3dc70300","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"Agent site'a baƒülandƒ±: a61641de-391b-4e70-951c-0ded3dc70300 -> site:b26e8011-019e-49fa-93f6-80cdcde68608:agents","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:24 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 634 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"Agent baƒülandƒ±: a61641de-391b-4e70-951c-0ded3dc70300 (site: b26e8011-019e-49fa-93f6-80cdcde68608)","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"Agent baƒülandƒ±: a61641de-391b-4e70-951c-0ded3dc70300 (site: b26e8011-019e-49fa-93f6-80cdcde68608)","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:24 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 634 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:24 +0000] \"GET /api/rag/health HTTP/1.1\" 200 98 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:24 +0000] \"GET /api/rag/health HTTP/1.1\" 200 98 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:24 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 09:39:24"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:24 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:24 +0000] \"GET /api/queue/status HTTP/1.1\" 200 87 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"error":"column cm.avg_response_time_seconds does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT \n        COUNT(*) as total_conversations,\n        AVG(cm.first_response_time_seconds) as avg_first_response_time,\n        AVG(cm.avg_response_time_seconds) as avg_response_time,\n        AVG(cm.resolution_time_seconds) as avg_resolution_time,\n        AVG(cm.customer_satisfaction_score) as avg_csat,\n        SUM(cm.total_messages) as total_messages\n      FROM chat_metrics cm\n      JOIN conversations c ON cm.conversation_id = c.id\n      WHERE c.site_id = $1\n        AND cm.created_at >= $2\n        AND cm.created_at <= $3\n    ","timestamp":"2025-11-12 09:39:24"}
{"code":"42703","file":"parse_relation.c","length":127,"level":"error","line":"3665","message":"GetSitePerformanceMetrics error: column cm.avg_response_time_seconds does not exist","name":"error","position":"141","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column cm.avg_response_time_seconds does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async Object.getSitePerformanceMetrics (/app/src/services/metrics.service.js:176:20)\n    at async getSiteMetrics (/app/src/controllers/metrics.controller.js:45:21)","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:24 +0000] \"GET /api/metrics/site/b26e8011-019e-49fa-93f6-80cdcde68608?period=7d HTTP/1.1\" 200 151 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:24"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:29 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:29"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:30 +0000] \"POST /api/analytics/page-view HTTP/1.1\" 401 27 \"http://localhost:5173/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:30"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:34 +0000] \"GET /api/queue/status HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:34"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:38 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:38"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:39:38 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 634 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:39:38"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: 3VyGaFOmG8yvphpiAAAf","service":"asistr-backend","timestamp":"2025-11-12 09:39:53"}
{"apiKey":"demo_qsqx6oi6qnq","level":"info","message":"Visitor connect attempt:","resumeConversationId":null,"service":"asistr-backend","sessionId":"session_n9vlidwof","timestamp":"2025-11-12 09:39:53","visitorInfo":{"email":"","name":"nurullah"}}
{"0":"d","1":"e","10":"o","11":"i","12":"6","13":"q","14":"n","15":"q","2":"m","3":"o","4":"_","5":"q","6":"s","7":"q","8":"x","9":"6","level":"error","message":"Invalid API key:","service":"asistr-backend","timestamp":"2025-11-12 09:39:53"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: 3VyGaFOmG8yvphpiAAAf","service":"asistr-backend","timestamp":"2025-11-12 09:40:10"}
{"level":"warn","message":"CORS hatasƒ±: ƒ∞zinli olmayan origin: http://localhost:8081","service":"asistr-backend","timestamp":"2025-11-12 09:40:10"}
{"level":"error","message":"Hata: CORS policy tarafƒ±ndan izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafƒ±ndan izin verilmedi\n    at origin (/app/app.js:89:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-12 09:40:10"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: gRFftxVZ3j4LobwZAAAh","service":"asistr-backend","timestamp":"2025-11-12 09:40:25"}
{"apiKey":"9263706f4e5b2e2b5bb48111b53dea2a48ce23b0928c9a73e39772bc62b68dfc","level":"info","message":"Visitor connect attempt:","resumeConversationId":null,"service":"asistr-backend","sessionId":"session_12su7riue","timestamp":"2025-11-12 09:40:25","visitorInfo":{"email":"","name":"√∂zkan"}}
{"0":"b","1":"2","10":"1","11":"9","12":"e","13":"-","14":"4","15":"9","16":"f","17":"a","18":"-","19":"9","2":"6","20":"3","21":"f","22":"6","23":"-","24":"8","25":"0","26":"c","27":"d","28":"c","29":"d","3":"e","30":"e","31":"6","32":"8","33":"6","34":"0","35":"8","4":"8","5":"0","6":"1","7":"1","8":"-","9":"0","level":"info","message":"Site found:","service":"asistr-backend","timestamp":"2025-11-12 09:40:25"}
{"0":"4","1":"3","10":"d","11":"a","12":"7","13":"-","14":"4","15":"7","16":"a","17":"e","18":"-","19":"8","2":"8","20":"6","21":"1","22":"3","23":"-","24":"1","25":"5","26":"6","27":"0","28":"0","29":"a","3":"f","30":"a","31":"8","32":"0","33":"f","34":"8","35":"9","4":"c","5":"9","6":"5","7":"4","8":"-","9":"e","level":"info","message":"New visitor created:","service":"asistr-backend","timestamp":"2025-11-12 09:40:25"}
{"level":"info","message":"üÜï NEW conversation: 7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","timestamp":"2025-11-12 09:40:25"}
{"level":"info","message":"Visitor room'a katƒ±ldƒ±: conv:7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","timestamp":"2025-11-12 09:40:25"}
{"level":"info","message":"Ziyaret√ßi baƒülandƒ± ve yeni konu≈üma bildirildi - Conversation: 7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","timestamp":"2025-11-12 09:40:25"}
{"error":"column v.is_vip does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT v.is_vip, v.vip_level, v.language\n      FROM conversations c\n      JOIN visitors v ON c.visitor_id = v.id\n      WHERE c.id = $1\n    ","timestamp":"2025-11-12 09:40:25"}
{"code":"42703","file":"parse_relation.c","length":106,"level":"error","line":"3665","message":"AssignAgent error: column v.is_vip does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column v.is_vip does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:366:27)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:220:31)","timestamp":"2025-11-12 09:40:25"}
{"level":"info","message":"Mesaj g√∂nderildi - Room: conv:7a7e9f84-43f5-4c0b-bf4e-870ecba036fe, Sender: visitor","service":"asistr-backend","timestamp":"2025-11-12 09:40:27"}
{"level":"info","message":"Mesaj g√∂nderildi - Conversation: 7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","timestamp":"2025-11-12 09:40:27"}
{"level":"info","message":"Agent yok, AI yanƒ±t √ºretiliyor - Conversation: 7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","timestamp":"2025-11-12 09:40:27"}
{"level":"info","message":"Arama ba≈ülatƒ±lƒ±yor: \"selam\"","service":"asistr-backend","timestamp":"2025-11-12 09:40:27"}
{"level":"info","message":"Text search sonu√ß: 0 e≈üle≈üme bulundu","service":"asistr-backend","timestamp":"2025-11-12 09:40:27"}
{"level":"info","message":"Text search: 0 sonu√ß","service":"asistr-backend","timestamp":"2025-11-12 09:40:27"}
{"level":"info","message":"Vector search: 0 sonu√ß","service":"asistr-backend","timestamp":"2025-11-12 09:40:28"}
{"level":"warn","message":"Hi√ßbir sonu√ß bulunamadƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:40:28"}
{"level":"info","message":"Bilgi tabanƒ± sonu√ß: 0 kayƒ±t bulundu","service":"asistr-backend","timestamp":"2025-11-12 09:40:28"}
{"level":"info","message":"AI yanƒ±tƒ± g√∂nderildi - Conversation: 7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","timestamp":"2025-11-12 09:40:32"}
{"level":"warn","message":"CORS hatasƒ±: ƒ∞zinli olmayan origin: http://localhost:8081","service":"asistr-backend","timestamp":"2025-11-12 09:40:37"}
{"level":"error","message":"Hata: CORS policy tarafƒ±ndan izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafƒ±ndan izin verilmedi\n    at origin (/app/app.js:89:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-12 09:40:37"}
{"level":"info","message":"Agent room'a katƒ±ldƒ±: conv:7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","timestamp":"2025-11-12 09:40:45"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:40:46 +0000] \"GET /api/chat/7a7e9f84-43f5-4c0b-bf4e-870ecba036fe/messages HTTP/1.1\" 200 331 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:40:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:40:46 +0000] \"GET /api/chat-enhancement/conversations/7a7e9f84-43f5-4c0b-bf4e-870ecba036fe/tags HTTP/1.1\" 200 11 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:40:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:40:46 +0000] \"GET /api/chat-enhancement/tags HTTP/1.1\" 200 865 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:40:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:40:46 +0000] \"GET /api/chat-enhancement/conversations/7a7e9f84-43f5-4c0b-bf4e-870ecba036fe/notes HTTP/1.1\" 200 12 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:40:46"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:40:46 +0000] \"GET /api/voice/conversation/7a7e9f84-43f5-4c0b-bf4e-870ecba036fe/history HTTP/1.1\" 200 12 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:40:46"}
{"level":"warn","message":"CORS hatasƒ±: ƒ∞zinli olmayan origin: http://localhost:8081","service":"asistr-backend","timestamp":"2025-11-12 09:40:53"}
{"level":"error","message":"Hata: CORS policy tarafƒ±ndan izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafƒ±ndan izin verilmedi\n    at origin (/app/app.js:89:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-12 09:40:53"}
{"level":"info","message":"Visitor baƒülantƒ±sƒ± kesildi: 438fc954-eda7-47ae-8613-15600aa80f89 (Sebep: transport close)","service":"asistr-backend","timestamp":"2025-11-12 09:41:02"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: gRFftxVZ3j4LobwZAAAh","service":"asistr-backend","timestamp":"2025-11-12 09:41:02"}
{"level":"warn","message":"CORS hatasƒ±: ƒ∞zinli olmayan origin: http://localhost:8081","service":"asistr-backend","timestamp":"2025-11-12 09:41:24"}
{"level":"error","message":"Hata: CORS policy tarafƒ±ndan izin verilmedi","service":"asistr-backend","stack":"Error: CORS policy tarafƒ±ndan izin verilmedi\n    at origin (/app/app.js:89:16)\n    at /app/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/app/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/app/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/app/node_modules/express/lib/router/index.js:328:13)\n    at /app/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/app/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-11-12 09:41:24"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: rhRpZ2OGLUBHMparAAAj","service":"asistr-backend","timestamp":"2025-11-12 09:41:26"}
{"apiKey":"9263706f4e5b2e2b5bb48111b53dea2a48ce23b0928c9a73e39772bc62b68dfc","level":"info","message":"Visitor connect attempt:","resumeConversationId":"7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","sessionId":"session_12su7riue","timestamp":"2025-11-12 09:41:26","visitorInfo":{"email":"","name":"√∂zkan"}}
{"0":"b","1":"2","10":"1","11":"9","12":"e","13":"-","14":"4","15":"9","16":"f","17":"a","18":"-","19":"9","2":"6","20":"3","21":"f","22":"6","23":"-","24":"8","25":"0","26":"c","27":"d","28":"c","29":"d","3":"e","30":"e","31":"6","32":"8","33":"6","34":"0","35":"8","4":"8","5":"0","6":"1","7":"1","8":"-","9":"0","level":"info","message":"Site found:","service":"asistr-backend","timestamp":"2025-11-12 09:41:26"}
{"level":"info","message":"‚úÖ Keeping existing visitor name: \"√∂zkan\" (new: \"√∂zkan\", open_chats: true)","service":"asistr-backend","timestamp":"2025-11-12 09:41:26"}
{"0":"4","1":"3","10":"d","11":"a","12":"7","13":"-","14":"4","15":"7","16":"a","17":"e","18":"-","19":"8","2":"8","20":"6","21":"1","22":"3","23":"-","24":"1","25":"5","26":"6","27":"0","28":"0","29":"a","3":"f","30":"a","31":"8","32":"0","33":"f","34":"8","35":"9","4":"c","5":"9","6":"5","7":"4","8":"-","9":"e","level":"info","message":"Existing visitor found:","service":"asistr-backend","timestamp":"2025-11-12 09:41:26"}
{"level":"info","message":"‚úÖ RESUMED conversation: 7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","timestamp":"2025-11-12 09:41:26"}
{"level":"info","message":"Visitor room'a katƒ±ldƒ±: conv:7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","timestamp":"2025-11-12 09:41:26"}
{"level":"info","message":"Ziyaret√ßi baƒülandƒ± ve yeni konu≈üma bildirildi - Conversation: 7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","timestamp":"2025-11-12 09:41:26"}
{"error":"column v.is_vip does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT v.is_vip, v.vip_level, v.language\n      FROM conversations c\n      JOIN visitors v ON c.visitor_id = v.id\n      WHERE c.id = $1\n    ","timestamp":"2025-11-12 09:41:26"}
{"code":"42703","file":"parse_relation.c","length":106,"level":"error","line":"3665","message":"AssignAgent error: column v.is_vip does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column v.is_vip does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:366:27)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:220:31)","timestamp":"2025-11-12 09:41:26"}
{"level":"info","message":"Mesaj g√∂nderildi - Room: conv:7a7e9f84-43f5-4c0b-bf4e-870ecba036fe, Sender: visitor","service":"asistr-backend","timestamp":"2025-11-12 09:41:57"}
{"level":"info","message":"Mesaj g√∂nderildi - Conversation: 7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","timestamp":"2025-11-12 09:41:57"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:44:29 +0000] \"GET /api/chat?status=open HTTP/1.1\" 200 954 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:44:29"}
{"level":"info","message":"Database baƒülantƒ±sƒ± ba≈üarƒ±lƒ±:","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"‚úÖ PostgreSQL baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"‚úÖ Redis baƒülantƒ±sƒ± ba≈üarƒ±lƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"‚úÖ Ollama servisi hazƒ±r","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"üöÄ AsistTR Backend 4000 portunda √ßalƒ±≈üƒ±yor","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"üì° WebSocket sunucusu aktif","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"üåç Environment: development","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"üîí JWT Secret: ‚úÖ Tanƒ±mlƒ±","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"üåê CORS Origins: http://localhost:3000, http://localhost:5173","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: U2jvqrxyxTDgCZQeAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"apiKey":"9263706f4e5b2e2b5bb48111b53dea2a48ce23b0928c9a73e39772bc62b68dfc","level":"info","message":"Visitor connect attempt:","resumeConversationId":"7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","sessionId":"session_12su7riue","timestamp":"2025-11-12 09:45:18","visitorInfo":{"email":"","name":"√∂zkan"}}
{"0":"b","1":"2","10":"1","11":"9","12":"e","13":"-","14":"4","15":"9","16":"f","17":"a","18":"-","19":"9","2":"6","20":"3","21":"f","22":"6","23":"-","24":"8","25":"0","26":"c","27":"d","28":"c","29":"d","3":"e","30":"e","31":"6","32":"8","33":"6","34":"0","35":"8","4":"8","5":"0","6":"1","7":"1","8":"-","9":"0","level":"info","message":"Site found:","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"‚úÖ Keeping existing visitor name: \"√∂zkan\" (new: \"√∂zkan\", open_chats: true)","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"0":"4","1":"3","10":"d","11":"a","12":"7","13":"-","14":"4","15":"7","16":"a","17":"e","18":"-","19":"8","2":"8","20":"6","21":"1","22":"3","23":"-","24":"1","25":"5","26":"6","27":"0","28":"0","29":"a","3":"f","30":"a","31":"8","32":"0","33":"f","34":"8","35":"9","4":"c","5":"9","6":"5","7":"4","8":"-","9":"e","level":"info","message":"Existing visitor found:","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"‚úÖ RESUMED conversation: 7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"Visitor room'a katƒ±ldƒ±: conv:7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"Ziyaret√ßi baƒülandƒ± ve yeni konu≈üma bildirildi - Conversation: 7a7e9f84-43f5-4c0b-bf4e-870ecba036fe","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"error":"column v.is_vip does not exist","level":"error","message":"Query hatasƒ±:","service":"asistr-backend","text":"\n      SELECT v.is_vip, v.vip_level, v.language\n      FROM conversations c\n      JOIN visitors v ON c.visitor_id = v.id\n      WHERE c.id = $1\n    ","timestamp":"2025-11-12 09:45:18"}
{"code":"42703","file":"parse_relation.c","length":106,"level":"error","line":"3665","message":"AssignAgent error: column v.is_vip does not exist","name":"error","position":"15","routine":"errorMissingColumn","service":"asistr-backend","severity":"ERROR","stack":"error: column v.is_vip does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/database.js:37:20)\n    at async assignAgentToConversation (/app/src/services/routing.service.js:366:27)\n    at async Socket.<anonymous> (/app/src/socket/socket.handler.js:220:31)","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: 7bv0S065XuIH-OZtAAAE","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: QzoFzgg-pJAxFEqsAAAF","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:a61641de-391b-4e70-951c-0ded3dc70300","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"Agent site'a baƒülandƒ±: a61641de-391b-4e70-951c-0ded3dc70300 -> site:b26e8011-019e-49fa-93f6-80cdcde68608:agents","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:a61641de-391b-4e70-951c-0ded3dc70300","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"Agent site'a baƒülandƒ±: a61641de-391b-4e70-951c-0ded3dc70300 -> site:b26e8011-019e-49fa-93f6-80cdcde68608:agents","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:45:18 +0000] \"GET /api/chat?status=open HTTP/1.1\" 304 - \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"Agent m√ºsaitlik g√ºncellendi - Agent: a61641de-391b-4e70-951c-0ded3dc70300, Available: true","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"::ffff:172.18.0.1 - - [12/Nov/2025:09:45:18 +0000] \"POST /api/voice/availability HTTP/1.1\" 200 44 \"http://localhost:3000/\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\"","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"Agent baƒülandƒ±: a61641de-391b-4e70-951c-0ded3dc70300 (site: b26e8011-019e-49fa-93f6-80cdcde68608)","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"Agent baƒülandƒ±: a61641de-391b-4e70-951c-0ded3dc70300 (site: b26e8011-019e-49fa-93f6-80cdcde68608)","service":"asistr-backend","timestamp":"2025-11-12 09:45:18"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: h7QgpAnr2HaoElObAAAH","service":"asistr-backend","timestamp":"2025-11-12 09:45:19"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:a61641de-391b-4e70-951c-0ded3dc70300","service":"asistr-backend","timestamp":"2025-11-12 09:45:19"}
{"level":"info","message":"Agent site'a baƒülandƒ±: a61641de-391b-4e70-951c-0ded3dc70300 -> site:b26e8011-019e-49fa-93f6-80cdcde68608:agents","service":"asistr-backend","timestamp":"2025-11-12 09:45:19"}
{"level":"info","message":"Yeni socket baƒülantƒ±sƒ±: WXXIY8WG2jT4GucOAAAJ","service":"asistr-backend","timestamp":"2025-11-12 09:45:19"}
{"level":"info","message":"‚úÖ Agent user room'una katƒ±ldƒ±: user:a61641de-391b-4e70-951c-0ded3dc70300","service":"asistr-backend","timestamp":"2025-11-12 09:45:19"}
{"level":"info","message":"Agent site'a baƒülandƒ±: a61641de-391b-4e70-951c-0ded3dc70300 -> site:b26e8011-019e-49fa-93f6-80cdcde68608:agents","service":"asistr-backend","timestamp":"2025-11-12 09:45:19"}
{"level":"info","message":"Agent baƒülandƒ±: a61641de-391b-4e70-951c-0ded3dc70300 (site: b26e8011-019e-49fa-93f6-80cdcde68608)","service":"asistr-backend","timestamp":"2025-11-12 09:45:19"}
{"level":"info","message":"Agent baƒülandƒ±: a61641de-391b-4e70-951c-0ded3dc70300 (site: b26e8011-019e-49fa-93f6-80cdcde68608)","service":"asistr-backend","timestamp":"2025-11-12 09:45:19"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: 7bv0S065XuIH-OZtAAAE","service":"asistr-backend","timestamp":"2025-11-12 09:48:47"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: h7QgpAnr2HaoElObAAAH","service":"asistr-backend","timestamp":"2025-11-12 09:48:47"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: WXXIY8WG2jT4GucOAAAJ","service":"asistr-backend","timestamp":"2025-11-12 09:48:47"}
{"level":"info","message":"Visitor baƒülantƒ±sƒ± kesildi: 438fc954-eda7-47ae-8613-15600aa80f89 (Sebep: transport close)","service":"asistr-backend","timestamp":"2025-11-12 09:48:47"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: U2jvqrxyxTDgCZQeAAAB","service":"asistr-backend","timestamp":"2025-11-12 09:48:47"}
{"level":"info","message":"Agent baƒülantƒ±sƒ± kesildi: a61641de-391b-4e70-951c-0ded3dc70300 (Sebep: transport close)","service":"asistr-backend","timestamp":"2025-11-12 09:48:47"}
{"level":"info","message":"Socket baƒülantƒ±sƒ± kesildi: QzoFzgg-pJAxFEqsAAAF","service":"asistr-backend","timestamp":"2025-11-12 09:48:47"}
